(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var FT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ym(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var em={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function KT(){if(Tv)return ku;Tv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,c){var m=null;if(c!==void 0&&(m=""+c),l.key!==void 0&&(m=""+l.key),"key"in l){c={};for(var v in l)v!=="key"&&(c[v]=l[v])}else c=l;return l=c.ref,{$$typeof:s,type:i,key:m,ref:l!==void 0?l:null,props:c}}return ku.Fragment=e,ku.jsx=n,ku.jsxs=n,ku}var wv;function GT(){return wv||(wv=1,em.exports=KT()),em.exports}var ee=GT(),tm={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function YT(){if(Sv)return ct;Sv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),V=Symbol.iterator;function U(z){return z===null||typeof z!="object"?null:(z=V&&z[V]||z["@@iterator"],typeof z=="function"?z:null)}var se={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,Se={};function Ee(z,ve,Ge){this.props=z,this.context=ve,this.refs=Se,this.updater=Ge||se}Ee.prototype.isReactComponent={},Ee.prototype.setState=function(z,ve){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ve,"setState")},Ee.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function Le(){}Le.prototype=Ee.prototype;function Ne(z,ve,Ge){this.props=z,this.context=ve,this.refs=Se,this.updater=Ge||se}var Ye=Ne.prototype=new Le;Ye.constructor=Ne,pe(Ye,Ee.prototype),Ye.isPureReactComponent=!0;var ht=Array.isArray,Ue={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function P(z,ve,Ge,je,Oe,ot){return Ge=ot.ref,{$$typeof:s,type:z,key:ve,ref:Ge!==void 0?Ge:null,props:ot}}function O(z,ve){return P(z.type,ve,void 0,void 0,void 0,z.props)}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===s}function M(z){var ve={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ge){return ve[Ge]})}var j=/\/+/g;function X(z,ve){return typeof z=="object"&&z!==null&&z.key!=null?M(""+z.key):ve.toString(36)}function k(){}function Ct(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(k,k):(z.status="pending",z.then(function(ve){z.status==="pending"&&(z.status="fulfilled",z.value=ve)},function(ve){z.status==="pending"&&(z.status="rejected",z.reason=ve)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function kt(z,ve,Ge,je,Oe){var ot=typeof z;(ot==="undefined"||ot==="boolean")&&(z=null);var Xe=!1;if(z===null)Xe=!0;else switch(ot){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(z.$$typeof){case s:case e:Xe=!0;break;case I:return Xe=z._init,kt(Xe(z._payload),ve,Ge,je,Oe)}}if(Xe)return Oe=Oe(z),Xe=je===""?"."+X(z,0):je,ht(Oe)?(Ge="",Xe!=null&&(Ge=Xe.replace(j,"$&/")+"/"),kt(Oe,ve,Ge,"",function(xe){return xe})):Oe!=null&&(D(Oe)&&(Oe=O(Oe,Ge+(Oe.key==null||z&&z.key===Oe.key?"":(""+Oe.key).replace(j,"$&/")+"/")+Xe)),ve.push(Oe)),1;Xe=0;var rn=je===""?".":je+":";if(ht(z))for(var _t=0;_t<z.length;_t++)je=z[_t],ot=rn+X(je,_t),Xe+=kt(je,ve,Ge,ot,Oe);else if(_t=U(z),typeof _t=="function")for(z=_t.call(z),_t=0;!(je=z.next()).done;)je=je.value,ot=rn+X(je,_t++),Xe+=kt(je,ve,Ge,ot,Oe);else if(ot==="object"){if(typeof z.then=="function")return kt(Ct(z),ve,Ge,je,Oe);throw ve=String(z),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function fe(z,ve,Ge){if(z==null)return z;var je=[],Oe=0;return kt(z,je,"","",function(ot){return ve.call(Ge,ot,Oe++)}),je}function ze(z){if(z._status===-1){var ve=z._result;ve=ve(),ve.then(function(Ge){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ge)},function(Ge){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ge)}),z._status===-1&&(z._status=0,z._result=ve)}if(z._status===1)return z._result.default;throw z._result}var Ve=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function dt(){}return ct.Children={map:fe,forEach:function(z,ve,Ge){fe(z,function(){ve.apply(this,arguments)},Ge)},count:function(z){var ve=0;return fe(z,function(){ve++}),ve},toArray:function(z){return fe(z,function(ve){return ve})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ct.Component=Ee,ct.Fragment=n,ct.Profiler=l,ct.PureComponent=Ne,ct.StrictMode=i,ct.Suspense=E,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue,ct.act=function(){throw Error("act(...) is not supported in production builds of React.")},ct.cache=function(z){return function(){return z.apply(null,arguments)}},ct.cloneElement=function(z,ve,Ge){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var je=pe({},z.props),Oe=z.key,ot=void 0;if(ve!=null)for(Xe in ve.ref!==void 0&&(ot=void 0),ve.key!==void 0&&(Oe=""+ve.key),ve)!Re.call(ve,Xe)||Xe==="key"||Xe==="__self"||Xe==="__source"||Xe==="ref"&&ve.ref===void 0||(je[Xe]=ve[Xe]);var Xe=arguments.length-2;if(Xe===1)je.children=Ge;else if(1<Xe){for(var rn=Array(Xe),_t=0;_t<Xe;_t++)rn[_t]=arguments[_t+2];je.children=rn}return P(z.type,Oe,void 0,void 0,ot,je)},ct.createContext=function(z){return z={$$typeof:m,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:c,_context:z},z},ct.createElement=function(z,ve,Ge){var je,Oe={},ot=null;if(ve!=null)for(je in ve.key!==void 0&&(ot=""+ve.key),ve)Re.call(ve,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(Oe[je]=ve[je]);var Xe=arguments.length-2;if(Xe===1)Oe.children=Ge;else if(1<Xe){for(var rn=Array(Xe),_t=0;_t<Xe;_t++)rn[_t]=arguments[_t+2];Oe.children=rn}if(z&&z.defaultProps)for(je in Xe=z.defaultProps,Xe)Oe[je]===void 0&&(Oe[je]=Xe[je]);return P(z,ot,void 0,void 0,null,Oe)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(z){return{$$typeof:v,render:z}},ct.isValidElement=D,ct.lazy=function(z){return{$$typeof:I,_payload:{_status:-1,_result:z},_init:ze}},ct.memo=function(z,ve){return{$$typeof:b,type:z,compare:ve===void 0?null:ve}},ct.startTransition=function(z){var ve=Ue.T,Ge={};Ue.T=Ge;try{var je=z(),Oe=Ue.S;Oe!==null&&Oe(Ge,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(dt,Ve)}catch(ot){Ve(ot)}finally{Ue.T=ve}},ct.unstable_useCacheRefresh=function(){return Ue.H.useCacheRefresh()},ct.use=function(z){return Ue.H.use(z)},ct.useActionState=function(z,ve,Ge){return Ue.H.useActionState(z,ve,Ge)},ct.useCallback=function(z,ve){return Ue.H.useCallback(z,ve)},ct.useContext=function(z){return Ue.H.useContext(z)},ct.useDebugValue=function(){},ct.useDeferredValue=function(z,ve){return Ue.H.useDeferredValue(z,ve)},ct.useEffect=function(z,ve){return Ue.H.useEffect(z,ve)},ct.useId=function(){return Ue.H.useId()},ct.useImperativeHandle=function(z,ve,Ge){return Ue.H.useImperativeHandle(z,ve,Ge)},ct.useInsertionEffect=function(z,ve){return Ue.H.useInsertionEffect(z,ve)},ct.useLayoutEffect=function(z,ve){return Ue.H.useLayoutEffect(z,ve)},ct.useMemo=function(z,ve){return Ue.H.useMemo(z,ve)},ct.useOptimistic=function(z,ve){return Ue.H.useOptimistic(z,ve)},ct.useReducer=function(z,ve,Ge){return Ue.H.useReducer(z,ve,Ge)},ct.useRef=function(z){return Ue.H.useRef(z)},ct.useState=function(z){return Ue.H.useState(z)},ct.useSyncExternalStore=function(z,ve,Ge){return Ue.H.useSyncExternalStore(z,ve,Ge)},ct.useTransition=function(){return Ue.H.useTransition()},ct.version="19.0.0",ct}var Av;function Qm(){return Av||(Av=1,tm.exports=YT()),tm.exports}var ut=Qm();const QT=Ym(ut);var nm={exports:{}},Vu={},rm={exports:{}},im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function XT(){return Rv||(Rv=1,(function(s){function e(fe,ze){var Ve=fe.length;fe.push(ze);e:for(;0<Ve;){var dt=Ve-1>>>1,z=fe[dt];if(0<l(z,ze))fe[dt]=ze,fe[Ve]=z,Ve=dt;else break e}}function n(fe){return fe.length===0?null:fe[0]}function i(fe){if(fe.length===0)return null;var ze=fe[0],Ve=fe.pop();if(Ve!==ze){fe[0]=Ve;e:for(var dt=0,z=fe.length,ve=z>>>1;dt<ve;){var Ge=2*(dt+1)-1,je=fe[Ge],Oe=Ge+1,ot=fe[Oe];if(0>l(je,Ve))Oe<z&&0>l(ot,je)?(fe[dt]=ot,fe[Oe]=Ve,dt=Oe):(fe[dt]=je,fe[Ge]=Ve,dt=Ge);else if(Oe<z&&0>l(ot,Ve))fe[dt]=ot,fe[Oe]=Ve,dt=Oe;else break e}}return ze}function l(fe,ze){var Ve=fe.sortIndex-ze.sortIndex;return Ve!==0?Ve:fe.id-ze.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var m=Date,v=m.now();s.unstable_now=function(){return m.now()-v}}var E=[],b=[],I=1,V=null,U=3,se=!1,pe=!1,Se=!1,Ee=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,Ne=typeof setImmediate<"u"?setImmediate:null;function Ye(fe){for(var ze=n(b);ze!==null;){if(ze.callback===null)i(b);else if(ze.startTime<=fe)i(b),ze.sortIndex=ze.expirationTime,e(E,ze);else break;ze=n(b)}}function ht(fe){if(Se=!1,Ye(fe),!pe)if(n(E)!==null)pe=!0,Ct();else{var ze=n(b);ze!==null&&kt(ht,ze.startTime-fe)}}var Ue=!1,Re=-1,P=5,O=-1;function D(){return!(s.unstable_now()-O<P)}function M(){if(Ue){var fe=s.unstable_now();O=fe;var ze=!0;try{e:{pe=!1,Se&&(Se=!1,Le(Re),Re=-1),se=!0;var Ve=U;try{t:{for(Ye(fe),V=n(E);V!==null&&!(V.expirationTime>fe&&D());){var dt=V.callback;if(typeof dt=="function"){V.callback=null,U=V.priorityLevel;var z=dt(V.expirationTime<=fe);if(fe=s.unstable_now(),typeof z=="function"){V.callback=z,Ye(fe),ze=!0;break t}V===n(E)&&i(E),Ye(fe)}else i(E);V=n(E)}if(V!==null)ze=!0;else{var ve=n(b);ve!==null&&kt(ht,ve.startTime-fe),ze=!1}}break e}finally{V=null,U=Ve,se=!1}ze=void 0}}finally{ze?j():Ue=!1}}}var j;if(typeof Ne=="function")j=function(){Ne(M)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,k=X.port2;X.port1.onmessage=M,j=function(){k.postMessage(null)}}else j=function(){Ee(M,0)};function Ct(){Ue||(Ue=!0,j())}function kt(fe,ze){Re=Ee(function(){fe(s.unstable_now())},ze)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(fe){fe.callback=null},s.unstable_continueExecution=function(){pe||se||(pe=!0,Ct())},s.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<fe?Math.floor(1e3/fe):5},s.unstable_getCurrentPriorityLevel=function(){return U},s.unstable_getFirstCallbackNode=function(){return n(E)},s.unstable_next=function(fe){switch(U){case 1:case 2:case 3:var ze=3;break;default:ze=U}var Ve=U;U=ze;try{return fe()}finally{U=Ve}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(fe,ze){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ve=U;U=fe;try{return ze()}finally{U=Ve}},s.unstable_scheduleCallback=function(fe,ze,Ve){var dt=s.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?dt+Ve:dt):Ve=dt,fe){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Ve+z,fe={id:I++,callback:ze,priorityLevel:fe,startTime:Ve,expirationTime:z,sortIndex:-1},Ve>dt?(fe.sortIndex=Ve,e(b,fe),n(E)===null&&fe===n(b)&&(Se?(Le(Re),Re=-1):Se=!0,kt(ht,Ve-dt))):(fe.sortIndex=z,e(E,fe),pe||se||(pe=!0,Ct())),fe},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(fe){var ze=U;return function(){var Ve=U;U=ze;try{return fe.apply(this,arguments)}finally{U=Ve}}}})(im)),im}var Cv;function WT(){return Cv||(Cv=1,rm.exports=XT()),rm.exports}var sm={exports:{}},lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function $T(){if(Iv)return lr;Iv=1;var s=Qm();function e(E){var b="https://react.dev/errors/"+E;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)b+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+E+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(E,b,I){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:V==null?null:""+V,children:E,containerInfo:b,implementation:I}}var m=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(E,b){if(E==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,lr.createPortal=function(E,b){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return c(E,b,null,I)},lr.flushSync=function(E){var b=m.T,I=i.p;try{if(m.T=null,i.p=2,E)return E()}finally{m.T=b,i.p=I,i.d.f()}},lr.preconnect=function(E,b){typeof E=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,i.d.C(E,b))},lr.prefetchDNS=function(E){typeof E=="string"&&i.d.D(E)},lr.preinit=function(E,b){if(typeof E=="string"&&b&&typeof b.as=="string"){var I=b.as,V=v(I,b.crossOrigin),U=typeof b.integrity=="string"?b.integrity:void 0,se=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;I==="style"?i.d.S(E,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:V,integrity:U,fetchPriority:se}):I==="script"&&i.d.X(E,{crossOrigin:V,integrity:U,fetchPriority:se,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},lr.preinitModule=function(E,b){if(typeof E=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var I=v(b.as,b.crossOrigin);i.d.M(E,{crossOrigin:I,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&i.d.M(E)},lr.preload=function(E,b){if(typeof E=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var I=b.as,V=v(I,b.crossOrigin);i.d.L(E,I,{crossOrigin:V,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},lr.preloadModule=function(E,b){if(typeof E=="string")if(b){var I=v(b.as,b.crossOrigin);i.d.m(E,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:I,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else i.d.m(E)},lr.requestFormReset=function(E){i.d.r(E)},lr.unstable_batchedUpdates=function(E,b){return E(b)},lr.useFormState=function(E,b,I){return m.H.useFormState(E,b,I)},lr.useFormStatus=function(){return m.H.useHostTransitionStatus()},lr.version="19.0.0",lr}var xv;function ZT(){if(xv)return sm.exports;xv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),sm.exports=$T(),sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function JT(){if(Dv)return Vu;Dv=1;var s=WT(),e=Qm(),n=ZT();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var c=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),se=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Ye=Symbol.for("react.offscreen"),ht=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function Re(t){return t===null||typeof t!="object"?null:(t=Ue&&t[Ue]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function O(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case v:return"Portal";case I:return"Profiler";case b:return"StrictMode";case Se:return"Suspense";case Ee:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case se:return(t.displayName||"Context")+".Provider";case U:return(t._context.displayName||"Context")+".Consumer";case pe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Le:return r=t.displayName||null,r!==null?r:O(t.type)||"Memo";case Ne:r=t._payload,t=t._init;try{return O(t(r))}catch{}}return null}var D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign,j,X;function k(t){if(j===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);j=r&&r[1]||"",X=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+t+X}var Ct=!1;function kt(t,r){if(!t||Ct)return"";Ct=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(r){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ue){var ie=ue}Reflect.construct(t,[],ge)}else{try{ge.call()}catch(ue){ie=ue}t.call(ge.prototype)}}else{try{throw Error()}catch(ue){ie=ue}(ge=t())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ue){if(ue&&ie&&typeof ue.stack=="string")return[ue.stack,ie.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),w=p[0],R=p[1];if(w&&R){var N=w.split(`
`),Q=R.split(`
`);for(f=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(o===N.length||f===Q.length)for(o=N.length-1,f=Q.length-1;1<=o&&0<=f&&N[o]!==Q[f];)f--;for(;1<=o&&0<=f;o--,f--)if(N[o]!==Q[f]){if(o!==1||f!==1)do if(o--,f--,0>f||N[o]!==Q[f]){var he=`
`+N[o].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=o&&0<=f);break}}}finally{Ct=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?k(a):""}function fe(t){switch(t.tag){case 26:case 27:case 5:return k(t.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return t=kt(t.type,!1),t;case 11:return t=kt(t.type.render,!1),t;case 1:return t=kt(t.type,!0),t;default:return""}}function ze(t){try{var r="";do r+=fe(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ve(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function dt(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function z(t){if(Ve(t)!==t)throw Error(i(188))}function ve(t){var r=t.alternate;if(!r){if(r=Ve(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,o=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return z(f),t;if(p===o)return z(f),r;p=p.sibling}throw Error(i(188))}if(a.return!==o.return)a=f,o=p;else{for(var w=!1,R=f.child;R;){if(R===a){w=!0,a=f,o=p;break}if(R===o){w=!0,o=f,a=p;break}R=R.sibling}if(!w){for(R=p.child;R;){if(R===a){w=!0,a=p,o=f;break}if(R===o){w=!0,o=p,a=f;break}R=R.sibling}if(!w)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function Ge(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=Ge(t),r!==null)return r;t=t.sibling}return null}var je=Array.isArray,Oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Xe=[],rn=-1;function _t(t){return{current:t}}function xe(t){0>rn||(t.current=Xe[rn],Xe[rn]=null,rn--)}function Pt(t,r){rn++,Xe[rn]=t.current,t.current=r}var Yn=_t(null),gt=_t(null),jn=_t(null),ps=_t(null);function br(t,r){switch(Pt(jn,r),Pt(gt,t),Pt(Yn,null),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?$y(r):0;break;default:if(t=t===8?r.parentNode:r,r=t.tagName,t=t.namespaceURI)t=$y(t),r=Zy(t,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}xe(Yn),Pt(Yn,r)}function Qr(){xe(Yn),xe(gt),xe(jn)}function gs(t){t.memoizedState!==null&&Pt(ps,t);var r=Yn.current,a=Zy(r,t.type);r!==a&&(Pt(gt,t),Pt(Yn,a))}function ys(t){gt.current===t&&(xe(Yn),xe(gt)),ps.current===t&&(xe(ps),Iu._currentValue=ot)}var hn=Object.prototype.hasOwnProperty,sn=s.unstable_scheduleCallback,xn=s.unstable_cancelCallback,Xo=s.unstable_shouldYield,Fi=s.unstable_requestPaint,dr=s.unstable_now,Mr=s.unstable_getCurrentPriorityLevel,bi=s.unstable_ImmediatePriority,vs=s.unstable_UserBlockingPriority,Tr=s.unstable_NormalPriority,eo=s.unstable_LowPriority,_s=s.unstable_IdlePriority,Xr=s.log,Es=s.unstable_setDisableYieldValue,mr=null,qt=null;function Me(t){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(mr,t,void 0,(t.current.flags&128)===128)}catch{}}function fn(t){if(typeof Xr=="function"&&Es(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(mr,t)}catch{}}var Zt=Math.clz32?Math.clz32:wi,Ti=Math.log,De=Math.LN2;function wi(t){return t>>>=0,t===0?32:31-(Ti(t)/De|0)|0}var Ki=128,Jt=4194304;function Pr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wr(t,r){var a=t.pendingLanes;if(a===0)return 0;var o=0,f=t.suspendedLanes,p=t.pingedLanes,w=t.warmLanes;t=t.finishedLanes!==0;var R=a&134217727;return R!==0?(a=R&~f,a!==0?o=Pr(a):(p&=R,p!==0?o=Pr(p):t||(w=R&~w,w!==0&&(o=Pr(w))))):(R=a&~f,R!==0?o=Pr(R):p!==0?o=Pr(p):t||(w=a&~w,w!==0&&(o=Pr(w)))),o===0?0:r!==0&&r!==o&&(r&f)===0&&(f=o&-o,w=r&-r,f>=w||f===32&&(w&4194176)!==0)?r:o}function Lr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ql(t,r){switch(t){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var t=Ki;return Ki<<=1,(Ki&4194176)===0&&(Ki=128),t}function nr(){var t=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),t}function bs(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Wr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ot(t,r,a,o,f,p){var w=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var R=t.entanglements,N=t.expirationTimes,Q=t.hiddenUpdates;for(a=w&~a;0<a;){var he=31-Zt(a),ge=1<<he;R[he]=0,N[he]=-1;var ie=Q[he];if(ie!==null)for(Q[he]=null,he=0;he<ie.length;he++){var ue=ie[he];ue!==null&&(ue.lane&=-536870913)}a&=~ge}o!==0&&en(t,o,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(w&~r))}function en(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var o=31-Zt(r);t.entangledLanes|=r,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194218}function to(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var o=31-Zt(a),f=1<<o;f&r|t[o]&r&&(t[o]|=r),a&=~f}}function Ai(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ur(){var t=Oe.p;return t!==0?t:(t=window.event,t===void 0?32:gv(t.type))}function na(t,r){var a=Oe.p;try{return Oe.p=t,r()}finally{Oe.p=a}}var Dn=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Dn,tn="__reactProps$"+Dn,On="__reactContainer$"+Dn,$r="__reactEvents$"+Dn,Wo="__reactListeners$"+Dn,Zr="__reactHandles$"+Dn,ra="__reactResources$"+Dn,pr="__reactMarker$"+Dn;function Ri(t){delete t[Ut],delete t[tn],delete t[$r],delete t[Wo],delete t[Zr]}function Sr(t){var r=t[Ut];if(r)return r;for(var a=t.parentNode;a;){if(r=a[On]||a[Ut]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=tv(t);t!==null;){if(a=t[Ut])return a;t=tv(t)}return r}t=a,a=t.parentNode}return null}function It(t){if(t=t[Ut]||t[On]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Nn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function nn(t){var r=t[ra];return r||(r=t[ra]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Gt(t){t[pr]=!0}var Ci=new Set,Gi={};function Ar(t,r){jr(t,r),jr(t+"Capture",r)}function jr(t,r){for(Gi[t]=r,t=0;t<r.length;t++)Ci.add(r[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yi={},sa={};function mt(t){return hn.call(sa,t)?!0:hn.call(Yi,t)?!1:ia.test(t)?sa[t]=!0:(Yi[t]=!0,!1)}function Ts(t,r,a){if(mt(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var o=r.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function rr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function an(t,r,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+o)}}function rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rr(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ii(t){var r=Rr(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),o=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function yt(t){t._valueTracker||(t._valueTracker=Ii(t))}function xi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),o="";return t&&(o=Rr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(r.setValue(t),!0):!1}function Cr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Jr=/[\n"\\]/g;function Qn(t){return t.replace(Jr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Di(t,r,a,o,f,p,w,R){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),r!=null?w==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+rt(r)):t.value!==""+rt(r)&&(t.value=""+rt(r)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),r!=null?gr(t,w,rt(r)):a!=null?gr(t,w,rt(a)):o!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+rt(R):t.removeAttribute("name")}function no(t,r,a,o,f,p,w,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+rt(a):"",r=r!=null?""+rt(r):a,R||r===t.value||(t.value=r),t.defaultValue=r}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=R?t.checked:!!o,t.defaultChecked=!!o,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w)}function gr(t,r,a){r==="number"&&Cr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ir(t,r,a,o){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&o&&(t[a].defaultSelected=!0)}else{for(a=""+rt(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function ro(t,r,a){if(r!=null&&(r=""+rt(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+rt(a):""}function Qi(t,r,a,o){if(r==null){if(o!=null){if(a!=null)throw Error(i(92));if(je(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),r=a}a=rt(r),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function et(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var aa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function io(t,r,a){var o=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":o?t.setProperty(r,a):typeof a!="number"||a===0||aa.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function so(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||r!=null&&r.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in r)o=r[f],r.hasOwnProperty(f)&&a[f]!==o&&io(t,f,o)}else for(var p in r)r.hasOwnProperty(p)&&io(t,p,r[p])}function _n(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yr(t){return Br.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var oa=null;function la(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var St=null,kn=null;function ei(t){var r=It(t);if(r&&(t=r.stateNode)){var a=t[tn]||null;e:switch(t=r.stateNode,r.type){case"input":if(Di(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var o=a[r];if(o!==t&&o.form===t.form){var f=o[tn]||null;if(!f)throw Error(i(90));Di(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)o=a[r],o.form===t.form&&xi(o)}break e;case"textarea":ro(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ir(t,!!a.multiple,r,!1)}}}var xr=!1;function ws(t,r,a){if(xr)return t(r,a);xr=!0;try{var o=t(r);return o}finally{if(xr=!1,(St!==null||kn!==null)&&(Xc(),St&&(r=St,t=kn,kn=St=null,ei(r),t)))for(r=0;r<t.length;r++)ei(t[r])}}function En(t,r){var a=t.stateNode;if(a===null)return null;var o=a[tn]||null;if(o===null)return null;a=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Ni=!1;if(gn)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Ni=!1}var ir=null,Lt=null,Xi=null;function Wi(){if(Xi)return Xi;var t,r=Lt,a=r.length,o,f="value"in ir?ir.value:ir.textContent,p=f.length;for(t=0;t<a&&r[t]===f[t];t++);var w=a-t;for(o=1;o<=w&&r[a-o]===f[p-o];o++);return Xi=f.slice(t,1<o?1-o:void 0)}function ki(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function $i(){return!0}function ao(){return!1}function Yt(t){function r(a,o,f,p,w){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(a=t[R],this[R]=a?a(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?$i:ao,this.isPropagationStopped=ao,this}return M(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),r}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Yt(Bn),ti=M({},Bn,{view:0,detail:0}),ni=Yt(ti),Zi,As,ri,Rs=M({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Zi=t.screenX-ri.screenX,As=t.screenY-ri.screenY):As=Zi=0,ri=t),Zi)},movementY:function(t){return"movementY"in t?t.movementY:As}}),Vi=Yt(Rs),oo=M({},Rs,{dataTransfer:0}),lo=Yt(oo),ii=M({},ti,{relatedTarget:0}),Mi=Yt(ii),Cs=M({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),ua=Yt(Cs),uo=M({},Bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Is=Yt(uo),Ji=M({},Bn,{data:0}),xs=Yt(Ji),ca={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function es(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=bn[t])?!!r[t]:!1}function si(){return es}var co=M({},ti,{key:function(t){if(t.key){var r=ca[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(t){return t.type==="keypress"?ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pi=Yt(co),zn=M({},Rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ha=Yt(zn),Ds=M({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),ai=Yt(Ds),u=M({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Yt(u),T=M({},Rs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C=Yt(T),te=M({},Bn,{newState:0,oldState:0}),ae=Yt(te),we=[9,13,27,32],Je=gn&&"CompositionEvent"in window,Vt=null;gn&&"documentMode"in document&&(Vt=document.documentMode);var Nt=gn&&"TextEvent"in window&&!Vt,Qt=gn&&(!Je||Vt&&8<Vt&&11>=Vt),Xn=" ",oi=!1;function Dr(t,r){switch(t){case"keyup":return we.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Or=!1;function fa(t,r){switch(t){case"compositionend":return qr(r);case"keypress":return r.which!==32?null:(oi=!0,Xn);case"textInput":return t=r.data,t===Xn&&oi?null:t;default:return null}}function yf(t,r){if(Or)return t==="compositionend"||!Je&&Dr(t,r)?(t=Wi(),Xi=Lt=ir=null,Or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qt&&r.locale!=="ko"?null:r.data;default:return null}}var _c={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $o(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!_c[t.type]:r==="textarea"}function Xl(t,r,a,o){St?kn?kn.push(o):kn=[o]:St=o,r=eh(r,"onChange"),0<r.length&&(a=new Ss("onChange","change",null,a,o),t.push({event:a,listeners:r}))}var da=null,ho=null;function vf(t){Gy(t,0)}function Zo(t){var r=Nn(t);if(xi(r))return t}function fo(t,r){if(t==="change")return r}var li=!1;if(gn){var Xt;if(gn){var ma="oninput"in document;if(!ma){var vr=document.createElement("div");vr.setAttribute("oninput","return;"),ma=typeof vr.oninput=="function"}Xt=ma}else Xt=!1;li=Xt&&(!document.documentMode||9<document.documentMode)}function Ec(){da&&(da.detachEvent("onpropertychange",Jo),ho=da=null)}function Jo(t){if(t.propertyName==="value"&&Zo(ho)){var r=[];Xl(r,ho,t,la(t)),ws(vf,r)}}function bc(t,r,a){t==="focusin"?(Ec(),da=r,ho=a,da.attachEvent("onpropertychange",Jo)):t==="focusout"&&Ec()}function Os(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zo(ho)}function Wl(t,r){if(t==="click")return Zo(r)}function pa(t,r){if(t==="input"||t==="change")return Zo(r)}function ts(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var sr=typeof Object.is=="function"?Object.is:ts;function h(t,r){if(sr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!hn.call(r,f)||!sr(t[f],r[f]))return!1}return!0}function d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,r){var a=d(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=r&&o>=r)return{node:a,offset:r-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=d(a)}}function _(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function S(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Cr(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Cr(t.document)}return r}function A(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function x(t,r){var a=S(r);r=t.focusedElem;var o=t.selectionRange;if(a!==r&&r&&r.ownerDocument&&_(r.ownerDocument.documentElement,r)){if(o!==null&&A(r)){if(t=o.start,a=o.end,a===void 0&&(a=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(a,r.value.length);else if(a=(t=r.ownerDocument||document)&&t.defaultView||window,a.getSelection){a=a.getSelection();var f=r.textContent.length,p=Math.min(o.start,f);o=o.end===void 0?p:Math.min(o.end,f),!a.extend&&p>o&&(f=o,o=p,p=f),f=g(r,p);var w=g(r,o);f&&w&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==w.node||a.focusOffset!==w.offset)&&(t=t.createRange(),t.setStart(f.node,f.offset),a.removeAllRanges(),p>o?(a.addRange(t),a.extend(w.node,w.offset)):(t.setEnd(w.node,w.offset),a.addRange(t)))}}for(t=[],a=r;a=a.parentNode;)a.nodeType===1&&t.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)a=t[r],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var L=gn&&"documentMode"in document&&11>=document.documentMode,F=null,q=null,W=null,B=!1;function Z(t,r,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;B||F==null||F!==Cr(o)||(o=F,"selectionStart"in o&&A(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),W&&h(W,o)||(W=o,o=eh(q,"onSelect"),0<o.length&&(r=new Ss("onSelect","select",null,r,a),t.push({event:r,listeners:o}),r.target=F)))}function H(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var K={animationend:H("Animation","AnimationEnd"),animationiteration:H("Animation","AnimationIteration"),animationstart:H("Animation","AnimationStart"),transitionrun:H("Transition","TransitionRun"),transitionstart:H("Transition","TransitionStart"),transitioncancel:H("Transition","TransitionCancel"),transitionend:H("Transition","TransitionEnd")},$={},Y={};gn&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);function ne(t){if($[t])return $[t];if(!K[t])return t;var r=K[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Y)return $[t]=r[a];return t}var oe=ne("animationend"),le=ne("animationiteration"),ce=ne("animationstart"),be=ne("transitionrun"),Ce=ne("transitionstart"),Te=ne("transitioncancel"),Ae=ne("transitionend"),Ie=new Map,_e="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Fe(t,r){Ie.set(t,r),Ar(r,[t])}var Ke=[],tt=0,lt=0;function ar(){for(var t=tt,r=lt=tt=0;r<t;){var a=Ke[r];Ke[r++]=null;var o=Ke[r];Ke[r++]=null;var f=Ke[r];Ke[r++]=null;var p=Ke[r];if(Ke[r++]=null,o!==null&&f!==null){var w=o.pending;w===null?f.next=f:(f.next=w.next,w.next=f),o.pending=f}p!==0&&mo(a,f,p)}}function it(t,r,a,o){Ke[tt++]=t,Ke[tt++]=r,Ke[tt++]=a,Ke[tt++]=o,lt|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Tn(t,r,a,o){return it(t,r,a,o),wn(t)}function Wt(t,r){return it(t,null,null,r),wn(t)}function mo(t,r,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var f=!1,p=t.return;p!==null;)p.childLanes|=a,o=p.alternate,o!==null&&(o.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;f&&r!==null&&t.tag===3&&(p=t.stateNode,f=31-Zt(a),p=p.hiddenUpdates,t=p[f],t===null?p[f]=[r]:t.push(r),r.lane=a|536870912)}function wn(t){if(50<bu)throw bu=0,Sd=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Nr={},el=new WeakMap;function ui(t,r){if(typeof t=="object"&&t!==null){var a=el.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ze(r)},el.set(t,r),r)}return{value:t,source:r,stack:ze(r)}}var tl=[],nl=0,Tc=null,wc=0,ci=[],hi=0,po=null,Ns=1,ks="";function go(t,r){tl[nl++]=wc,tl[nl++]=Tc,Tc=t,wc=r}function Bp(t,r,a){ci[hi++]=Ns,ci[hi++]=ks,ci[hi++]=po,po=t;var o=Ns;t=ks;var f=32-Zt(o)-1;o&=~(1<<f),a+=1;var p=32-Zt(r)+f;if(30<p){var w=f-f%5;p=(o&(1<<w)-1).toString(32),o>>=w,f-=w,Ns=1<<32-Zt(r)+f|a<<f|o,ks=p+t}else Ns=1<<p|a<<f|o,ks=t}function _f(t){t.return!==null&&(go(t,1),Bp(t,1,0))}function Ef(t){for(;t===Tc;)Tc=tl[--nl],tl[nl]=null,wc=tl[--nl],tl[nl]=null;for(;t===po;)po=ci[--hi],ci[hi]=null,ks=ci[--hi],ci[hi]=null,Ns=ci[--hi],ci[hi]=null}var _r=null,Wn=null,xt=!1,Li=null,ns=!1,bf=Error(i(519));function yo(t){var r=Error(i(418,""));throw Jl(ui(r,t)),bf}function zp(t){var r=t.stateNode,a=t.type,o=t.memoizedProps;switch(r[Ut]=t,r[tn]=o,a){case"dialog":wt("cancel",r),wt("close",r);break;case"iframe":case"object":case"embed":wt("load",r);break;case"video":case"audio":for(a=0;a<wu.length;a++)wt(wu[a],r);break;case"source":wt("error",r);break;case"img":case"image":case"link":wt("error",r),wt("load",r);break;case"details":wt("toggle",r);break;case"input":wt("invalid",r),no(r,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),yt(r);break;case"select":wt("invalid",r);break;case"textarea":wt("invalid",r),Qi(r,o.value,o.defaultValue,o.children),yt(r)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||o.suppressHydrationWarning===!0||Wy(r.textContent,a)?(o.popover!=null&&(wt("beforetoggle",r),wt("toggle",r)),o.onScroll!=null&&wt("scroll",r),o.onScrollEnd!=null&&wt("scrollend",r),o.onClick!=null&&(r.onclick=th),r=!0):r=!1,r||yo(t)}function qp(t){for(_r=t.return;_r;)switch(_r.tag){case 3:case 27:ns=!0;return;case 5:case 13:ns=!1;return;default:_r=_r.return}}function $l(t){if(t!==_r)return!1;if(!xt)return qp(t),xt=!0,!1;var r=!1,a;if((a=t.tag!==3&&t.tag!==27)&&((a=t.tag===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||zd(t.type,t.memoizedProps)),a=!a),a&&(r=!0),r&&Wn&&yo(t),qp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){Wn=ji(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}Wn=null}}else Wn=_r?ji(t.stateNode.nextSibling):null;return!0}function Zl(){Wn=_r=null,xt=!1}function Jl(t){Li===null?Li=[t]:Li.push(t)}var eu=Error(i(460)),Hp=Error(i(474)),Tf={then:function(){}};function Fp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sc(){}function Kp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Sc,Sc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,t===eu?Error(i(483)):t;default:if(typeof r.status=="string")r.then(Sc,Sc);else{if(t=Ht,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(o){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=o}},function(o){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=o}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,t===eu?Error(i(483)):t}throw tu=r,eu}}var tu=null;function Gp(){if(tu===null)throw Error(i(459));var t=tu;return tu=null,t}var rl=null,nu=0;function Ac(t){var r=nu;return nu+=1,rl===null&&(rl=[]),Kp(rl,t,r)}function ru(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Rc(t,r){throw r.$$typeof===c?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Yp(t){var r=t._init;return r(t._payload)}function Qp(t){function r(J,G){if(t){var re=J.deletions;re===null?(J.deletions=[G],J.flags|=16):re.push(G)}}function a(J,G){if(!t)return null;for(;G!==null;)r(J,G),G=G.sibling;return null}function o(J){for(var G=new Map;J!==null;)J.key!==null?G.set(J.key,J):G.set(J.index,J),J=J.sibling;return G}function f(J,G){return J=Ca(J,G),J.index=0,J.sibling=null,J}function p(J,G,re){return J.index=re,t?(re=J.alternate,re!==null?(re=re.index,re<G?(J.flags|=33554434,G):re):(J.flags|=33554434,G)):(J.flags|=1048576,G)}function w(J){return t&&J.alternate===null&&(J.flags|=33554434),J}function R(J,G,re,de){return G===null||G.tag!==6?(G=gd(re,J.mode,de),G.return=J,G):(G=f(G,re),G.return=J,G)}function N(J,G,re,de){var Pe=re.type;return Pe===E?he(J,G,re.props.children,de,re.key):G!==null&&(G.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Ne&&Yp(Pe)===G.type)?(G=f(G,re.props),ru(G,re),G.return=J,G):(G=Fc(re.type,re.key,re.props,null,J.mode,de),ru(G,re),G.return=J,G)}function Q(J,G,re,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==re.containerInfo||G.stateNode.implementation!==re.implementation?(G=yd(re,J.mode,de),G.return=J,G):(G=f(G,re.children||[]),G.return=J,G)}function he(J,G,re,de,Pe){return G===null||G.tag!==7?(G=Co(re,J.mode,de,Pe),G.return=J,G):(G=f(G,re),G.return=J,G)}function ge(J,G,re){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=gd(""+G,J.mode,re),G.return=J,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case m:return re=Fc(G.type,G.key,G.props,null,J.mode,re),ru(re,G),re.return=J,re;case v:return G=yd(G,J.mode,re),G.return=J,G;case Ne:var de=G._init;return G=de(G._payload),ge(J,G,re)}if(je(G)||Re(G))return G=Co(G,J.mode,re,null),G.return=J,G;if(typeof G.then=="function")return ge(J,Ac(G),re);if(G.$$typeof===se)return ge(J,zc(J,G),re);Rc(J,G)}return null}function ie(J,G,re,de){var Pe=G!==null?G.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Pe!==null?null:R(J,G,""+re,de);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case m:return re.key===Pe?N(J,G,re,de):null;case v:return re.key===Pe?Q(J,G,re,de):null;case Ne:return Pe=re._init,re=Pe(re._payload),ie(J,G,re,de)}if(je(re)||Re(re))return Pe!==null?null:he(J,G,re,de,null);if(typeof re.then=="function")return ie(J,G,Ac(re),de);if(re.$$typeof===se)return ie(J,G,zc(J,re),de);Rc(J,re)}return null}function ue(J,G,re,de,Pe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return J=J.get(re)||null,R(G,J,""+de,Pe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case m:return J=J.get(de.key===null?re:de.key)||null,N(G,J,de,Pe);case v:return J=J.get(de.key===null?re:de.key)||null,Q(G,J,de,Pe);case Ne:var pt=de._init;return de=pt(de._payload),ue(J,G,re,de,Pe)}if(je(de)||Re(de))return J=J.get(re)||null,he(G,J,de,Pe,null);if(typeof de.then=="function")return ue(J,G,re,Ac(de),Pe);if(de.$$typeof===se)return ue(J,G,re,zc(G,de),Pe);Rc(G,de)}return null}function Be(J,G,re,de){for(var Pe=null,pt=null,He=G,We=G=0,Fn=null;He!==null&&We<re.length;We++){He.index>We?(Fn=He,He=null):Fn=He.sibling;var Dt=ie(J,He,re[We],de);if(Dt===null){He===null&&(He=Fn);break}t&&He&&Dt.alternate===null&&r(J,He),G=p(Dt,G,We),pt===null?Pe=Dt:pt.sibling=Dt,pt=Dt,He=Fn}if(We===re.length)return a(J,He),xt&&go(J,We),Pe;if(He===null){for(;We<re.length;We++)He=ge(J,re[We],de),He!==null&&(G=p(He,G,We),pt===null?Pe=He:pt.sibling=He,pt=He);return xt&&go(J,We),Pe}for(He=o(He);We<re.length;We++)Fn=ue(He,J,We,re[We],de),Fn!==null&&(t&&Fn.alternate!==null&&He.delete(Fn.key===null?We:Fn.key),G=p(Fn,G,We),pt===null?Pe=Fn:pt.sibling=Fn,pt=Fn);return t&&He.forEach(function(Va){return r(J,Va)}),xt&&go(J,We),Pe}function st(J,G,re,de){if(re==null)throw Error(i(151));for(var Pe=null,pt=null,He=G,We=G=0,Fn=null,Dt=re.next();He!==null&&!Dt.done;We++,Dt=re.next()){He.index>We?(Fn=He,He=null):Fn=He.sibling;var Va=ie(J,He,Dt.value,de);if(Va===null){He===null&&(He=Fn);break}t&&He&&Va.alternate===null&&r(J,He),G=p(Va,G,We),pt===null?Pe=Va:pt.sibling=Va,pt=Va,He=Fn}if(Dt.done)return a(J,He),xt&&go(J,We),Pe;if(He===null){for(;!Dt.done;We++,Dt=re.next())Dt=ge(J,Dt.value,de),Dt!==null&&(G=p(Dt,G,We),pt===null?Pe=Dt:pt.sibling=Dt,pt=Dt);return xt&&go(J,We),Pe}for(He=o(He);!Dt.done;We++,Dt=re.next())Dt=ue(He,J,We,Dt.value,de),Dt!==null&&(t&&Dt.alternate!==null&&He.delete(Dt.key===null?We:Dt.key),G=p(Dt,G,We),pt===null?Pe=Dt:pt.sibling=Dt,pt=Dt);return t&&He.forEach(function(HT){return r(J,HT)}),xt&&go(J,We),Pe}function pn(J,G,re,de){if(typeof re=="object"&&re!==null&&re.type===E&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case m:e:{for(var Pe=re.key;G!==null;){if(G.key===Pe){if(Pe=re.type,Pe===E){if(G.tag===7){a(J,G.sibling),de=f(G,re.props.children),de.return=J,J=de;break e}}else if(G.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Ne&&Yp(Pe)===G.type){a(J,G.sibling),de=f(G,re.props),ru(de,re),de.return=J,J=de;break e}a(J,G);break}else r(J,G);G=G.sibling}re.type===E?(de=Co(re.props.children,J.mode,de,re.key),de.return=J,J=de):(de=Fc(re.type,re.key,re.props,null,J.mode,de),ru(de,re),de.return=J,J=de)}return w(J);case v:e:{for(Pe=re.key;G!==null;){if(G.key===Pe)if(G.tag===4&&G.stateNode.containerInfo===re.containerInfo&&G.stateNode.implementation===re.implementation){a(J,G.sibling),de=f(G,re.children||[]),de.return=J,J=de;break e}else{a(J,G);break}else r(J,G);G=G.sibling}de=yd(re,J.mode,de),de.return=J,J=de}return w(J);case Ne:return Pe=re._init,re=Pe(re._payload),pn(J,G,re,de)}if(je(re))return Be(J,G,re,de);if(Re(re)){if(Pe=Re(re),typeof Pe!="function")throw Error(i(150));return re=Pe.call(re),st(J,G,re,de)}if(typeof re.then=="function")return pn(J,G,Ac(re),de);if(re.$$typeof===se)return pn(J,G,zc(J,re),de);Rc(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,G!==null&&G.tag===6?(a(J,G.sibling),de=f(G,re),de.return=J,J=de):(a(J,G),de=gd(re,J.mode,de),de.return=J,J=de),w(J)):a(J,G)}return function(J,G,re,de){try{nu=0;var Pe=pn(J,G,re,de);return rl=null,Pe}catch(He){if(He===eu)throw He;var pt=pi(29,He,null,J.mode);return pt.lanes=de,pt.return=J,pt}finally{}}}var vo=Qp(!0),Xp=Qp(!1),il=_t(null),Cc=_t(0);function Wp(t,r){t=Fs,Pt(Cc,t),Pt(il,r),Fs=t|r.baseLanes}function wf(){Pt(Cc,Fs),Pt(il,il.current)}function Sf(){Fs=Cc.current,xe(il),xe(Cc)}var fi=_t(null),rs=null;function ga(t){var r=t.alternate;Pt(Mn,Mn.current&1),Pt(fi,t),rs===null&&(r===null||il.current!==null||r.memoizedState!==null)&&(rs=t)}function $p(t){if(t.tag===22){if(Pt(Mn,Mn.current),Pt(fi,t),rs===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(rs=t)}}else ya()}function ya(){Pt(Mn,Mn.current),Pt(fi,fi.current)}function Vs(t){xe(fi),rs===t&&(rs=null),xe(Mn)}var Mn=_t(0);function Ic(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Db=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Ob=s.unstable_scheduleCallback,Nb=s.unstable_NormalPriority,Pn={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new Db,data:new Map,refCount:0}}function iu(t){t.refCount--,t.refCount===0&&Ob(Nb,function(){t.controller.abort()})}var su=null,Rf=0,sl=0,al=null;function kb(t,r){if(su===null){var a=su=[];Rf=0,sl=Nd(),al={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Rf++,r.then(Zp,Zp),r}function Zp(){if(--Rf===0&&su!==null){al!==null&&(al.status="fulfilled");var t=su;su=null,sl=0,al=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Vb(t,r){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){o.status="fulfilled",o.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var Jp=D.S;D.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&kb(t,r),Jp!==null&&Jp(t,r)};var _o=_t(null);function Cf(){var t=_o.current;return t!==null?t:Ht.pooledCache}function xc(t,r){r===null?Pt(_o,_o.current):Pt(_o,r.pool)}function eg(){var t=Cf();return t===null?null:{parent:Pn._currentValue,pool:t}}var va=0,ft=null,jt=null,Sn=null,Dc=!1,ol=!1,Eo=!1,Oc=0,au=0,ll=null,Mb=0;function yn(){throw Error(i(321))}function If(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!sr(t[a],r[a]))return!1;return!0}function xf(t,r,a,o,f,p){return va=p,ft=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,D.H=t===null||t.memoizedState===null?bo:_a,Eo=!1,p=a(o,f),Eo=!1,ol&&(p=ng(r,a,o,f)),tg(t),p}function tg(t){D.H=is;var r=jt!==null&&jt.next!==null;if(va=0,Sn=jt=ft=null,Dc=!1,au=0,ll=null,r)throw Error(i(300));t===null||qn||(t=t.dependencies,t!==null&&Bc(t)&&(qn=!0))}function ng(t,r,a,o){ft=t;var f=0;do{if(ol&&(ll=null),au=0,ol=!1,25<=f)throw Error(i(301));if(f+=1,Sn=jt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}D.H=To,p=r(a,o)}while(ol);return p}function Pb(){var t=D.H,r=t.useState()[0];return r=typeof r.then=="function"?ou(r):r,t=t.useState()[0],(jt!==null?jt.memoizedState:null)!==t&&(ft.flags|=1024),r}function Df(){var t=Oc!==0;return Oc=0,t}function Of(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Nf(t){if(Dc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Dc=!1}va=0,Sn=jt=ft=null,ol=!1,au=Oc=0,ll=null}function kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ft.memoizedState=Sn=t:Sn=Sn.next=t,Sn}function An(){if(jt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var r=Sn===null?ft.memoizedState:Sn.next;if(r!==null)Sn=r,jt=t;else{if(t===null)throw ft.alternate===null?Error(i(467)):Error(i(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Sn===null?ft.memoizedState=Sn=t:Sn=Sn.next=t}return Sn}var Nc;Nc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ou(t){var r=au;return au+=1,ll===null&&(ll=[]),t=Kp(ll,t,r),r=ft,(Sn===null?r.memoizedState:Sn.next)===null&&(r=r.alternate,D.H=r===null||r.memoizedState===null?bo:_a),t}function kc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ou(t);if(t.$$typeof===se)return or(t)}throw Error(i(438,String(t)))}function kf(t){var r=null,a=ft.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var o=ft.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(r={data:o.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Nc(),ft.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),o=0;o<t;o++)a[o]=ht;return r.index++,a}function Ms(t,r){return typeof r=="function"?r(t):r}function Vc(t){var r=An();return Vf(r,jt,t)}function Vf(t,r,a){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var f=t.baseQueue,p=o.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}r.baseQueue=f=p,o.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{r=f.next;var R=w=null,N=null,Q=r,he=!1;do{var ge=Q.lane&-536870913;if(ge!==Q.lane?(At&ge)===ge:(va&ge)===ge){var ie=Q.revertLane;if(ie===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ge===sl&&(he=!0);else if((va&ie)===ie){Q=Q.next,ie===sl&&(he=!0);continue}else ge={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},N===null?(R=N=ge,w=p):N=N.next=ge,ft.lanes|=ie,Ia|=ie;ge=Q.action,Eo&&a(p,ge),p=Q.hasEagerState?Q.eagerState:a(p,ge)}else ie={lane:ge,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},N===null?(R=N=ie,w=p):N=N.next=ie,ft.lanes|=ge,Ia|=ge;Q=Q.next}while(Q!==null&&Q!==r);if(N===null?w=p:N.next=R,!sr(p,t.memoizedState)&&(qn=!0,he&&(a=al,a!==null)))throw a;t.memoizedState=p,t.baseState=w,t.baseQueue=N,o.lastRenderedState=p}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Mf(t){var r=An(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var o=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do p=t(p,w.action),w=w.next;while(w!==f);sr(p,r.memoizedState)||(qn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,o]}function rg(t,r,a){var o=ft,f=An(),p=xt;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=r();var w=!sr((jt||f).memoizedState,a);if(w&&(f.memoizedState=a,qn=!0),f=f.queue,Uf(ag.bind(null,o,f,t),[t]),f.getSnapshot!==r||w||Sn!==null&&Sn.memoizedState.tag&1){if(o.flags|=2048,ul(9,sg.bind(null,o,f,a,r),{destroy:void 0},null),Ht===null)throw Error(i(349));p||(va&60)!==0||ig(o,r,a)}return a}function ig(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ft.updateQueue,r===null?(r=Nc(),ft.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function sg(t,r,a,o){r.value=a,r.getSnapshot=o,og(r)&&lg(t)}function ag(t,r,a){return a(function(){og(r)&&lg(t)})}function og(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!sr(t,a)}catch{return!0}}function lg(t){var r=Wt(t,2);r!==null&&Er(r,t,2)}function Pf(t){var r=kr();if(typeof t=="function"){var a=t;if(t=a(),Eo){fn(!0);try{a()}finally{fn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},r}function ug(t,r,a,o){return t.baseState=a,Vf(t,jt,typeof o=="function"?o:Ms)}function Lb(t,r,a,o,f){if(Lc(t))throw Error(i(485));if(t=r.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};D.T!==null?a(!0):p.isTransition=!1,o(p),a=r.pending,a===null?(p.next=r.pending=p,cg(r,p)):(p.next=a.next,r.pending=a.next=p)}}function cg(t,r){var a=r.action,o=r.payload,f=t.state;if(r.isTransition){var p=D.T,w={};D.T=w;try{var R=a(f,o),N=D.S;N!==null&&N(w,R),hg(t,r,R)}catch(Q){Lf(t,r,Q)}finally{D.T=p}}else try{p=a(f,o),hg(t,r,p)}catch(Q){Lf(t,r,Q)}}function hg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){fg(t,r,o)},function(o){return Lf(t,r,o)}):fg(t,r,a)}function fg(t,r,a){r.status="fulfilled",r.value=a,dg(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,cg(t,a)))}function Lf(t,r,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do r.status="rejected",r.reason=a,dg(r),r=r.next;while(r!==o)}t.action=null}function dg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function mg(t,r){return r}function pg(t,r){if(xt){var a=Ht.formState;if(a!==null){e:{var o=ft;if(xt){if(Wn){t:{for(var f=Wn,p=ns;f.nodeType!==8;){if(!p){f=null;break t}if(f=ji(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Wn=ji(f.nextSibling),o=f.data==="F!";break e}}yo(o)}o=!1}o&&(r=a[0])}}return a=kr(),a.memoizedState=a.baseState=r,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mg,lastRenderedState:r},a.queue=o,a=kg.bind(null,ft,o),o.dispatch=a,o=Pf(!1),p=Hf.bind(null,ft,!1,o.queue),o=kr(),f={state:r,dispatch:null,action:t,pending:null},o.queue=f,a=Lb.bind(null,ft,f,p,a),f.dispatch=a,o.memoizedState=t,[r,a,!1]}function gg(t){var r=An();return yg(r,jt,t)}function yg(t,r,a){r=Vf(t,r,mg)[0],t=Vc(Ms)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?ou(r):r;var o=An(),f=o.queue,p=f.dispatch;return a!==o.memoizedState&&(ft.flags|=2048,ul(9,Ub.bind(null,f,a),{destroy:void 0},null)),[r,p,t]}function Ub(t,r){t.action=r}function vg(t){var r=An(),a=jt;if(a!==null)return yg(r,a,t);An(),r=r.memoizedState,a=An();var o=a.queue.dispatch;return a.memoizedState=t,[r,o,!1]}function ul(t,r,a,o){return t={tag:t,create:r,inst:a,deps:o,next:null},r=ft.updateQueue,r===null&&(r=Nc(),ft.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,r.lastEffect=t),t}function _g(){return An().memoizedState}function Mc(t,r,a,o){var f=kr();ft.flags|=t,f.memoizedState=ul(1|r,a,{destroy:void 0},o===void 0?null:o)}function Pc(t,r,a,o){var f=An();o=o===void 0?null:o;var p=f.memoizedState.inst;jt!==null&&o!==null&&If(o,jt.memoizedState.deps)?f.memoizedState=ul(r,a,p,o):(ft.flags|=t,f.memoizedState=ul(1|r,a,p,o))}function Eg(t,r){Mc(8390656,8,t,r)}function Uf(t,r){Pc(2048,8,t,r)}function bg(t,r){return Pc(4,2,t,r)}function Tg(t,r){return Pc(4,4,t,r)}function wg(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Sg(t,r,a){a=a!=null?a.concat([t]):null,Pc(4,4,wg.bind(null,r,t),a)}function jf(){}function Ag(t,r){var a=An();r=r===void 0?null:r;var o=a.memoizedState;return r!==null&&If(r,o[1])?o[0]:(a.memoizedState=[t,r],t)}function Rg(t,r){var a=An();r=r===void 0?null:r;var o=a.memoizedState;if(r!==null&&If(r,o[1]))return o[0];if(o=t(),Eo){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[o,r],o}function Bf(t,r,a){return a===void 0||(va&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Iy(),ft.lanes|=t,Ia|=t,a)}function Cg(t,r,a,o){return sr(a,r)?a:il.current!==null?(t=Bf(t,a,o),sr(t,r)||(qn=!0),t):(va&42)===0?(qn=!0,t.memoizedState=a):(t=Iy(),ft.lanes|=t,Ia|=t,r)}function Ig(t,r,a,o,f){var p=Oe.p;Oe.p=p!==0&&8>p?p:8;var w=D.T,R={};D.T=R,Hf(t,!1,r,a);try{var N=f(),Q=D.S;if(Q!==null&&Q(R,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var he=Vb(N,o);lu(t,r,he,Gr(t))}else lu(t,r,o,Gr(t))}catch(ge){lu(t,r,{then:function(){},status:"rejected",reason:ge},Gr())}finally{Oe.p=p,D.T=w}}function jb(){}function zf(t,r,a,o){if(t.tag!==5)throw Error(i(476));var f=xg(t).queue;Ig(t,f,r,ot,a===null?jb:function(){return Dg(t),a(o)})}function xg(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:ot},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Dg(t){var r=xg(t).next.queue;lu(t,r,{},Gr())}function qf(){return or(Iu)}function Og(){return An().memoizedState}function Ng(){return An().memoizedState}function Bb(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Gr();t=Ta(a);var o=wa(r,t,a);o!==null&&(Er(o,r,a),hu(o,r,a)),r={cache:Af()},t.payload=r;return}r=r.return}}function zb(t,r,a){var o=Gr();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Lc(t)?Vg(r,a):(a=Tn(t,r,a,o),a!==null&&(Er(a,t,o),Mg(a,r,o)))}function kg(t,r,a){var o=Gr();lu(t,r,a,o)}function lu(t,r,a,o){var f={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lc(t))Vg(r,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var w=r.lastRenderedState,R=p(w,a);if(f.hasEagerState=!0,f.eagerState=R,sr(R,w))return it(t,r,f,0),Ht===null&&ar(),!1}catch{}finally{}if(a=Tn(t,r,f,o),a!==null)return Er(a,t,o),Mg(a,r,o),!0}return!1}function Hf(t,r,a,o){if(o={lane:2,revertLane:Nd(),action:o,hasEagerState:!1,eagerState:null,next:null},Lc(t)){if(r)throw Error(i(479))}else r=Tn(t,a,o,2),r!==null&&Er(r,t,2)}function Lc(t){var r=t.alternate;return t===ft||r!==null&&r===ft}function Vg(t,r){ol=Dc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Mg(t,r,a){if((a&4194176)!==0){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,to(t,a)}}var is={readContext:or,use:kc,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn};is.useCacheRefresh=yn,is.useMemoCache=yn,is.useHostTransitionStatus=yn,is.useFormState=yn,is.useActionState=yn,is.useOptimistic=yn;var bo={readContext:or,use:kc,useCallback:function(t,r){return kr().memoizedState=[t,r===void 0?null:r],t},useContext:or,useEffect:Eg,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Mc(4194308,4,wg.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Mc(4194308,4,t,r)},useInsertionEffect:function(t,r){Mc(4,2,t,r)},useMemo:function(t,r){var a=kr();r=r===void 0?null:r;var o=t();if(Eo){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[o,r],o},useReducer:function(t,r,a){var o=kr();if(a!==void 0){var f=a(r);if(Eo){fn(!0);try{a(r)}finally{fn(!1)}}}else f=r;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=zb.bind(null,ft,t),[o.memoizedState,t]},useRef:function(t){var r=kr();return t={current:t},r.memoizedState=t},useState:function(t){t=Pf(t);var r=t.queue,a=kg.bind(null,ft,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:jf,useDeferredValue:function(t,r){var a=kr();return Bf(a,t,r)},useTransition:function(){var t=Pf(!1);return t=Ig.bind(null,ft,t.queue,!0,!1),kr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var o=ft,f=kr();if(xt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),Ht===null)throw Error(i(349));(At&60)!==0||ig(o,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,Eg(ag.bind(null,o,p,t),[t]),o.flags|=2048,ul(9,sg.bind(null,o,p,a,r),{destroy:void 0},null),a},useId:function(){var t=kr(),r=Ht.identifierPrefix;if(xt){var a=ks,o=Ns;a=(o&~(1<<32-Zt(o)-1)).toString(32)+a,r=":"+r+"R"+a,a=Oc++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Mb++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},useCacheRefresh:function(){return kr().memoizedState=Bb.bind(null,ft)}};bo.useMemoCache=kf,bo.useHostTransitionStatus=qf,bo.useFormState=pg,bo.useActionState=pg,bo.useOptimistic=function(t){var r=kr();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Hf.bind(null,ft,!0,a),a.dispatch=r,[t,r]};var _a={readContext:or,use:kc,useCallback:Ag,useContext:or,useEffect:Uf,useImperativeHandle:Sg,useInsertionEffect:bg,useLayoutEffect:Tg,useMemo:Rg,useReducer:Vc,useRef:_g,useState:function(){return Vc(Ms)},useDebugValue:jf,useDeferredValue:function(t,r){var a=An();return Cg(a,jt.memoizedState,t,r)},useTransition:function(){var t=Vc(Ms)[0],r=An().memoizedState;return[typeof t=="boolean"?t:ou(t),r]},useSyncExternalStore:rg,useId:Og};_a.useCacheRefresh=Ng,_a.useMemoCache=kf,_a.useHostTransitionStatus=qf,_a.useFormState=gg,_a.useActionState=gg,_a.useOptimistic=function(t,r){var a=An();return ug(a,jt,t,r)};var To={readContext:or,use:kc,useCallback:Ag,useContext:or,useEffect:Uf,useImperativeHandle:Sg,useInsertionEffect:bg,useLayoutEffect:Tg,useMemo:Rg,useReducer:Mf,useRef:_g,useState:function(){return Mf(Ms)},useDebugValue:jf,useDeferredValue:function(t,r){var a=An();return jt===null?Bf(a,t,r):Cg(a,jt.memoizedState,t,r)},useTransition:function(){var t=Mf(Ms)[0],r=An().memoizedState;return[typeof t=="boolean"?t:ou(t),r]},useSyncExternalStore:rg,useId:Og};To.useCacheRefresh=Ng,To.useMemoCache=kf,To.useHostTransitionStatus=qf,To.useFormState=vg,To.useActionState=vg,To.useOptimistic=function(t,r){var a=An();return jt!==null?ug(a,jt,t,r):(a.baseState=t,[t,a.queue.dispatch])};function Ff(t,r,a,o){r=t.memoizedState,a=a(o,r),a=a==null?r:M({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={isMounted:function(t){return(t=t._reactInternals)?Ve(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var o=Gr(),f=Ta(o);f.payload=r,a!=null&&(f.callback=a),r=wa(t,f,o),r!==null&&(Er(r,t,o),hu(r,t,o))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var o=Gr(),f=Ta(o);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=wa(t,f,o),r!==null&&(Er(r,t,o),hu(r,t,o))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Gr(),o=Ta(a);o.tag=2,r!=null&&(o.callback=r),r=wa(t,o,a),r!==null&&(Er(r,t,a),hu(r,t,a))}};function Pg(t,r,a,o,f,p,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,p,w):r.prototype&&r.prototype.isPureReactComponent?!h(a,o)||!h(f,p):!0}function Lg(t,r,a,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,o),r.state!==t&&Kf.enqueueReplaceState(r,r.state,null)}function wo(t,r){var a=r;if("ref"in r){a={};for(var o in r)o!=="ref"&&(a[o]=r[o])}if(t=t.defaultProps){a===r&&(a=M({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var Uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ug(t){Uc(t)}function jg(t){console.error(t)}function Bg(t){Uc(t)}function jc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(o){setTimeout(function(){throw o})}}function zg(t,r,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gf(t,r,a){return a=Ta(a),a.tag=3,a.payload={element:null},a.callback=function(){jc(t,r)},a}function qg(t){return t=Ta(t),t.tag=3,t}function Hg(t,r,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=o.value;t.payload=function(){return f(p)},t.callback=function(){zg(r,a,o)}}var w=a.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){zg(r,a,o),typeof f!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})})}function qb(t,r,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(r=a.alternate,r!==null&&cu(r,a,f,!0),a=fi.current,a!==null){switch(a.tag){case 13:return rs===null?Cd():a.alternate===null&&mn===0&&(mn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===Tf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([o]):r.add(o),xd(t,o,f)),!1;case 22:return a.flags|=65536,o===Tf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([o]):a.add(o)),xd(t,o,f)),!1}throw Error(i(435,a.tag))}return xd(t,o,f),Cd(),!1}if(xt)return r=fi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,o!==bf&&(t=Error(i(422),{cause:o}),Jl(ui(t,a)))):(o!==bf&&(r=Error(i(423),{cause:o}),Jl(ui(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=ui(o,a),f=Gf(t.stateNode,o,f),od(t,f),mn!==4&&(mn=2)),!1;var p=Error(i(520),{cause:o});if(p=ui(p,a),_u===null?_u=[p]:_u.push(p),mn!==4&&(mn=2),r===null)return!0;o=ui(o,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Gf(a.stateNode,o,t),od(a,t),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(xa===null||!xa.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=qg(f),Hg(f,t,a,o),od(a,f),!1}a=a.return}while(a!==null);return!1}var Fg=Error(i(461)),qn=!1;function $n(t,r,a,o){r.child=t===null?Xp(r,null,a,o):vo(r,t.child,a,o)}function Kg(t,r,a,o,f){a=a.render;var p=r.ref;if("ref"in o){var w={};for(var R in o)R!=="ref"&&(w[R]=o[R])}else w=o;return Ao(r),o=xf(t,r,a,w,p,f),R=Df(),t!==null&&!qn?(Of(t,r,f),Ps(t,r,f)):(xt&&R&&_f(r),r.flags|=1,$n(t,r,o,f),r.child)}function Gg(t,r,a,o,f){if(t===null){var p=a.type;return typeof p=="function"&&!pd(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,Yg(t,r,p,o,f)):(t=Fc(a.type,null,o,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!td(t,f)){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:h,a(w,o)&&t.ref===r.ref)return Ps(t,r,f)}return r.flags|=1,t=Ca(p,o),t.ref=r.ref,t.return=r,r.child=t}function Yg(t,r,a,o,f){if(t!==null){var p=t.memoizedProps;if(h(p,o)&&t.ref===r.ref)if(qn=!1,r.pendingProps=o=p,td(t,f))(t.flags&131072)!==0&&(qn=!0);else return r.lanes=t.lanes,Ps(t,r,f)}return Yf(t,r,a,o,f)}function Qg(t,r,a){var o=r.pendingProps,f=o.children,p=(r.stateNode._pendingVisibility&2)!==0,w=t!==null?t.memoizedState:null;if(uu(t,r),o.mode==="hidden"||p){if((r.flags&128)!==0){if(o=w!==null?w.baseLanes|a:a,t!==null){for(f=r.child=t.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;r.childLanes=p&~o}else r.childLanes=0,r.child=null;return Xg(t,r,o,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&xc(r,w!==null?w.cachePool:null),w!==null?Wp(r,w):wf(),$p(r);else return r.lanes=r.childLanes=536870912,Xg(t,r,w!==null?w.baseLanes|a:a,a)}else w!==null?(xc(r,w.cachePool),Wp(r,w),ya(),r.memoizedState=null):(t!==null&&xc(r,null),wf(),ya());return $n(t,r,f,a),r.child}function Xg(t,r,a,o){var f=Cf();return f=f===null?null:{parent:Pn._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&xc(r,null),wf(),$p(r),t!==null&&cu(t,r,o,!0),null}function uu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=2097664)}}function Yf(t,r,a,o,f){return Ao(r),a=xf(t,r,a,o,void 0,f),o=Df(),t!==null&&!qn?(Of(t,r,f),Ps(t,r,f)):(xt&&o&&_f(r),r.flags|=1,$n(t,r,a,f),r.child)}function Wg(t,r,a,o,f,p){return Ao(r),r.updateQueue=null,a=ng(r,o,a,f),tg(t),o=Df(),t!==null&&!qn?(Of(t,r,p),Ps(t,r,p)):(xt&&o&&_f(r),r.flags|=1,$n(t,r,a,p),r.child)}function $g(t,r,a,o,f){if(Ao(r),r.stateNode===null){var p=Nr,w=a.contextType;typeof w=="object"&&w!==null&&(p=or(w)),p=new a(o,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Kf,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=o,p.state=r.memoizedState,p.refs={},sd(r),w=a.contextType,p.context=typeof w=="object"&&w!==null?or(w):Nr,p.state=r.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Ff(r,a,w,o),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Kf.enqueueReplaceState(p,p.state,null),du(r,o,p,f),fu(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),o=!0}else if(t===null){p=r.stateNode;var R=r.memoizedProps,N=wo(a,R);p.props=N;var Q=p.context,he=a.contextType;w=Nr,typeof he=="object"&&he!==null&&(w=or(he));var ge=a.getDerivedStateFromProps;he=typeof ge=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,he||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||Q!==w)&&Lg(r,p,o,w),ba=!1;var ie=r.memoizedState;p.state=ie,du(r,o,p,f),fu(),Q=r.memoizedState,R||ie!==Q||ba?(typeof ge=="function"&&(Ff(r,a,ge,o),Q=r.memoizedState),(N=ba||Pg(r,a,N,o,ie,Q,w))?(he||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=Q),p.props=o,p.state=Q,p.context=w,o=N):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{p=r.stateNode,ad(t,r),w=r.memoizedProps,he=wo(a,w),p.props=he,ge=r.pendingProps,ie=p.context,Q=a.contextType,N=Nr,typeof Q=="object"&&Q!==null&&(N=or(Q)),R=a.getDerivedStateFromProps,(Q=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ge||ie!==N)&&Lg(r,p,o,N),ba=!1,ie=r.memoizedState,p.state=ie,du(r,o,p,f),fu();var ue=r.memoizedState;w!==ge||ie!==ue||ba||t!==null&&t.dependencies!==null&&Bc(t.dependencies)?(typeof R=="function"&&(Ff(r,a,R,o),ue=r.memoizedState),(he=ba||Pg(r,a,he,o,ie,ue,N)||t!==null&&t.dependencies!==null&&Bc(t.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,ue,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,ue,N)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=ue),p.props=o,p.state=ue,p.context=N,o=he):(typeof p.componentDidUpdate!="function"||w===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),o=!1)}return p=o,uu(t,r),o=(r.flags&128)!==0,p||o?(p=r.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,t!==null&&o?(r.child=vo(r,t.child,null,f),r.child=vo(r,null,a,f)):$n(t,r,a,f),r.memoizedState=p.state,t=r.child):t=Ps(t,r,f),t}function Zg(t,r,a,o){return Zl(),r.flags|=256,$n(t,r,a,o),r.child}var Qf={dehydrated:null,treeContext:null,retryLane:0};function Xf(t){return{baseLanes:t,cachePool:eg()}}function Wf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=gi),t}function Jg(t,r,a){var o=r.pendingProps,f=!1,p=(r.flags&128)!==0,w;if((w=p)||(w=t!==null&&t.memoizedState===null?!1:(Mn.current&2)!==0),w&&(f=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,t===null){if(xt){if(f?ga(r):ya(),xt){var R=Wn,N;if(N=R){e:{for(N=R,R=ns;N.nodeType!==8;){if(!R){R=null;break e}if(N=ji(N.nextSibling),N===null){R=null;break e}}R=N}R!==null?(r.memoizedState={dehydrated:R,treeContext:po!==null?{id:Ns,overflow:ks}:null,retryLane:536870912},N=pi(18,null,null,0),N.stateNode=R,N.return=r,r.child=N,_r=r,Wn=null,N=!0):N=!1}N||yo(r)}if(R=r.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?r.lanes=16:r.lanes=536870912,null;Vs(r)}return R=o.children,o=o.fallback,f?(ya(),f=r.mode,R=Zf({mode:"hidden",children:R},f),o=Co(o,f,a,null),R.return=r,o.return=r,R.sibling=o,r.child=R,f=r.child,f.memoizedState=Xf(a),f.childLanes=Wf(t,w,a),r.memoizedState=Qf,o):(ga(r),$f(r,R))}if(N=t.memoizedState,N!==null&&(R=N.dehydrated,R!==null)){if(p)r.flags&256?(ga(r),r.flags&=-257,r=Jf(t,r,a)):r.memoizedState!==null?(ya(),r.child=t.child,r.flags|=128,r=null):(ya(),f=o.fallback,R=r.mode,o=Zf({mode:"visible",children:o.children},R),f=Co(f,R,a,null),f.flags|=2,o.return=r,f.return=r,o.sibling=f,r.child=o,vo(r,t.child,null,a),o=r.child,o.memoizedState=Xf(a),o.childLanes=Wf(t,w,a),r.memoizedState=Qf,r=f);else if(ga(r),R.data==="$!"){if(w=R.nextSibling&&R.nextSibling.dataset,w)var Q=w.dgst;w=Q,o=Error(i(419)),o.stack="",o.digest=w,Jl({value:o,source:null,stack:null}),r=Jf(t,r,a)}else if(qn||cu(t,r,a,!1),w=(a&t.childLanes)!==0,qn||w){if(w=Ht,w!==null){if(o=a&-a,(o&42)!==0)o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(o=(o&(w.suspendedLanes|a))!==0?0:o,o!==0&&o!==N.retryLane)throw N.retryLane=o,Wt(t,o),Er(w,t,o),Fg}R.data==="$?"||Cd(),r=Jf(t,r,a)}else R.data==="$?"?(r.flags|=128,r.child=t.child,r=rT.bind(null,t),R._reactRetry=r,r=null):(t=N.treeContext,Wn=ji(R.nextSibling),_r=r,xt=!0,Li=null,ns=!1,t!==null&&(ci[hi++]=Ns,ci[hi++]=ks,ci[hi++]=po,Ns=t.id,ks=t.overflow,po=r),r=$f(r,o.children),r.flags|=4096);return r}return f?(ya(),f=o.fallback,R=r.mode,N=t.child,Q=N.sibling,o=Ca(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&31457280,Q!==null?f=Ca(Q,f):(f=Co(f,R,a,null),f.flags|=2),f.return=r,o.return=r,o.sibling=f,r.child=o,o=f,f=r.child,R=t.child.memoizedState,R===null?R=Xf(a):(N=R.cachePool,N!==null?(Q=Pn._currentValue,N=N.parent!==Q?{parent:Q,pool:Q}:N):N=eg(),R={baseLanes:R.baseLanes|a,cachePool:N}),f.memoizedState=R,f.childLanes=Wf(t,w,a),r.memoizedState=Qf,o):(ga(r),a=t.child,t=a.sibling,a=Ca(a,{mode:"visible",children:o.children}),a.return=r,a.sibling=null,t!==null&&(w=r.deletions,w===null?(r.deletions=[t],r.flags|=16):w.push(t)),r.child=a,r.memoizedState=null,a)}function $f(t,r){return r=Zf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Zf(t,r){return Ay(t,r,0,null)}function Jf(t,r,a){return vo(r,t.child,null,a),t=$f(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ey(t,r,a){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),rd(t.return,r,a)}function ed(t,r,a,o,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=a,p.tailMode=f)}function ty(t,r,a){var o=r.pendingProps,f=o.revealOrder,p=o.tail;if($n(t,r,o.children,a),o=Mn.current,(o&2)!==0)o=o&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,a,r);else if(t.tag===19)ey(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(Pt(Mn,o),f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Ic(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),ed(r,!1,f,a,p);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Ic(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}ed(r,!0,a,null,p);break;case"together":ed(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ps(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ia|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(cu(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=Ca(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ca(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function td(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Bc(t)))}function Hb(t,r,a){switch(r.tag){case 3:br(r,r.stateNode.containerInfo),Ea(r,Pn,t.memoizedState.cache),Zl();break;case 27:case 5:gs(r);break;case 4:br(r,r.stateNode.containerInfo);break;case 10:Ea(r,r.type,r.memoizedProps.value);break;case 13:var o=r.memoizedState;if(o!==null)return o.dehydrated!==null?(ga(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Jg(t,r,a):(ga(r),t=Ps(t,r,a),t!==null?t.sibling:null);ga(r);break;case 19:var f=(t.flags&128)!==0;if(o=(a&r.childLanes)!==0,o||(cu(t,r,a,!1),o=(a&r.childLanes)!==0),f){if(o)return ty(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Pt(Mn,Mn.current),o)break;return null;case 22:case 23:return r.lanes=0,Qg(t,r,a);case 24:Ea(r,Pn,t.memoizedState.cache)}return Ps(t,r,a)}function ny(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)qn=!0;else{if(!td(t,a)&&(r.flags&128)===0)return qn=!1,Hb(t,r,a);qn=(t.flags&131072)!==0}else qn=!1,xt&&(r.flags&1048576)!==0&&Bp(r,wc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var o=r.elementType,f=o._init;if(o=f(o._payload),r.type=o,typeof o=="function")pd(o)?(t=wo(o,t),r.tag=1,r=$g(null,r,o,t,a)):(r.tag=0,r=Yf(null,r,o,t,a));else{if(o!=null){if(f=o.$$typeof,f===pe){r.tag=11,r=Kg(null,r,o,t,a);break e}else if(f===Le){r.tag=14,r=Gg(null,r,o,t,a);break e}}throw r=O(o)||o,Error(i(306,r,""))}}return r;case 0:return Yf(t,r,r.type,r.pendingProps,a);case 1:return o=r.type,f=wo(o,r.pendingProps),$g(t,r,o,f,a);case 3:e:{if(br(r,r.stateNode.containerInfo),t===null)throw Error(i(387));var p=r.pendingProps;f=r.memoizedState,o=f.element,ad(t,r),du(r,p,null,a);var w=r.memoizedState;if(p=w.cache,Ea(r,Pn,p),p!==f.cache&&id(r,[Pn],a,!0),fu(),p=w.element,f.isDehydrated)if(f={element:p,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Zg(t,r,p,a);break e}else if(p!==o){o=ui(Error(i(424)),r),Jl(o),r=Zg(t,r,p,a);break e}else for(Wn=ji(r.stateNode.containerInfo.firstChild),_r=r,xt=!0,Li=null,ns=!0,a=Xp(r,null,p,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zl(),p===o){r=Ps(t,r,a);break e}$n(t,r,p,a)}r=r.child}return r;case 26:return uu(t,r),t===null?(a=sv(r.type,null,r.pendingProps,null))?r.memoizedState=a:xt||(a=r.type,t=r.pendingProps,o=nh(jn.current).createElement(a),o[Ut]=r,o[tn]=t,Zn(o,a,t),Gt(o),r.stateNode=o):r.memoizedState=sv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return gs(r),t===null&&xt&&(o=r.stateNode=nv(r.type,r.pendingProps,jn.current),_r=r,ns=!0,Wn=ji(o.firstChild)),o=r.pendingProps.children,t!==null||xt?$n(t,r,o,a):r.child=vo(r,null,o,a),uu(t,r),r.child;case 5:return t===null&&xt&&((f=o=Wn)&&(o=_T(o,r.type,r.pendingProps,ns),o!==null?(r.stateNode=o,_r=r,Wn=ji(o.firstChild),ns=!1,f=!0):f=!1),f||yo(r)),gs(r),f=r.type,p=r.pendingProps,w=t!==null?t.memoizedProps:null,o=p.children,zd(f,p)?o=null:w!==null&&zd(f,w)&&(r.flags|=32),r.memoizedState!==null&&(f=xf(t,r,Pb,null,null,a),Iu._currentValue=f),uu(t,r),$n(t,r,o,a),r.child;case 6:return t===null&&xt&&((t=a=Wn)&&(a=ET(a,r.pendingProps,ns),a!==null?(r.stateNode=a,_r=r,Wn=null,t=!0):t=!1),t||yo(r)),null;case 13:return Jg(t,r,a);case 4:return br(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=vo(r,null,o,a):$n(t,r,o,a),r.child;case 11:return Kg(t,r,r.type,r.pendingProps,a);case 7:return $n(t,r,r.pendingProps,a),r.child;case 8:return $n(t,r,r.pendingProps.children,a),r.child;case 12:return $n(t,r,r.pendingProps.children,a),r.child;case 10:return o=r.pendingProps,Ea(r,r.type,o.value),$n(t,r,o.children,a),r.child;case 9:return f=r.type._context,o=r.pendingProps.children,Ao(r),f=or(f),o=o(f),r.flags|=1,$n(t,r,o,a),r.child;case 14:return Gg(t,r,r.type,r.pendingProps,a);case 15:return Yg(t,r,r.type,r.pendingProps,a);case 19:return ty(t,r,a);case 22:return Qg(t,r,a);case 24:return Ao(r),o=or(Pn),t===null?(f=Cf(),f===null&&(f=Ht,p=Af(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:o,cache:f},sd(r),Ea(r,Pn,f)):((t.lanes&a)!==0&&(ad(t,r),du(r,null,null,a),fu()),f=t.memoizedState,p=r.memoizedState,f.parent!==o?(f={parent:o,cache:o},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ea(r,Pn,o)):(o=p.cache,Ea(r,Pn,o),o!==f.cache&&id(r,[Pn],a,!0))),$n(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}var nd=_t(null),So=null,Ls=null;function Ea(t,r,a){Pt(nd,r._currentValue),r._currentValue=a}function Us(t){t._currentValue=nd.current,xe(nd)}function rd(t,r,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===a)break;t=t.return}}function id(t,r,a,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;e:for(;p!==null;){var R=p;p=f;for(var N=0;N<r.length;N++)if(R.context===r[N]){p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),rd(p.return,a,t),o||(w=null);break e}p=R.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(i(341));w.lanes|=a,p=w.alternate,p!==null&&(p.lanes|=a),rd(w,a,t),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===t){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function cu(t,r,a,o){t=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var R=f.type;sr(f.pendingProps.value,w.value)||(t!==null?t.push(R):t=[R])}}else if(f===ps.current){if(w=f.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Iu):t=[Iu])}f=f.return}t!==null&&id(r,t,a,o),r.flags|=262144}function Bc(t){for(t=t.firstContext;t!==null;){if(!sr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ao(t){So=t,Ls=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function or(t){return ry(So,t)}function zc(t,r){return So===null&&Ao(t),ry(t,r)}function ry(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ls===null){if(t===null)throw Error(i(308));Ls=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ls=Ls.next=r;return a}var ba=!1;function sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ta(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wa(t,r,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ln&2)!==0){var f=o.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),o.pending=r,r=wn(t),mo(t,null,a),r}return it(t,o,r,a),wn(t)}function hu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194176)!==0)){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,to(t,a)}}function od(t,r){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ld=!1;function fu(){if(ld){var t=al;if(t!==null)throw t}}function du(t,r,a,o){ld=!1;var f=t.updateQueue;ba=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var N=R,Q=N.next;N.next=null,w===null?p=Q:w.next=Q,w=N;var he=t.alternate;he!==null&&(he=he.updateQueue,R=he.lastBaseUpdate,R!==w&&(R===null?he.firstBaseUpdate=Q:R.next=Q,he.lastBaseUpdate=N))}if(p!==null){var ge=f.baseState;w=0,he=Q=N=null,R=p;do{var ie=R.lane&-536870913,ue=ie!==R.lane;if(ue?(At&ie)===ie:(o&ie)===ie){ie!==0&&ie===sl&&(ld=!0),he!==null&&(he=he.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Be=t,st=R;ie=r;var pn=a;switch(st.tag){case 1:if(Be=st.payload,typeof Be=="function"){ge=Be.call(pn,ge,ie);break e}ge=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=st.payload,ie=typeof Be=="function"?Be.call(pn,ge,ie):Be,ie==null)break e;ge=M({},ge,ie);break e;case 2:ba=!0}}ie=R.callback,ie!==null&&(t.flags|=64,ue&&(t.flags|=8192),ue=f.callbacks,ue===null?f.callbacks=[ie]:ue.push(ie))}else ue={lane:ie,tag:R.tag,payload:R.payload,callback:R.callback,next:null},he===null?(Q=he=ue,N=ge):he=he.next=ue,w|=ie;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;ue=R,R=ue.next,ue.next=null,f.lastBaseUpdate=ue,f.shared.pending=null}}while(!0);he===null&&(N=ge),f.baseState=N,f.firstBaseUpdate=Q,f.lastBaseUpdate=he,p===null&&(f.shared.lanes=0),Ia|=w,t.lanes=w,t.memoizedState=ge}}function iy(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function sy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)iy(a[t],r)}function mu(t,r){try{var a=r.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&t)===t){o=void 0;var p=a.create,w=a.inst;o=p(),w.destroy=o}a=a.next}while(a!==f)}}catch(R){zt(r,r.return,R)}}function Sa(t,r,a){try{var o=r.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var p=f.next;o=p;do{if((o.tag&t)===t){var w=o.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,f=r;var N=a;try{R()}catch(Q){zt(f,N,Q)}}}o=o.next}while(o!==p)}}catch(Q){zt(r,r.return,Q)}}function ay(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{sy(r,a)}catch(o){zt(t,t.return,o)}}}function oy(t,r,a){a.props=wo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){zt(t,r,o)}}function Ro(t,r){try{var a=t.ref;if(a!==null){var o=t.stateNode;switch(t.tag){case 26:case 27:case 5:var f=o;break;default:f=o}typeof a=="function"?t.refCleanup=a(f):a.current=f}}catch(p){zt(t,r,p)}}function Hr(t,r){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){zt(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){zt(t,r,f)}else a.current=null}function ly(t){var r=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){zt(t,t.return,f)}}function uy(t,r,a){try{var o=t.stateNode;mT(o,t.type,a,r),o[tn]=r}catch(f){zt(t,t.return,f)}}function cy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function ud(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cd(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=th));else if(o!==4&&o!==27&&(t=t.child,t!==null))for(cd(t,r,a),t=t.sibling;t!==null;)cd(t,r,a),t=t.sibling}function qc(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(o!==4&&o!==27&&(t=t.child,t!==null))for(qc(t,r,a),t=t.sibling;t!==null;)qc(t,r,a),t=t.sibling}var js=!1,dn=!1,hd=!1,hy=typeof WeakSet=="function"?WeakSet:Set,Hn=null,fy=!1;function Fb(t,r){if(t=t.containerInfo,jd=lh,t=S(t),A(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,R=-1,N=-1,Q=0,he=0,ge=t,ie=null;t:for(;;){for(var ue;ge!==a||f!==0&&ge.nodeType!==3||(R=w+f),ge!==p||o!==0&&ge.nodeType!==3||(N=w+o),ge.nodeType===3&&(w+=ge.nodeValue.length),(ue=ge.firstChild)!==null;)ie=ge,ge=ue;for(;;){if(ge===t)break t;if(ie===a&&++Q===f&&(R=w),ie===p&&++he===o&&(N=w),(ue=ge.nextSibling)!==null)break;ge=ie,ie=ge.parentNode}ge=ue}a=R===-1||N===-1?null:{start:R,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bd={focusedElem:t,selectionRange:a},lh=!1,Hn=r;Hn!==null;)if(r=Hn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Hn=t;else for(;Hn!==null;){switch(r=Hn,p=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,o=a.stateNode;try{var Be=wo(a.type,f,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Be,p),o.__reactInternalSnapshotBeforeUpdate=t}catch(st){zt(a,a.return,st)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Fd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Fd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Hn=t;break}Hn=r.return}return Be=fy,fy=!1,Be}function dy(t,r,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:zs(t,a),o&4&&mu(5,a);break;case 1:if(zs(t,a),o&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(R){zt(a,a.return,R)}else{var f=wo(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(R){zt(a,a.return,R)}}o&64&&ay(a),o&512&&Ro(a,a.return);break;case 3:if(zs(t,a),o&64&&(o=a.updateQueue,o!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{sy(o,t)}catch(R){zt(a,a.return,R)}}break;case 26:zs(t,a),o&512&&Ro(a,a.return);break;case 27:case 5:zs(t,a),r===null&&o&4&&ly(a),o&512&&Ro(a,a.return);break;case 12:zs(t,a);break;case 13:zs(t,a),o&4&&gy(t,a);break;case 22:if(f=a.memoizedState!==null||js,!f){r=r!==null&&r.memoizedState!==null||dn;var p=js,w=dn;js=f,(dn=r)&&!w?Aa(t,a,(a.subtreeFlags&8772)!==0):zs(t,a),js=p,dn=w}o&512&&(a.memoizedProps.mode==="manual"?Ro(a,a.return):Hr(a,a.return));break;default:zs(t,a)}}function my(t){var r=t.alternate;r!==null&&(t.alternate=null,my(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ri(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rn=null,Fr=!1;function Bs(t,r,a){for(a=a.child;a!==null;)py(t,r,a),a=a.sibling}function py(t,r,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(mr,a)}catch{}switch(a.tag){case 26:dn||Hr(a,r),Bs(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:dn||Hr(a,r);var o=Rn,f=Fr;for(Rn=a.stateNode,Bs(t,r,a),a=a.stateNode,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Ri(a),Rn=o,Fr=f;break;case 5:dn||Hr(a,r);case 6:f=Rn;var p=Fr;if(Rn=null,Bs(t,r,a),Rn=f,Fr=p,Rn!==null)if(Fr)try{t=Rn,o=a.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)}catch(w){zt(a,r,w)}else try{Rn.removeChild(a.stateNode)}catch(w){zt(a,r,w)}break;case 18:Rn!==null&&(Fr?(r=Rn,a=a.stateNode,r.nodeType===8?Hd(r.parentNode,a):r.nodeType===1&&Hd(r,a),Nu(r)):Hd(Rn,a.stateNode));break;case 4:o=Rn,f=Fr,Rn=a.stateNode.containerInfo,Fr=!0,Bs(t,r,a),Rn=o,Fr=f;break;case 0:case 11:case 14:case 15:dn||Sa(2,a,r),dn||Sa(4,a,r),Bs(t,r,a);break;case 1:dn||(Hr(a,r),o=a.stateNode,typeof o.componentWillUnmount=="function"&&oy(a,r,o)),Bs(t,r,a);break;case 21:Bs(t,r,a);break;case 22:dn||Hr(a,r),dn=(o=dn)||a.memoizedState!==null,Bs(t,r,a),dn=o;break;default:Bs(t,r,a)}}function gy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nu(t)}catch(a){zt(r,r.return,a)}}function Kb(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new hy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new hy),r;default:throw Error(i(435,t.tag))}}function fd(t,r){var a=Kb(t);r.forEach(function(o){var f=iT.bind(null,t,o);a.has(o)||(a.add(o),o.then(f,f))})}function di(t,r){var a=r.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],p=t,w=r,R=w;e:for(;R!==null;){switch(R.tag){case 27:case 5:Rn=R.stateNode,Fr=!1;break e;case 3:Rn=R.stateNode.containerInfo,Fr=!0;break e;case 4:Rn=R.stateNode.containerInfo,Fr=!0;break e}R=R.return}if(Rn===null)throw Error(i(160));py(p,w,f),Rn=null,Fr=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)yy(r,t),r=r.sibling}var Ui=null;function yy(t,r){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:di(r,t),mi(t),o&4&&(Sa(3,t,t.return),mu(3,t),Sa(5,t,t.return));break;case 1:di(r,t),mi(t),o&512&&(dn||a===null||Hr(a,a.return)),o&64&&js&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=Ui;if(di(r,t),mi(t),o&512&&(dn||a===null||Hr(a,a.return)),o&4){var p=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":p=f.getElementsByTagName("title")[0],(!p||p[pr]||p[Ut]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(o),f.head.insertBefore(p,f.querySelector("head > title"))),Zn(p,o,a),p[Ut]=t,Gt(p),o=p;break e;case"link":var w=lv("link","href",f).get(o+(a.href||""));if(w){for(var R=0;R<w.length;R++)if(p=w[R],p.getAttribute("href")===(a.href==null?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){w.splice(R,1);break t}}p=f.createElement(o),Zn(p,o,a),f.head.appendChild(p);break;case"meta":if(w=lv("meta","content",f).get(o+(a.content||""))){for(R=0;R<w.length;R++)if(p=w[R],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){w.splice(R,1);break t}}p=f.createElement(o),Zn(p,o,a),f.head.appendChild(p);break;default:throw Error(i(468,o))}p[Ut]=t,Gt(p),o=p}t.stateNode=o}else uv(f,t.type,t.stateNode);else t.stateNode=ov(f,o,t.memoizedProps);else p!==o?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,o===null?uv(f,t.type,t.stateNode):ov(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&uy(t,t.memoizedProps,a.memoizedProps)}break;case 27:if(o&4&&t.alternate===null){f=t.stateNode,p=t.memoizedProps;try{for(var N=f.firstChild;N;){var Q=N.nextSibling,he=N.nodeName;N[pr]||he==="HEAD"||he==="BODY"||he==="SCRIPT"||he==="STYLE"||he==="LINK"&&N.rel.toLowerCase()==="stylesheet"||f.removeChild(N),N=Q}for(var ge=t.type,ie=f.attributes;ie.length;)f.removeAttributeNode(ie[0]);Zn(f,ge,p),f[Ut]=t,f[tn]=p}catch(Be){zt(t,t.return,Be)}}case 5:if(di(r,t),mi(t),o&512&&(dn||a===null||Hr(a,a.return)),t.flags&32){f=t.stateNode;try{et(f,"")}catch(Be){zt(t,t.return,Be)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,uy(t,f,a!==null?a.memoizedProps:f)),o&1024&&(hd=!0);break;case 6:if(di(r,t),mi(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Be){zt(t,t.return,Be)}}break;case 3:if(sh=null,f=Ui,Ui=rh(r.containerInfo),di(r,t),Ui=f,mi(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Nu(r.containerInfo)}catch(Be){zt(t,t.return,Be)}hd&&(hd=!1,vy(t));break;case 4:o=Ui,Ui=rh(t.stateNode.containerInfo),di(r,t),mi(t),Ui=o;break;case 12:di(r,t),mi(t);break;case 13:di(r,t),mi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(bd=dr()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,fd(t,o)));break;case 22:if(o&512&&(dn||a===null||Hr(a,a.return)),N=t.memoizedState!==null,Q=a!==null&&a.memoizedState!==null,he=js,ge=dn,js=he||N,dn=ge||Q,di(r,t),dn=ge,js=he,mi(t),r=t.stateNode,r._current=t,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,o&8192&&(r._visibility=N?r._visibility&-2:r._visibility|1,N&&(r=js||dn,a===null||Q||r||cl(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(a=null,r=t;;){if(r.tag===5||r.tag===26||r.tag===27){if(a===null){Q=a=r;try{if(f=Q.stateNode,N)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{w=Q.stateNode,R=Q.memoizedProps.style;var ue=R!=null&&R.hasOwnProperty("display")?R.display:null;w.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Be){zt(Q,Q.return,Be)}}}else if(r.tag===6){if(a===null){Q=r;try{Q.stateNode.nodeValue=N?"":Q.memoizedProps}catch(Be){zt(Q,Q.return,Be)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,fd(t,a))));break;case 19:di(r,t),mi(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,fd(t,o)));break;case 21:break;default:di(r,t),mi(t)}}function mi(t){var r=t.flags;if(r&2){try{if(t.tag!==27){e:{for(var a=t.return;a!==null;){if(cy(a)){var o=a;break e}a=a.return}throw Error(i(160))}switch(o.tag){case 27:var f=o.stateNode,p=ud(t);qc(t,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(et(w,""),o.flags&=-33);var R=ud(t);qc(t,R,w);break;case 3:case 4:var N=o.stateNode.containerInfo,Q=ud(t);cd(t,Q,N);break;default:throw Error(i(161))}}}catch(he){zt(t,t.return,he)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function vy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;vy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function zs(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)dy(t,r.alternate,r),r=r.sibling}function cl(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Sa(4,r,r.return),cl(r);break;case 1:Hr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&oy(r,r.return,a),cl(r);break;case 26:case 27:case 5:Hr(r,r.return),cl(r);break;case 22:Hr(r,r.return),r.memoizedState===null&&cl(r);break;default:cl(r)}t=t.sibling}}function Aa(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var o=r.alternate,f=t,p=r,w=p.flags;switch(p.tag){case 0:case 11:case 15:Aa(f,p,a),mu(4,p);break;case 1:if(Aa(f,p,a),o=p,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){zt(o,o.return,Q)}if(o=p,f=o.updateQueue,f!==null){var R=o.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)iy(N[f],R)}catch(Q){zt(o,o.return,Q)}}a&&w&64&&ay(p),Ro(p,p.return);break;case 26:case 27:case 5:Aa(f,p,a),a&&o===null&&w&4&&ly(p),Ro(p,p.return);break;case 12:Aa(f,p,a);break;case 13:Aa(f,p,a),a&&w&4&&gy(f,p);break;case 22:p.memoizedState===null&&Aa(f,p,a),Ro(p,p.return);break;default:Aa(f,p,a)}r=r.sibling}}function dd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&iu(a))}function md(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&iu(t))}function Ra(t,r,a,o){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_y(t,r,a,o),r=r.sibling}function _y(t,r,a,o){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ra(t,r,a,o),f&2048&&mu(9,r);break;case 3:Ra(t,r,a,o),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&iu(t)));break;case 12:if(f&2048){Ra(t,r,a,o),t=r.stateNode;try{var p=r.memoizedProps,w=p.id,R=p.onPostCommit;typeof R=="function"&&R(w,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){zt(r,r.return,N)}}else Ra(t,r,a,o);break;case 23:break;case 22:p=r.stateNode,r.memoizedState!==null?p._visibility&4?Ra(t,r,a,o):pu(t,r):p._visibility&4?Ra(t,r,a,o):(p._visibility|=4,hl(t,r,a,o,(r.subtreeFlags&10256)!==0)),f&2048&&dd(r.alternate,r);break;case 24:Ra(t,r,a,o),f&2048&&md(r.alternate,r);break;default:Ra(t,r,a,o)}}function hl(t,r,a,o,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=t,w=r,R=a,N=o,Q=w.flags;switch(w.tag){case 0:case 11:case 15:hl(p,w,R,N,f),mu(8,w);break;case 23:break;case 22:var he=w.stateNode;w.memoizedState!==null?he._visibility&4?hl(p,w,R,N,f):pu(p,w):(he._visibility|=4,hl(p,w,R,N,f)),f&&Q&2048&&dd(w.alternate,w);break;case 24:hl(p,w,R,N,f),f&&Q&2048&&md(w.alternate,w);break;default:hl(p,w,R,N,f)}r=r.sibling}}function pu(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,o=r,f=o.flags;switch(o.tag){case 22:pu(a,o),f&2048&&dd(o.alternate,o);break;case 24:pu(a,o),f&2048&&md(o.alternate,o);break;default:pu(a,o)}r=r.sibling}}var gu=8192;function fl(t){if(t.subtreeFlags&gu)for(t=t.child;t!==null;)Ey(t),t=t.sibling}function Ey(t){switch(t.tag){case 26:fl(t),t.flags&gu&&t.memoizedState!==null&&kT(Ui,t.memoizedState,t.memoizedProps);break;case 5:fl(t);break;case 3:case 4:var r=Ui;Ui=rh(t.stateNode.containerInfo),fl(t),Ui=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=gu,gu=16777216,fl(t),gu=r):fl(t));break;default:fl(t)}}function by(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function yu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var o=r[a];Hn=o,wy(o,t)}by(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ty(t),t=t.sibling}function Ty(t){switch(t.tag){case 0:case 11:case 15:yu(t),t.flags&2048&&Sa(9,t,t.return);break;case 3:yu(t);break;case 12:yu(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&4&&(t.return===null||t.return.tag!==13)?(r._visibility&=-5,Hc(t)):yu(t);break;default:yu(t)}}function Hc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var o=r[a];Hn=o,wy(o,t)}by(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Sa(8,r,r.return),Hc(r);break;case 22:a=r.stateNode,a._visibility&4&&(a._visibility&=-5,Hc(r));break;default:Hc(r)}t=t.sibling}}function wy(t,r){for(;Hn!==null;){var a=Hn;switch(a.tag){case 0:case 11:case 15:Sa(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:iu(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Hn=o;else e:for(a=t;Hn!==null;){o=Hn;var f=o.sibling,p=o.return;if(my(o),o===a){Hn=null;break e}if(f!==null){f.return=p,Hn=f;break e}Hn=p}}}function Gb(t,r,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(t,r,a,o){return new Gb(t,r,a,o)}function pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ca(t,r){var a=t.alternate;return a===null?(a=pi(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&31457280,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Sy(t,r){t.flags&=31457282;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Fc(t,r,a,o,f,p){var w=0;if(o=t,typeof t=="function")pd(t)&&(w=1);else if(typeof t=="string")w=OT(t,a,Yn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case E:return Co(a.children,f,p,r);case b:w=8,f|=24;break;case I:return t=pi(12,a,r,f|2),t.elementType=I,t.lanes=p,t;case Se:return t=pi(13,a,r,f),t.elementType=Se,t.lanes=p,t;case Ee:return t=pi(19,a,r,f),t.elementType=Ee,t.lanes=p,t;case Ye:return Ay(a,f,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V:case se:w=10;break e;case U:w=9;break e;case pe:w=11;break e;case Le:w=14;break e;case Ne:w=16,o=null;break e}w=29,a=Error(i(130,t===null?"null":typeof t,"")),o=null}return r=pi(w,a,r,f),r.elementType=t,r.type=o,r.lanes=p,r}function Co(t,r,a,o){return t=pi(7,t,o,r),t.lanes=a,t}function Ay(t,r,a,o){t=pi(22,t,o,r),t.elementType=Ye,t.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var p=f._current;if(p===null)throw Error(i(456));if((f._pendingVisibility&2)===0){var w=Wt(p,2);w!==null&&(f._pendingVisibility|=2,Er(w,p,2))}},attach:function(){var p=f._current;if(p===null)throw Error(i(456));if((f._pendingVisibility&2)!==0){var w=Wt(p,2);w!==null&&(f._pendingVisibility&=-3,Er(w,p,2))}}};return t.stateNode=f,t}function gd(t,r,a){return t=pi(6,t,null,r),t.lanes=a,t}function yd(t,r,a){return r=pi(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function qs(t){t.flags|=4}function Ry(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!cv(r)){if(r=fi.current,r!==null&&((At&4194176)===At?rs!==null:(At&62914560)!==At&&(At&536870912)===0||r!==rs))throw tu=Tf,Hp;t.flags|=8192}}function Kc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?nr():536870912,t.lanes|=r,ml|=r)}function vu(t,r){if(!xt)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function on(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&31457280,o|=f.flags&31457280,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=a,r}function Yb(t,r,a){var o=r.pendingProps;switch(Ef(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(r),null;case 1:return on(r),null;case 3:return a=r.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Us(Pn),Qr(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&($l(r)?qs(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Li!==null&&(Ad(Li),Li=null))),on(r),null;case 26:return a=r.memoizedState,t===null?(qs(r),a!==null?(on(r),Ry(r,a)):(on(r),r.flags&=-16777217)):a?a!==t.memoizedState?(qs(r),on(r),Ry(r,a)):(on(r),r.flags&=-16777217):(t.memoizedProps!==o&&qs(r),on(r),r.flags&=-16777217),null;case 27:ys(r),a=jn.current;var f=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==o&&qs(r);else{if(!o){if(r.stateNode===null)throw Error(i(166));return on(r),null}t=Yn.current,$l(r)?zp(r):(t=nv(f,o,a),r.stateNode=t,qs(r))}return on(r),null;case 5:if(ys(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==o&&qs(r);else{if(!o){if(r.stateNode===null)throw Error(i(166));return on(r),null}if(t=Yn.current,$l(r))zp(r);else{switch(f=nh(jn.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?f.createElement(a,{is:o.is}):f.createElement(a)}}t[Ut]=r,t[tn]=o;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=t;e:switch(Zn(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&qs(r)}}return on(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==o&&qs(r);else{if(typeof o!="string"&&r.stateNode===null)throw Error(i(166));if(t=jn.current,$l(r)){if(t=r.stateNode,a=r.memoizedProps,o=null,f=_r,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Ut]=r,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Wy(t.nodeValue,a)),t||yo(r)}else t=nh(t).createTextNode(o),t[Ut]=r,r.stateNode=t}return on(r),null;case 13:if(o=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=$l(r),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ut]=r}else Zl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;on(r),f=!1}else Li!==null&&(Ad(Li),Li=null),f=!0;if(!f)return r.flags&256?(Vs(r),r):(Vs(r),null)}if(Vs(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=r.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool);var p=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==f&&(o.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Kc(r,r.updateQueue),on(r),null;case 4:return Qr(),t===null&&Pd(r.stateNode.containerInfo),on(r),null;case 10:return Us(r.type),on(r),null;case 19:if(xe(Mn),f=r.memoizedState,f===null)return on(r),null;if(o=(r.flags&128)!==0,p=f.rendering,p===null)if(o)vu(f,!1);else{if(mn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(p=Ic(t),p!==null){for(r.flags|=128,vu(f,!1),t=p.updateQueue,r.updateQueue=t,Kc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Sy(a,t),a=a.sibling;return Pt(Mn,Mn.current&1|2),r.child}t=t.sibling}f.tail!==null&&dr()>Gc&&(r.flags|=128,o=!0,vu(f,!1),r.lanes=4194304)}else{if(!o)if(t=Ic(p),t!==null){if(r.flags|=128,o=!0,t=t.updateQueue,r.updateQueue=t,Kc(r,t),vu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!xt)return on(r),null}else 2*dr()-f.renderingStartTime>Gc&&a!==536870912&&(r.flags|=128,o=!0,vu(f,!1),r.lanes=4194304);f.isBackwards?(p.sibling=r.child,r.child=p):(t=f.last,t!==null?t.sibling=p:r.child=p,f.last=p)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=dr(),r.sibling=null,t=Mn.current,Pt(Mn,o?t&1|2:t&1),r):(on(r),null);case 22:case 23:return Vs(r),Sf(),o=r.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(r.flags|=8192):o&&(r.flags|=8192),o?(a&536870912)!==0&&(r.flags&128)===0&&(on(r),r.subtreeFlags&6&&(r.flags|=8192)):on(r),a=r.updateQueue,a!==null&&Kc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048),t!==null&&xe(_o),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Us(Pn),on(r),null;case 25:return null}throw Error(i(156,r.tag))}function Qb(t,r){switch(Ef(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Us(Pn),Qr(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return ys(r),null;case 13:if(Vs(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Zl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return xe(Mn),null;case 4:return Qr(),null;case 10:return Us(r.type),null;case 22:case 23:return Vs(r),Sf(),t!==null&&xe(_o),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Us(Pn),null;case 25:return null;default:return null}}function Cy(t,r){switch(Ef(r),r.tag){case 3:Us(Pn),Qr();break;case 26:case 27:case 5:ys(r);break;case 4:Qr();break;case 13:Vs(r);break;case 19:xe(Mn);break;case 10:Us(r.type);break;case 22:case 23:Vs(r),Sf(),t!==null&&xe(_o);break;case 24:Us(Pn)}}var Xb={getCacheForType:function(t){var r=or(Pn),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},Wb=typeof WeakMap=="function"?WeakMap:Map,ln=0,Ht=null,vt=null,At=0,Ft=0,Kr=null,Hs=!1,dl=!1,vd=!1,Fs=0,mn=0,Ia=0,Io=0,_d=0,gi=0,ml=0,_u=null,ss=null,Ed=!1,bd=0,Gc=1/0,Yc=null,xa=null,Qc=!1,xo=null,Eu=0,Td=0,wd=null,bu=0,Sd=null;function Gr(){if((ln&2)!==0&&At!==0)return At&-At;if(D.T!==null){var t=sl;return t!==0?t:Nd()}return Ur()}function Iy(){gi===0&&(gi=(At&536870912)===0||xt?Si():536870912);var t=fi.current;return t!==null&&(t.flags|=32),gi}function Er(t,r,a){(t===Ht&&Ft===2||t.cancelPendingCommit!==null)&&(pl(t,0),Ks(t,At,gi,!1)),Wr(t,a),((ln&2)===0||t!==Ht)&&(t===Ht&&((ln&2)===0&&(Io|=a),mn===4&&Ks(t,At,gi,!1)),as(t))}function xy(t,r,a){if((ln&6)!==0)throw Error(i(327));var o=!a&&(r&60)===0&&(r&t.expiredLanes)===0||Lr(t,r),f=o?Jb(t,r):Id(t,r,!0),p=o;do{if(f===0){dl&&!o&&Ks(t,r,0,!1);break}else if(f===6)Ks(t,r,0,!Hs);else{if(a=t.current.alternate,p&&!$b(a)){f=Id(t,r,!1),p=!1;continue}if(f===2){if(p=r,t.errorRecoveryDisabledLanes&p)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var R=t;f=_u;var N=R.current.memoizedState.isDehydrated;if(N&&(pl(R,w).flags|=256),w=Id(R,w,!1),w!==2){if(vd&&!N){R.errorRecoveryDisabledLanes|=p,Io|=p,f=4;break e}p=ss,ss=f,p!==null&&Ad(p)}f=w}if(p=!1,f!==2)continue}}if(f===1){pl(t,0),Ks(t,r,0,!0);break}e:{switch(o=t,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194176)===r){Ks(o,r,gi,!Hs);break e}break;case 2:ss=null;break;case 3:case 5:break;default:throw Error(i(329))}if(o.finishedWork=a,o.finishedLanes=r,(r&62914560)===r&&(p=bd+300-dr(),10<p)){if(Ks(o,r,gi,!Hs),wr(o,0)!==0)break e;o.timeoutHandle=Jy(Dy.bind(null,o,a,ss,Yc,Ed,r,gi,Io,ml,Hs,2,-0,0),p);break e}Dy(o,a,ss,Yc,Ed,r,gi,Io,ml,Hs,0,-0,0)}}break}while(!0);as(t)}function Ad(t){ss===null?ss=t:ss.push.apply(ss,t)}function Dy(t,r,a,o,f,p,w,R,N,Q,he,ge,ie){var ue=r.subtreeFlags;if((ue&8192||(ue&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:NT},Ey(r),r=VT(),r!==null)){t.cancelPendingCommit=r(Ly.bind(null,t,a,o,f,w,R,N,1,ge,ie)),Ks(t,p,w,!Q);return}Ly(t,a,o,f,w,R,N,he,ge,ie)}function $b(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],p=f.getSnapshot;f=f.value;try{if(!sr(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ks(t,r,a,o){r&=~_d,r&=~Io,t.suspendedLanes|=r,t.pingedLanes&=~r,o&&(t.warmLanes|=r),o=t.expirationTimes;for(var f=r;0<f;){var p=31-Zt(f),w=1<<p;o[p]=-1,f&=~w}a!==0&&en(t,a,r)}function Xc(){return(ln&6)===0?(Tu(0),!1):!0}function Rd(){if(vt!==null){if(Ft===0)var t=vt.return;else t=vt,Ls=So=null,Nf(t),rl=null,nu=0,t=vt;for(;t!==null;)Cy(t.alternate,t),t=t.return;vt=null}}function pl(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,gT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Rd(),Ht=t,vt=a=Ca(t.current,null),At=r,Ft=0,Kr=null,Hs=!1,dl=Lr(t,r),vd=!1,ml=gi=_d=Io=Ia=mn=0,ss=_u=null,Ed=!1,(r&8)!==0&&(r|=r&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=r;0<o;){var f=31-Zt(o),p=1<<f;r|=t[f],o&=~p}return Fs=r,ar(),a}function Oy(t,r){ft=null,D.H=is,r===eu?(r=Gp(),Ft=3):r===Hp?(r=Gp(),Ft=4):Ft=r===Fg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Kr=r,vt===null&&(mn=1,jc(t,ui(r,t.current)))}function Ny(){var t=D.H;return D.H=is,t===null?is:t}function ky(){var t=D.A;return D.A=Xb,t}function Cd(){mn=4,Hs||(At&4194176)!==At&&fi.current!==null||(dl=!0),(Ia&134217727)===0&&(Io&134217727)===0||Ht===null||Ks(Ht,At,gi,!1)}function Id(t,r,a){var o=ln;ln|=2;var f=Ny(),p=ky();(Ht!==t||At!==r)&&(Yc=null,pl(t,r)),r=!1;var w=mn;e:do try{if(Ft!==0&&vt!==null){var R=vt,N=Kr;switch(Ft){case 8:Rd(),w=6;break e;case 3:case 2:case 6:fi.current===null&&(r=!0);var Q=Ft;if(Ft=0,Kr=null,gl(t,R,N,Q),a&&dl){w=0;break e}break;default:Q=Ft,Ft=0,Kr=null,gl(t,R,N,Q)}}Zb(),w=mn;break}catch(he){Oy(t,he)}while(!0);return r&&t.shellSuspendCounter++,Ls=So=null,ln=o,D.H=f,D.A=p,vt===null&&(Ht=null,At=0,ar()),w}function Zb(){for(;vt!==null;)Vy(vt)}function Jb(t,r){var a=ln;ln|=2;var o=Ny(),f=ky();Ht!==t||At!==r?(Yc=null,Gc=dr()+500,pl(t,r)):dl=Lr(t,r);e:do try{if(Ft!==0&&vt!==null){r=vt;var p=Kr;t:switch(Ft){case 1:Ft=0,Kr=null,gl(t,r,p,1);break;case 2:if(Fp(p)){Ft=0,Kr=null,My(r);break}r=function(){Ft===2&&Ht===t&&(Ft=7),as(t)},p.then(r,r);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Fp(p)?(Ft=0,Kr=null,My(r)):(Ft=0,Kr=null,gl(t,r,p,7));break;case 5:var w=null;switch(vt.tag){case 26:w=vt.memoizedState;case 5:case 27:var R=vt;if(!w||cv(w)){Ft=0,Kr=null;var N=R.sibling;if(N!==null)vt=N;else{var Q=R.return;Q!==null?(vt=Q,Wc(Q)):vt=null}break t}}Ft=0,Kr=null,gl(t,r,p,5);break;case 6:Ft=0,Kr=null,gl(t,r,p,6);break;case 8:Rd(),mn=6;break e;default:throw Error(i(462))}}eT();break}catch(he){Oy(t,he)}while(!0);return Ls=So=null,D.H=o,D.A=f,ln=a,vt!==null?0:(Ht=null,At=0,ar(),mn)}function eT(){for(;vt!==null&&!Xo();)Vy(vt)}function Vy(t){var r=ny(t.alternate,t,Fs);t.memoizedProps=t.pendingProps,r===null?Wc(t):vt=r}function My(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Wg(a,r,r.pendingProps,r.type,void 0,At);break;case 11:r=Wg(a,r,r.pendingProps,r.type.render,r.ref,At);break;case 5:Nf(r);default:Cy(a,r),r=vt=Sy(r,Fs),r=ny(a,r,Fs)}t.memoizedProps=t.pendingProps,r===null?Wc(t):vt=r}function gl(t,r,a,o){Ls=So=null,Nf(r),rl=null,nu=0;var f=r.return;try{if(qb(t,f,r,a,At)){mn=1,jc(t,ui(a,t.current)),vt=null;return}}catch(p){if(f!==null)throw vt=f,p;mn=1,jc(t,ui(a,t.current)),vt=null;return}r.flags&32768?(xt||o===1?t=!0:dl||(At&536870912)!==0?t=!1:(Hs=t=!0,(o===2||o===3||o===6)&&(o=fi.current,o!==null&&o.tag===13&&(o.flags|=16384))),Py(r,t)):Wc(r)}function Wc(t){var r=t;do{if((r.flags&32768)!==0){Py(r,Hs);return}t=r.return;var a=Yb(r.alternate,r,Fs);if(a!==null){vt=a;return}if(r=r.sibling,r!==null){vt=r;return}vt=r=t}while(r!==null);mn===0&&(mn=5)}function Py(t,r){do{var a=Qb(t.alternate,t);if(a!==null){a.flags&=32767,vt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){vt=t;return}vt=t=a}while(t!==null);mn=6,vt=null}function Ly(t,r,a,o,f,p,w,R,N,Q){var he=D.T,ge=Oe.p;try{Oe.p=2,D.T=null,tT(t,r,a,o,ge,f,p,w,R,N,Q)}finally{D.T=he,Oe.p=ge}}function tT(t,r,a,o,f,p,w,R){do yl();while(xo!==null);if((ln&6)!==0)throw Error(i(327));var N=t.finishedWork;if(o=t.finishedLanes,N===null)return null;if(t.finishedWork=null,t.finishedLanes=0,N===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var Q=N.lanes|N.childLanes;if(Q|=lt,Ot(t,o,Q,p,w,R),t===Ht&&(vt=Ht=null,At=0),(N.subtreeFlags&10256)===0&&(N.flags&10256)===0||Qc||(Qc=!0,Td=Q,wd=a,sT(Tr,function(){return yl(),null})),a=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||a?(a=D.T,D.T=null,p=Oe.p,Oe.p=2,w=ln,ln|=4,Fb(t,N),yy(N,t),x(Bd,t.containerInfo),lh=!!jd,Bd=jd=null,t.current=N,dy(t,N.alternate,N),Fi(),ln=w,Oe.p=p,D.T=a):t.current=N,Qc?(Qc=!1,xo=t,Eu=o):Uy(t,Q),Q=t.pendingLanes,Q===0&&(xa=null),Me(N.stateNode),as(t),r!==null)for(f=t.onRecoverableError,N=0;N<r.length;N++)Q=r[N],f(Q.value,{componentStack:Q.stack});return(Eu&3)!==0&&yl(),Q=t.pendingLanes,(o&4194218)!==0&&(Q&42)!==0?t===Sd?bu++:(bu=0,Sd=t):bu=0,Tu(0),null}function Uy(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,iu(r)))}function yl(){if(xo!==null){var t=xo,r=Td;Td=0;var a=Ai(Eu),o=D.T,f=Oe.p;try{if(Oe.p=32>a?32:a,D.T=null,xo===null)var p=!1;else{a=wd,wd=null;var w=xo,R=Eu;if(xo=null,Eu=0,(ln&6)!==0)throw Error(i(331));var N=ln;if(ln|=4,Ty(w.current),_y(w,w.current,R,a),ln=N,Tu(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(mr,w)}catch{}p=!0}return p}finally{Oe.p=f,D.T=o,Uy(t,r)}}return!1}function jy(t,r,a){r=ui(a,r),r=Gf(t.stateNode,r,2),t=wa(t,r,2),t!==null&&(Wr(t,2),as(t))}function zt(t,r,a){if(t.tag===3)jy(t,t,a);else for(;r!==null;){if(r.tag===3){jy(r,t,a);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(xa===null||!xa.has(o))){t=ui(a,t),a=qg(2),o=wa(r,a,2),o!==null&&(Hg(a,o,r,t),Wr(o,2),as(o));break}}r=r.return}}function xd(t,r,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Wb;var f=new Set;o.set(r,f)}else f=o.get(r),f===void 0&&(f=new Set,o.set(r,f));f.has(a)||(vd=!0,f.add(a),t=nT.bind(null,t,r,a),r.then(t,t))}function nT(t,r,a){var o=t.pingCache;o!==null&&o.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ht===t&&(At&a)===a&&(mn===4||mn===3&&(At&62914560)===At&&300>dr()-bd?(ln&2)===0&&pl(t,0):_d|=a,ml===At&&(ml=0)),as(t)}function By(t,r){r===0&&(r=nr()),t=Wt(t,r),t!==null&&(Wr(t,r),as(t))}function rT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),By(t,a)}function iT(t,r){var a=0;switch(t.tag){case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(r),By(t,a)}function sT(t,r){return sn(t,r)}var $c=null,vl=null,Dd=!1,Zc=!1,Od=!1,Do=0;function as(t){t!==vl&&t.next===null&&(vl===null?$c=vl=t:vl=vl.next=t),Zc=!0,Dd||(Dd=!0,oT(aT))}function Tu(t,r){if(!Od&&Zc){Od=!0;do for(var a=!1,o=$c;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var p=0;else{var w=o.suspendedLanes,R=o.pingedLanes;p=(1<<31-Zt(42|t)+1)-1,p&=f&~(w&~R),p=p&201326677?p&201326677|1:p?p|2:0}p!==0&&(a=!0,Hy(o,p))}else p=At,p=wr(o,o===Ht?p:0),(p&3)===0||Lr(o,p)||(a=!0,Hy(o,p));o=o.next}while(a);Od=!1}}function aT(){Zc=Dd=!1;var t=0;Do!==0&&(pT()&&(t=Do),Do=0);for(var r=dr(),a=null,o=$c;o!==null;){var f=o.next,p=zy(o,r);p===0?(o.next=null,a===null?$c=f:a.next=f,f===null&&(vl=a)):(a=o,(t!==0||(p&3)!==0)&&(Zc=!0)),o=f}Tu(t)}function zy(t,r){for(var a=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var w=31-Zt(p),R=1<<w,N=f[w];N===-1?((R&a)===0||(R&o)!==0)&&(f[w]=Ql(R,r)):N<=r&&(t.expiredLanes|=R),p&=~R}if(r=Ht,a=At,a=wr(t,t===r?a:0),o=t.callbackNode,a===0||t===r&&Ft===2||t.cancelPendingCommit!==null)return o!==null&&o!==null&&xn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Lr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(o!==null&&xn(o),Ai(a)){case 2:case 8:a=vs;break;case 32:a=Tr;break;case 268435456:a=_s;break;default:a=Tr}return o=qy.bind(null,t),a=sn(a,o),t.callbackPriority=r,t.callbackNode=a,r}return o!==null&&o!==null&&xn(o),t.callbackPriority=2,t.callbackNode=null,2}function qy(t,r){var a=t.callbackNode;if(yl()&&t.callbackNode!==a)return null;var o=At;return o=wr(t,t===Ht?o:0),o===0?null:(xy(t,o,r),zy(t,dr()),t.callbackNode!=null&&t.callbackNode===a?qy.bind(null,t):null)}function Hy(t,r){if(yl())return null;xy(t,r,!0)}function oT(t){yT(function(){(ln&6)!==0?sn(bi,t):t()})}function Nd(){return Do===0&&(Do=Si()),Do}function Fy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yr(""+t)}function Ky(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function lT(t,r,a,o,f){if(r==="submit"&&a&&a.stateNode===f){var p=Fy((f[tn]||null).action),w=o.submitter;w&&(r=(r=w[tn]||null)?Fy(r.formAction):w.getAttribute("formAction"),r!==null&&(p=r,w=null));var R=new Ss("action","action",null,o,f);t.push({event:R,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Do!==0){var N=w?Ky(f,w):new FormData(f);zf(a,{pending:!0,data:N,method:f.method,action:p},null,N)}}else typeof p=="function"&&(R.preventDefault(),N=w?Ky(f,w):new FormData(f),zf(a,{pending:!0,data:N,method:f.method,action:p},p,N))},currentTarget:f}]})}}for(var kd=0;kd<_e.length;kd++){var Vd=_e[kd],uT=Vd.toLowerCase(),cT=Vd[0].toUpperCase()+Vd.slice(1);Fe(uT,"on"+cT)}Fe(oe,"onAnimationEnd"),Fe(le,"onAnimationIteration"),Fe(ce,"onAnimationStart"),Fe("dblclick","onDoubleClick"),Fe("focusin","onFocus"),Fe("focusout","onBlur"),Fe(be,"onTransitionRun"),Fe(Ce,"onTransitionStart"),Fe(Te,"onTransitionCancel"),Fe(Ae,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function Gy(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],f=o.event;o=o.listeners;e:{var p=void 0;if(r)for(var w=o.length-1;0<=w;w--){var R=o[w],N=R.instance,Q=R.currentTarget;if(R=R.listener,N!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=Q;try{p(f)}catch(he){Uc(he)}f.currentTarget=null,p=N}else for(w=0;w<o.length;w++){if(R=o[w],N=R.instance,Q=R.currentTarget,R=R.listener,N!==p&&f.isPropagationStopped())break e;p=R,f.currentTarget=Q;try{p(f)}catch(he){Uc(he)}f.currentTarget=null,p=N}}}}function wt(t,r){var a=r[$r];a===void 0&&(a=r[$r]=new Set);var o=t+"__bubble";a.has(o)||(Yy(r,t,2,!1),a.add(o))}function Md(t,r,a){var o=0;r&&(o|=4),Yy(a,t,o,r)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function Pd(t){if(!t[Jc]){t[Jc]=!0,Ci.forEach(function(a){a!=="selectionchange"&&(hT.has(a)||Md(a,!1,t),Md(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Jc]||(r[Jc]=!0,Md("selectionchange",!1,r))}}function Yy(t,r,a,o){switch(gv(r)){case 2:var f=LT;break;case 8:f=UT;break;default:f=Xd}a=f.bind(null,r,a,t),f=void 0,!Ni||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Ld(t,r,a,o,f){var p=o;if((r&1)===0&&(r&2)===0&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var R=o.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(w===4)for(w=o.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;R!==null;){if(w=Sr(R),w===null)return;if(N=w.tag,N===5||N===6||N===26||N===27){o=p=w;continue e}R=R.parentNode}}o=o.return}ws(function(){var Q=p,he=la(a),ge=[];e:{var ie=Ie.get(t);if(ie!==void 0){var ue=Ss,Be=t;switch(t){case"keypress":if(ki(a)===0)break e;case"keydown":case"keyup":ue=Pi;break;case"focusin":Be="focus",ue=Mi;break;case"focusout":Be="blur",ue=Mi;break;case"beforeblur":case"afterblur":ue=Mi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Vi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=lo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=ai;break;case oe:case le:case ce:ue=ua;break;case Ae:ue=y;break;case"scroll":case"scrollend":ue=ni;break;case"wheel":ue=C;break;case"copy":case"cut":case"paste":ue=Is;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ha;break;case"toggle":case"beforetoggle":ue=ae}var st=(r&4)!==0,pn=!st&&(t==="scroll"||t==="scrollend"),J=st?ie!==null?ie+"Capture":null:ie;st=[];for(var G=Q,re;G!==null;){var de=G;if(re=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||re===null||J===null||(de=En(G,J),de!=null&&st.push(Su(G,de,re))),pn)break;G=G.return}0<st.length&&(ie=new ue(ie,Be,null,a,he),ge.push({event:ie,listeners:st}))}}if((r&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",ie&&a!==oa&&(Be=a.relatedTarget||a.fromElement)&&(Sr(Be)||Be[On]))break e;if((ue||ie)&&(ie=he.window===he?he:(ie=he.ownerDocument)?ie.defaultView||ie.parentWindow:window,ue?(Be=a.relatedTarget||a.toElement,ue=Q,Be=Be?Sr(Be):null,Be!==null&&(pn=Ve(Be),st=Be.tag,Be!==pn||st!==5&&st!==27&&st!==6)&&(Be=null)):(ue=null,Be=Q),ue!==Be)){if(st=Vi,de="onMouseLeave",J="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(st=ha,de="onPointerLeave",J="onPointerEnter",G="pointer"),pn=ue==null?ie:Nn(ue),re=Be==null?ie:Nn(Be),ie=new st(de,G+"leave",ue,a,he),ie.target=pn,ie.relatedTarget=re,de=null,Sr(he)===Q&&(st=new st(J,G+"enter",Be,a,he),st.target=re,st.relatedTarget=pn,de=st),pn=de,ue&&Be)t:{for(st=ue,J=Be,G=0,re=st;re;re=_l(re))G++;for(re=0,de=J;de;de=_l(de))re++;for(;0<G-re;)st=_l(st),G--;for(;0<re-G;)J=_l(J),re--;for(;G--;){if(st===J||J!==null&&st===J.alternate)break t;st=_l(st),J=_l(J)}st=null}else st=null;ue!==null&&Qy(ge,ie,ue,st,!1),Be!==null&&pn!==null&&Qy(ge,pn,Be,st,!0)}}e:{if(ie=Q?Nn(Q):window,ue=ie.nodeName&&ie.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ie.type==="file")var Pe=fo;else if($o(ie))if(li)Pe=pa;else{Pe=Os;var pt=bc}else ue=ie.nodeName,!ue||ue.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?Q&&_n(Q.elementType)&&(Pe=fo):Pe=Wl;if(Pe&&(Pe=Pe(t,Q))){Xl(ge,Pe,a,he);break e}pt&&pt(t,ie,Q),t==="focusout"&&Q&&ie.type==="number"&&Q.memoizedProps.value!=null&&gr(ie,"number",ie.value)}switch(pt=Q?Nn(Q):window,t){case"focusin":($o(pt)||pt.contentEditable==="true")&&(F=pt,q=Q,W=null);break;case"focusout":W=q=F=null;break;case"mousedown":B=!0;break;case"contextmenu":case"mouseup":case"dragend":B=!1,Z(ge,a,he);break;case"selectionchange":if(L)break;case"keydown":case"keyup":Z(ge,a,he)}var He;if(Je)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Or?Dr(t,a)&&(We="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(We="onCompositionStart");We&&(Qt&&a.locale!=="ko"&&(Or||We!=="onCompositionStart"?We==="onCompositionEnd"&&Or&&(He=Wi()):(ir=he,Lt="value"in ir?ir.value:ir.textContent,Or=!0)),pt=eh(Q,We),0<pt.length&&(We=new xs(We,t,null,a,he),ge.push({event:We,listeners:pt}),He?We.data=He:(He=qr(a),He!==null&&(We.data=He)))),(He=Nt?fa(t,a):yf(t,a))&&(We=eh(Q,"onBeforeInput"),0<We.length&&(pt=new xs("onBeforeInput","beforeinput",null,a,he),ge.push({event:pt,listeners:We}),pt.data=He)),lT(ge,t,Q,a,he)}Gy(ge,r)})}function Su(t,r,a){return{instance:t,listener:r,currentTarget:a}}function eh(t,r){for(var a=r+"Capture",o=[];t!==null;){var f=t,p=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=En(t,a),f!=null&&o.unshift(Su(t,f,p)),f=En(t,r),f!=null&&o.push(Su(t,f,p))),t=t.return}return o}function _l(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Qy(t,r,a,o,f){for(var p=r._reactName,w=[];a!==null&&a!==o;){var R=a,N=R.alternate,Q=R.stateNode;if(R=R.tag,N!==null&&N===o)break;R!==5&&R!==26&&R!==27||Q===null||(N=Q,f?(Q=En(a,p),Q!=null&&w.unshift(Su(a,Q,N))):f||(Q=En(a,p),Q!=null&&w.push(Su(a,Q,N)))),a=a.return}w.length!==0&&t.push({event:r,listeners:w})}var fT=/\r\n?/g,dT=/\u0000|\uFFFD/g;function Xy(t){return(typeof t=="string"?t:""+t).replace(fT,`
`).replace(dT,"")}function Wy(t,r){return r=Xy(r),Xy(t)===r}function th(){}function Bt(t,r,a,o,f,p){switch(a){case"children":typeof o=="string"?r==="body"||r==="textarea"&&o===""||et(t,o):(typeof o=="number"||typeof o=="bigint")&&r!=="body"&&et(t,""+o);break;case"className":rr(t,"class",o);break;case"tabIndex":rr(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(t,a,o);break;case"style":so(t,o,p);break;case"data":if(r!=="object"){rr(t,"data",o);break}case"src":case"href":if(o===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=yr(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&Bt(t,r,"name",f.name,f,null),Bt(t,r,"formEncType",f.formEncType,f,null),Bt(t,r,"formMethod",f.formMethod,f,null),Bt(t,r,"formTarget",f.formTarget,f,null)):(Bt(t,r,"encType",f.encType,f,null),Bt(t,r,"method",f.method,f,null),Bt(t,r,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=yr(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=th);break;case"onScroll":o!=null&&wt("scroll",t);break;case"onScrollEnd":o!=null&&wt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=yr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":wt("beforetoggle",t),wt("toggle",t),Ts(t,"popover",o);break;case"xlinkActuate":an(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":an(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":an(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":an(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":an(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":an(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":an(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":an(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":an(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ts(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oi.get(a)||a,Ts(t,a,o))}}function Ud(t,r,a,o,f,p){switch(a){case"style":so(t,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof o=="string"?et(t,o):(typeof o=="number"||typeof o=="bigint")&&et(t,""+o);break;case"onScroll":o!=null&&wt("scroll",t);break;case"onScrollEnd":o!=null&&wt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=t[tn]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(r,p,f),typeof o=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,o,f);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ts(t,a,o)}}}function Zn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",t),wt("load",t);var o=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var w=a[p];if(w!=null)switch(p){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(t,r,p,w,a,null)}}f&&Bt(t,r,"srcSet",a.srcSet,a,null),o&&Bt(t,r,"src",a.src,a,null);return;case"input":wt("invalid",t);var R=p=w=f=null,N=null,Q=null;for(o in a)if(a.hasOwnProperty(o)){var he=a[o];if(he!=null)switch(o){case"name":f=he;break;case"type":w=he;break;case"checked":N=he;break;case"defaultChecked":Q=he;break;case"value":p=he;break;case"defaultValue":R=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,r));break;default:Bt(t,r,o,he,a,null)}}no(t,p,R,N,Q,w,f,!1),yt(t);return;case"select":wt("invalid",t),o=w=p=null;for(f in a)if(a.hasOwnProperty(f)&&(R=a[f],R!=null))switch(f){case"value":p=R;break;case"defaultValue":w=R;break;case"multiple":o=R;default:Bt(t,r,f,R,a,null)}r=p,a=w,t.multiple=!!o,r!=null?Ir(t,!!o,r,!1):a!=null&&Ir(t,!!o,a,!0);return;case"textarea":wt("invalid",t),p=f=o=null;for(w in a)if(a.hasOwnProperty(w)&&(R=a[w],R!=null))switch(w){case"value":o=R;break;case"defaultValue":f=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Bt(t,r,w,R,a,null)}Qi(t,o,f,p),yt(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Bt(t,r,N,o,a,null)}return;case"dialog":wt("cancel",t),wt("close",t);break;case"iframe":case"object":wt("load",t);break;case"video":case"audio":for(o=0;o<wu.length;o++)wt(wu[o],t);break;case"image":wt("error",t),wt("load",t);break;case"details":wt("toggle",t);break;case"embed":case"source":case"link":wt("error",t),wt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(o=a[Q],o!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(t,r,Q,o,a,null)}return;default:if(_n(r)){for(he in a)a.hasOwnProperty(he)&&(o=a[he],o!==void 0&&Ud(t,r,he,o,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(o=a[R],o!=null&&Bt(t,r,R,o,a,null))}function mT(t,r,a,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,R=null,N=null,Q=null,he=null;for(ue in a){var ge=a[ue];if(a.hasOwnProperty(ue)&&ge!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":N=ge;default:o.hasOwnProperty(ue)||Bt(t,r,ue,null,o,ge)}}for(var ie in o){var ue=o[ie];if(ge=a[ie],o.hasOwnProperty(ie)&&(ue!=null||ge!=null))switch(ie){case"type":p=ue;break;case"name":f=ue;break;case"checked":Q=ue;break;case"defaultChecked":he=ue;break;case"value":w=ue;break;case"defaultValue":R=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,r));break;default:ue!==ge&&Bt(t,r,ie,ue,o,ge)}}Di(t,w,R,N,Q,he,p,f);return;case"select":ue=w=R=ie=null;for(p in a)if(N=a[p],a.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":ue=N;default:o.hasOwnProperty(p)||Bt(t,r,p,null,o,N)}for(f in o)if(p=o[f],N=a[f],o.hasOwnProperty(f)&&(p!=null||N!=null))switch(f){case"value":ie=p;break;case"defaultValue":R=p;break;case"multiple":w=p;default:p!==N&&Bt(t,r,f,p,o,N)}r=R,a=w,o=ue,ie!=null?Ir(t,!!a,ie,!1):!!o!=!!a&&(r!=null?Ir(t,!!a,r,!0):Ir(t,!!a,a?[]:"",!1));return;case"textarea":ue=ie=null;for(R in a)if(f=a[R],a.hasOwnProperty(R)&&f!=null&&!o.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Bt(t,r,R,null,o,f)}for(w in o)if(f=o[w],p=a[w],o.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":ie=f;break;case"defaultValue":ue=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&Bt(t,r,w,f,o,p)}ro(t,ie,ue);return;case"option":for(var Be in a)if(ie=a[Be],a.hasOwnProperty(Be)&&ie!=null&&!o.hasOwnProperty(Be))switch(Be){case"selected":t.selected=!1;break;default:Bt(t,r,Be,null,o,ie)}for(N in o)if(ie=o[N],ue=a[N],o.hasOwnProperty(N)&&ie!==ue&&(ie!=null||ue!=null))switch(N){case"selected":t.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:Bt(t,r,N,ie,o,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in a)ie=a[st],a.hasOwnProperty(st)&&ie!=null&&!o.hasOwnProperty(st)&&Bt(t,r,st,null,o,ie);for(Q in o)if(ie=o[Q],ue=a[Q],o.hasOwnProperty(Q)&&ie!==ue&&(ie!=null||ue!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:Bt(t,r,Q,ie,o,ue)}return;default:if(_n(r)){for(var pn in a)ie=a[pn],a.hasOwnProperty(pn)&&ie!==void 0&&!o.hasOwnProperty(pn)&&Ud(t,r,pn,void 0,o,ie);for(he in o)ie=o[he],ue=a[he],!o.hasOwnProperty(he)||ie===ue||ie===void 0&&ue===void 0||Ud(t,r,he,ie,o,ue);return}}for(var J in a)ie=a[J],a.hasOwnProperty(J)&&ie!=null&&!o.hasOwnProperty(J)&&Bt(t,r,J,null,o,ie);for(ge in o)ie=o[ge],ue=a[ge],!o.hasOwnProperty(ge)||ie===ue||ie==null&&ue==null||Bt(t,r,ge,ie,o,ue)}var jd=null,Bd=null;function nh(t){return t.nodeType===9?t:t.ownerDocument}function $y(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zy(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function zd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var qd=null;function pT(){var t=window.event;return t&&t.type==="popstate"?t===qd?!1:(qd=t,!0):(qd=null,!1)}var Jy=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(t){return ev.resolve(null).then(t).catch(vT)}:Jy;function vT(t){setTimeout(function(){throw t})}function Hd(t,r){var a=r,o=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(o===0){t.removeChild(f),Nu(r);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=f}while(a);Nu(r)}function Fd(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Fd(a),Ri(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function _T(t,r,a,o){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[pr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=ji(t.nextSibling),t===null)break}return null}function ET(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ji(t.nextSibling),t===null))return null;return t}function ji(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}function tv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function nv(t,r,a){switch(r=nh(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}var yi=new Map,rv=new Set;function rh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Gs=Oe.d;Oe.d={f:bT,r:TT,D:wT,C:ST,L:AT,m:RT,X:IT,S:CT,M:xT};function bT(){var t=Gs.f(),r=Xc();return t||r}function TT(t){var r=It(t);r!==null&&r.tag===5&&r.type==="form"?Dg(r):Gs.r(t)}var El=typeof document>"u"?null:document;function iv(t,r,a){var o=El;if(o&&typeof r=="string"&&r){var f=Qn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),rv.has(f)||(rv.add(f),t={rel:t,crossOrigin:a,href:r},o.querySelector(f)===null&&(r=o.createElement("link"),Zn(r,"link",t),Gt(r),o.head.appendChild(r)))}}function wT(t){Gs.D(t),iv("dns-prefetch",t,null)}function ST(t,r){Gs.C(t,r),iv("preconnect",t,r)}function AT(t,r,a){Gs.L(t,r,a);var o=El;if(o&&t&&r){var f='link[rel="preload"][as="'+Qn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Qn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Qn(a.imageSizes)+'"]')):f+='[href="'+Qn(t)+'"]';var p=f;switch(r){case"style":p=bl(t);break;case"script":p=Tl(t)}yi.has(p)||(t=M({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),yi.set(p,t),o.querySelector(f)!==null||r==="style"&&o.querySelector(Au(p))||r==="script"&&o.querySelector(Ru(p))||(r=o.createElement("link"),Zn(r,"link",t),Gt(r),o.head.appendChild(r)))}}function RT(t,r){Gs.m(t,r);var a=El;if(a&&t){var o=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Qn(o)+'"][href="'+Qn(t)+'"]',p=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Tl(t)}if(!yi.has(p)&&(t=M({rel:"modulepreload",href:t},r),yi.set(p,t),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ru(p)))return}o=a.createElement("link"),Zn(o,"link",t),Gt(o),a.head.appendChild(o)}}}function CT(t,r,a){Gs.S(t,r,a);var o=El;if(o&&t){var f=nn(o).hoistableStyles,p=bl(t);r=r||"default";var w=f.get(p);if(!w){var R={loading:0,preload:null};if(w=o.querySelector(Au(p)))R.loading=5;else{t=M({rel:"stylesheet",href:t,"data-precedence":r},a),(a=yi.get(p))&&Kd(t,a);var N=w=o.createElement("link");Gt(N),Zn(N,"link",t),N._p=new Promise(function(Q,he){N.onload=Q,N.onerror=he}),N.addEventListener("load",function(){R.loading|=1}),N.addEventListener("error",function(){R.loading|=2}),R.loading|=4,ih(w,r,o)}w={type:"stylesheet",instance:w,count:1,state:R},f.set(p,w)}}}function IT(t,r){Gs.X(t,r);var a=El;if(a&&t){var o=nn(a).hoistableScripts,f=Tl(t),p=o.get(f);p||(p=a.querySelector(Ru(f)),p||(t=M({src:t,async:!0},r),(r=yi.get(f))&&Gd(t,r),p=a.createElement("script"),Gt(p),Zn(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(f,p))}}function xT(t,r){Gs.M(t,r);var a=El;if(a&&t){var o=nn(a).hoistableScripts,f=Tl(t),p=o.get(f);p||(p=a.querySelector(Ru(f)),p||(t=M({src:t,async:!0,type:"module"},r),(r=yi.get(f))&&Gd(t,r),p=a.createElement("script"),Gt(p),Zn(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(f,p))}}function sv(t,r,a,o){var f=(f=jn.current)?rh(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=bl(a.href),a=nn(f).hoistableStyles,o=a.get(r),o||(o={type:"style",instance:null,count:0,state:null},a.set(r,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=bl(a.href);var p=nn(f).hoistableStyles,w=p.get(t);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,w),(p=f.querySelector(Au(t)))&&!p._p&&(w.instance=p,w.state.loading=5),yi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yi.set(t,a),p||DT(f,t,a,w.state))),r&&o===null)throw Error(i(528,""));return w}if(r&&o!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Tl(a),a=nn(f).hoistableScripts,o=a.get(r),o||(o={type:"script",instance:null,count:0,state:null},a.set(r,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function bl(t){return'href="'+Qn(t)+'"'}function Au(t){return'link[rel="stylesheet"]['+t+"]"}function av(t){return M({},t,{"data-precedence":t.precedence,precedence:null})}function DT(t,r,a,o){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=t.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),Zn(r,"link",a),Gt(r),t.head.appendChild(r))}function Tl(t){return'[src="'+Qn(t)+'"]'}function Ru(t){return"script[async]"+t}function ov(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var o=t.querySelector('style[data-href~="'+Qn(a.href)+'"]');if(o)return r.instance=o,Gt(o),o;var f=M({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Gt(o),Zn(o,"style",f),ih(o,a.precedence,t),r.instance=o;case"stylesheet":f=bl(a.href);var p=t.querySelector(Au(f));if(p)return r.state.loading|=4,r.instance=p,Gt(p),p;o=av(a),(f=yi.get(f))&&Kd(o,f),p=(t.ownerDocument||t).createElement("link"),Gt(p);var w=p;return w._p=new Promise(function(R,N){w.onload=R,w.onerror=N}),Zn(p,"link",o),r.state.loading|=4,ih(p,a.precedence,t),r.instance=p;case"script":return p=Tl(a.src),(f=t.querySelector(Ru(p)))?(r.instance=f,Gt(f),f):(o=a,(f=yi.get(p))&&(o=M({},a),Gd(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Gt(f),Zn(f,"link",o),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(o=r.instance,r.state.loading|=4,ih(o,a.precedence,t));return r.instance}function ih(t,r,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,p=f,w=0;w<o.length;w++){var R=o[w];if(R.dataset.precedence===r)p=R;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Kd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Gd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var sh=null;function lv(t,r,a){if(sh===null){var o=new Map,f=sh=new Map;f.set(a,o)}else f=sh,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var p=a[f];if(!(p[pr]||p[Ut]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(r)||"";w=t+w;var R=o.get(w);R?R.push(p):o.set(w,[p])}}return o}function uv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function OT(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function cv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Cu=null;function NT(){}function kT(t,r,a){if(Cu===null)throw Error(i(475));var o=Cu;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=bl(a.href),p=t.querySelector(Au(f));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=ah.bind(o),t.then(o,o)),r.state.loading|=4,r.instance=p,Gt(p);return}p=t.ownerDocument||t,a=av(a),(f=yi.get(f))&&Kd(a,f),p=p.createElement("link"),Gt(p);var w=p;w._p=new Promise(function(R,N){w.onload=R,w.onerror=N}),Zn(p,"link",a),r.instance=p}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(o.count++,r=ah.bind(o),t.addEventListener("load",r),t.addEventListener("error",r))}}function VT(){if(Cu===null)throw Error(i(475));var t=Cu;return t.stylesheets&&t.count===0&&Yd(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Yd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)Yd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var oh=null;function Yd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,oh=new Map,r.forEach(MT,t),oh=null,ah.call(t))}function MT(t,r){if(!(r.state.loading&4)){var a=oh.get(t);if(a)var o=a.get(null);else{a=new Map,oh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(a.set(w.dataset.precedence,w),o=w)}o&&a.set(null,o)}f=r.instance,w=f.getAttribute("data-precedence"),p=a.get(w)||o,p===o&&a.set(null,f),a.set(w,f),this.count++,o=ah.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Iu={$$typeof:se,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function PT(t,r,a,o,f,p,w,R){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.hiddenUpdates=bs(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function hv(t,r,a,o,f,p,w,R,N,Q,he,ge){return t=new PT(t,r,a,w,R,N,Q,ge),r=1,p===!0&&(r|=24),p=pi(3,null,null,r),t.current=p,p.stateNode=t,r=Af(),r.refCount++,t.pooledCache=r,r.refCount++,p.memoizedState={element:o,isDehydrated:a,cache:r},sd(p),t}function fv(t){return t?(t=Nr,t):Nr}function dv(t,r,a,o,f,p){f=fv(f),o.context===null?o.context=f:o.pendingContext=f,o=Ta(r),o.payload={element:a},p=p===void 0?null:p,p!==null&&(o.callback=p),a=wa(t,o,r),a!==null&&(Er(a,t,r),hu(a,t,r))}function mv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Qd(t,r){mv(t,r),(t=t.alternate)&&mv(t,r)}function pv(t){if(t.tag===13){var r=Wt(t,67108864);r!==null&&Er(r,t,67108864),Qd(t,67108864)}}var lh=!0;function LT(t,r,a,o){var f=D.T;D.T=null;var p=Oe.p;try{Oe.p=2,Xd(t,r,a,o)}finally{Oe.p=p,D.T=f}}function UT(t,r,a,o){var f=D.T;D.T=null;var p=Oe.p;try{Oe.p=8,Xd(t,r,a,o)}finally{Oe.p=p,D.T=f}}function Xd(t,r,a,o){if(lh){var f=Wd(o);if(f===null)Ld(t,r,o,uh,a),yv(t,o);else if(BT(f,t,r,a,o))o.stopPropagation();else if(yv(t,o),r&4&&-1<jT.indexOf(t)){for(;f!==null;){var p=It(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Pr(p.pendingLanes);if(w!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var N=1<<31-Zt(w);R.entanglements[1]|=N,w&=~N}as(p),(ln&6)===0&&(Gc=dr()+500,Tu(0))}}break;case 13:R=Wt(p,2),R!==null&&Er(R,p,2),Xc(),Qd(p,2)}if(p=Wd(o),p===null&&Ld(t,r,o,uh,a),p===f)break;f=p}f!==null&&o.stopPropagation()}else Ld(t,r,o,null,a)}}function Wd(t){return t=la(t),$d(t)}var uh=null;function $d(t){if(uh=null,t=Sr(t),t!==null){var r=Ve(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=dt(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return uh=t,null}function gv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mr()){case bi:return 2;case vs:return 8;case Tr:case eo:return 32;case _s:return 268435456;default:return 32}default:return 32}}var Zd=!1,Da=null,Oa=null,Na=null,xu=new Map,Du=new Map,ka=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yv(t,r){switch(t){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":xu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(r.pointerId)}}function Ou(t,r,a,o,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:a,eventSystemFlags:o,nativeEvent:p,targetContainers:[f]},r!==null&&(r=It(r),r!==null&&pv(r)),t):(t.eventSystemFlags|=o,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function BT(t,r,a,o,f){switch(r){case"focusin":return Da=Ou(Da,t,r,a,o,f),!0;case"dragenter":return Oa=Ou(Oa,t,r,a,o,f),!0;case"mouseover":return Na=Ou(Na,t,r,a,o,f),!0;case"pointerover":var p=f.pointerId;return xu.set(p,Ou(xu.get(p)||null,t,r,a,o,f)),!0;case"gotpointercapture":return p=f.pointerId,Du.set(p,Ou(Du.get(p)||null,t,r,a,o,f)),!0}return!1}function vv(t){var r=Sr(t.target);if(r!==null){var a=Ve(r);if(a!==null){if(r=a.tag,r===13){if(r=dt(a),r!==null){t.blockedOn=r,na(t.priority,function(){if(a.tag===13){var o=Gr(),f=Wt(a,o);f!==null&&Er(f,a,o),Qd(a,o)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ch(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Wd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);oa=o,a.target.dispatchEvent(o),oa=null}else return r=It(a),r!==null&&pv(r),t.blockedOn=a,!1;r.shift()}return!0}function _v(t,r,a){ch(t)&&a.delete(r)}function zT(){Zd=!1,Da!==null&&ch(Da)&&(Da=null),Oa!==null&&ch(Oa)&&(Oa=null),Na!==null&&ch(Na)&&(Na=null),xu.forEach(_v),Du.forEach(_v)}function hh(t,r){t.blockedOn===r&&(t.blockedOn=null,Zd||(Zd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zT)))}var fh=null;function Ev(t){fh!==t&&(fh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){fh===t&&(fh=null);for(var r=0;r<t.length;r+=3){var a=t[r],o=t[r+1],f=t[r+2];if(typeof o!="function"){if($d(o||a)===null)continue;break}var p=It(a);p!==null&&(t.splice(r,3),r-=3,zf(p,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function Nu(t){function r(N){return hh(N,t)}Da!==null&&hh(Da,t),Oa!==null&&hh(Oa,t),Na!==null&&hh(Na,t),xu.forEach(r),Du.forEach(r);for(var a=0;a<ka.length;a++){var o=ka[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<ka.length&&(a=ka[0],a.blockedOn===null);)vv(a),a.blockedOn===null&&ka.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],p=a[o+1],w=f[tn]||null;if(typeof p=="function")w||Ev(a);else if(w){var R=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[tn]||null)R=w.formAction;else if($d(f)!==null)continue}else R=w.action;typeof R=="function"?a[o+1]=R:(a.splice(o,3),o-=3),Ev(a)}}}function Jd(t){this._internalRoot=t}dh.prototype.render=Jd.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,o=Gr();dv(a,o,t,r,null,null)},dh.prototype.unmount=Jd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;t.tag===0&&yl(),dv(t.current,2,null,t,null,null),Xc(),r[On]=null}};function dh(t){this._internalRoot=t}dh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ur();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ka.length&&r!==0&&r<ka[a].priority;a++);ka.splice(a,0,t),a===0&&vv(t)}};var bv=e.version;if(bv!=="19.0.0")throw Error(i(527,bv,"19.0.0"));Oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=ve(r),t=t!==null?Ge(t):null,t=t===null?null:t.stateNode,t};var qT={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:Sr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{mr=mh.inject(qT),qt=mh}catch{}}return Vu.createRoot=function(t,r){if(!l(t))throw Error(i(299));var a=!1,o="",f=Ug,p=jg,w=Bg,R=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks)),r=hv(t,1,!1,null,null,a,o,f,p,w,R,null),t[On]=r.current,Pd(t.nodeType===8?t.parentNode:t),new Jd(r)},Vu.hydrateRoot=function(t,r,a){if(!l(t))throw Error(i(299));var o=!1,f="",p=Ug,w=jg,R=Bg,N=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),r=hv(t,1,!0,r,a??null,o,f,p,w,R,N,Q),r.context=fv(null),a=r.current,o=Gr(),f=Ta(o),f.callback=null,wa(a,f,o),r.current.lanes=o,Wr(r,o),as(r),t[On]=r.current,Pd(t),new dh(r)},Vu.version="19.0.0",Vu}var Ov;function ew(){if(Ov)return nm.exports;Ov=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),nm.exports=JT(),nm.exports}var tw=ew();const nw=Ym(tw),rw=()=>{};var Nv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},iw=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],m=s[n++],v=s[n++],E=((l&7)<<18|(c&63)<<12|(m&63)<<6|v&63)-65536;e[i++]=String.fromCharCode(55296+(E>>10)),e[i++]=String.fromCharCode(56320+(E&1023))}else{const c=s[n++],m=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|m&63)}}return e.join("")},l0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const c=s[l],m=l+1<s.length,v=m?s[l+1]:0,E=l+2<s.length,b=E?s[l+2]:0,I=c>>2,V=(c&3)<<4|v>>4;let U=(v&15)<<2|b>>6,se=b&63;E||(se=64,m||(U=64)),i.push(n[I],n[V],n[U],n[se])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(o0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):iw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],v=l<s.length?n[s.charAt(l)]:0;++l;const b=l<s.length?n[s.charAt(l)]:64;++l;const V=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||v==null||b==null||V==null)throw new sw;const U=c<<2|v>>4;if(i.push(U),b!==64){const se=v<<4&240|b>>2;if(i.push(se),V!==64){const pe=b<<6&192|V;i.push(pe)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class sw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aw=function(s){const e=o0(s);return l0.encodeByteArray(e,!0)},kh=function(s){return aw(s).replace(/\./g,"")},u0=function(s){try{return l0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=()=>ow().__FIREBASE_DEFAULTS__,uw=()=>{if(typeof process>"u"||typeof Nv>"u")return;const s=Nv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},cw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&u0(s[1]);return e&&JSON.parse(e)},ef=()=>{try{return rw()||lw()||uw()||cw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},c0=s=>{var e,n;return(n=(e=ef())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},hw=s=>{const e=c0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},h0=()=>{var s;return(s=ef())==null?void 0:s.config},f0=s=>{var e;return(e=ef())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[kh(JSON.stringify(n)),kh(JSON.stringify(m)),""].join(".")}const qu={};function mw(){const s={prod:[],emulator:[]};for(const e of Object.keys(qu))qu[e]?s.emulator.push(e):s.prod.push(e);return s}function pw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let kv=!1;function m0(s,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||qu[s]===e||qu[s]||kv)return;qu[s]=e;function n(U){return`__firebase__banner__${U}`}const i="__firebase__banner",c=mw().prod.length>0;function m(){const U=document.getElementById(i);U&&U.remove()}function v(U){U.style.display="flex",U.style.background="#7faaf0",U.style.position="fixed",U.style.bottom="5px",U.style.left="5px",U.style.padding=".5em",U.style.borderRadius="5px",U.style.alignItems="center"}function E(U,se){U.setAttribute("width","24"),U.setAttribute("id",se),U.setAttribute("height","24"),U.setAttribute("viewBox","0 0 24 24"),U.setAttribute("fill","none"),U.style.marginLeft="-6px"}function b(){const U=document.createElement("span");return U.style.cursor="pointer",U.style.marginLeft="16px",U.style.fontSize="24px",U.innerHTML=" &times;",U.onclick=()=>{kv=!0,m()},U}function I(U,se){U.setAttribute("id",se),U.innerText="Learn more",U.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",U.setAttribute("target","__blank"),U.style.paddingLeft="5px",U.style.textDecoration="underline"}function V(){const U=pw(i),se=n("text"),pe=document.getElementById(se)||document.createElement("span"),Se=n("learnmore"),Ee=document.getElementById(Se)||document.createElement("a"),Le=n("preprendIcon"),Ne=document.getElementById(Le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(U.created){const Ye=U.element;v(Ye),I(Ee,Se);const ht=b();E(Ne,Le),Ye.append(Ne,pe,Ee,ht),document.body.appendChild(Ye)}c?(pe.innerText="Preview backend disconnected.",Ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,pe.innerText="Preview backend running in this workspace."),pe.setAttribute("id",se)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",V):V()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function yw(){var e;const s=(e=ef())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _w(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Ew(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bw(){const s=fr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Tw(){return!yw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ww(){try{return typeof indexedDB=="object"}catch{return!1}}function Sw(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="FirebaseError";class ta extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Aw,Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oc.prototype.create)}}class oc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],m=c?Rw(c,i):"Error",v=`${this.serviceName}: ${m} (${l}).`;return new ta(l,v,i)}}function Rw(s,e){return s.replace(Cw,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const Cw=/\{\$([^}]+)}/g;function Iw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Po(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const c=s[l],m=e[l];if(Vv(c)&&Vv(m)){if(!Po(c,m))return!1}else if(c!==m)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function Vv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,c]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Lu(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function xw(s,e){const n=new Dw(s,e);return n.subscribe.bind(n)}class Dw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Ow(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=am),l.error===void 0&&(l.error=am),l.complete===void 0&&(l.complete=am);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ow(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(s){return s&&s._delegate?s._delegate:s}class Lo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new fw;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vw(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,m]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(c);i===v&&m.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kw(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kw(s){return s===No?void 0:s}function Vw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Nw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Et||(Et={}));const Pw={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},Lw=Et.INFO,Uw={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},jw=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=Uw[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=Lw,this._logHandler=jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const Bw=(s,e)=>e.some(n=>s instanceof n);let Mv,Pv;function zw(){return Mv||(Mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qw(){return Pv||(Pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p0=new WeakMap,Em=new WeakMap,g0=new WeakMap,om=new WeakMap,Wm=new WeakMap;function Hw(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",m)},c=()=>{n(za(s.result)),l()},m=()=>{i(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",m)});return e.then(n=>{n instanceof IDBCursor&&p0.set(n,s)}).catch(()=>{}),Wm.set(e,s),e}function Fw(s){if(Em.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",m),s.removeEventListener("abort",m)},c=()=>{n(),l()},m=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",m),s.addEventListener("abort",m)});Em.set(s,e)}let bm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Em.get(s);if(e==="objectStoreNames")return s.objectStoreNames||g0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return za(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Kw(s){bm=s(bm)}function Gw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(lm(this),e,...n);return g0.set(i,e.sort?e.sort():[e]),za(i)}:qw().includes(s)?function(...e){return s.apply(lm(this),e),za(p0.get(this))}:function(...e){return za(s.apply(lm(this),e))}}function Yw(s){return typeof s=="function"?Gw(s):(s instanceof IDBTransaction&&Fw(s),Bw(s,zw())?new Proxy(s,bm):s)}function za(s){if(s instanceof IDBRequest)return Hw(s);if(om.has(s))return om.get(s);const e=Yw(s);return e!==s&&(om.set(s,e),Wm.set(e,s)),e}const lm=s=>Wm.get(s);function Qw(s,e,{blocked:n,upgrade:i,blocking:l,terminated:c}={}){const m=indexedDB.open(s,e),v=za(m);return i&&m.addEventListener("upgradeneeded",E=>{i(za(m.result),E.oldVersion,E.newVersion,za(m.transaction),E)}),n&&m.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),v.then(E=>{c&&E.addEventListener("close",()=>c()),l&&E.addEventListener("versionchange",b=>l(b.oldVersion,b.newVersion,b))}).catch(()=>{}),v}const Xw=["get","getKey","getAll","getAllKeys","count"],Ww=["put","add","delete","clear"],um=new Map;function Lv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=Ww.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||Xw.includes(n)))return;const c=async function(m,...v){const E=this.transaction(m,l?"readwrite":"readonly");let b=E.store;return i&&(b=b.index(v.shift())),(await Promise.all([b[n](...v),l&&E.done]))[0]};return um.set(e,c),c}Kw(s=>({...s,get:(e,n,i)=>Lv(e,n)||s.get(e,n,i),has:(e,n)=>!!Lv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zw(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Zw(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tm="@firebase/app",Uv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Xm("@firebase/app"),Jw="@firebase/app-compat",eS="@firebase/analytics-compat",tS="@firebase/analytics",nS="@firebase/app-check-compat",rS="@firebase/app-check",iS="@firebase/auth",sS="@firebase/auth-compat",aS="@firebase/database",oS="@firebase/data-connect",lS="@firebase/database-compat",uS="@firebase/functions",cS="@firebase/functions-compat",hS="@firebase/installations",fS="@firebase/installations-compat",dS="@firebase/messaging",mS="@firebase/messaging-compat",pS="@firebase/performance",gS="@firebase/performance-compat",yS="@firebase/remote-config",vS="@firebase/remote-config-compat",_S="@firebase/storage",ES="@firebase/storage-compat",bS="@firebase/firestore",TS="@firebase/ai",wS="@firebase/firestore-compat",SS="firebase",AS="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="[DEFAULT]",RS={[Tm]:"fire-core",[Jw]:"fire-core-compat",[tS]:"fire-analytics",[eS]:"fire-analytics-compat",[rS]:"fire-app-check",[nS]:"fire-app-check-compat",[iS]:"fire-auth",[sS]:"fire-auth-compat",[aS]:"fire-rtdb",[oS]:"fire-data-connect",[lS]:"fire-rtdb-compat",[uS]:"fire-fn",[cS]:"fire-fn-compat",[hS]:"fire-iid",[fS]:"fire-iid-compat",[dS]:"fire-fcm",[mS]:"fire-fcm-compat",[pS]:"fire-perf",[gS]:"fire-perf-compat",[yS]:"fire-rc",[vS]:"fire-rc-compat",[_S]:"fire-gcs",[ES]:"fire-gcs-compat",[bS]:"fire-fst",[wS]:"fire-fst-compat",[TS]:"fire-vertex","fire-js":"fire-js",[SS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,CS=new Map,Sm=new Map;function jv(s,e){try{s.container.addComponent(e)}catch(n){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Vl(s){const e=s.name;if(Sm.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;Sm.set(e,s);for(const n of Xu.values())jv(n,s);for(const n of CS.values())jv(n,s);return!0}function $m(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function vi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qa=new oc("app","Firebase",IS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=AS;function y0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:wm,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw qa.create("bad-app-name",{appName:String(l)});if(n||(n=h0()),!n)throw qa.create("no-options");const c=Xu.get(l);if(c){if(Po(n,c.options)&&Po(i,c.config))return c;throw qa.create("duplicate-app",{appName:l})}const m=new Mw(l);for(const E of Sm.values())m.addComponent(E);const v=new xS(n,i,m);return Xu.set(l,v),v}function Zm(s=wm){const e=Xu.get(s);if(!e&&s===wm&&h0())return y0();if(!e)throw qa.create("no-app",{appName:s});return e}function DS(){return Array.from(Xu.values())}function Ha(s,e,n){let i=RS[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const m=[`Unable to register library "${i}" with version "${e}":`];l&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(m.join(" "));return}Vl(new Lo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="firebase-heartbeat-database",NS=1,Wu="firebase-heartbeat-store";let cm=null;function v0(){return cm||(cm=Qw(OS,NS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Wu)}catch(n){console.warn(n)}}}}).catch(s=>{throw qa.create("idb-open",{originalErrorMessage:s.message})})),cm}async function kS(s){try{const n=(await v0()).transaction(Wu),i=await n.objectStore(Wu).get(_0(s));return await n.done,i}catch(e){if(e instanceof ta)$s.warn(e.message);else{const n=qa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(n.message)}}}async function Bv(s,e){try{const i=(await v0()).transaction(Wu,"readwrite");await i.objectStore(Wu).put(e,_0(s)),await i.done}catch(n){if(n instanceof ta)$s.warn(n.message);else{const i=qa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$s.warn(i.message)}}}function _0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1024,MS=30;class PS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new US(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=zv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(m=>m.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>MS){const m=jS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$s.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zv(),{heartbeatsToSend:i,unsentEntries:l}=LS(this._heartbeatsCache.heartbeats),c=kh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return $s.warn(n),""}}}function zv(){return new Date().toISOString().substring(0,10)}function LS(s,e=VS){const n=[];let i=s.slice();for(const l of s){const c=n.find(m=>m.agent===l.agent);if(c){if(c.dates.push(l.date),qv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),qv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class US{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ww()?Sw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qv(s){return kh(JSON.stringify({version:2,heartbeats:s})).length}function jS(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(s){Vl(new Lo("platform-logger",e=>new $w(e),"PRIVATE")),Vl(new Lo("heartbeat",e=>new PS(e),"PRIVATE")),Ha(Tm,Uv,s),Ha(Tm,Uv,"esm2020"),Ha("fire-js","")}BS("");var zS="firebase",qS="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ha(zS,qS,"app");function E0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HS=E0,b0=new oc("auth","Firebase",E0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Xm("@firebase/auth");function FS(s,...e){Vh.logLevel<=Et.WARN&&Vh.warn(`Auth (${ql}): ${s}`,...e)}function Th(s,...e){Vh.logLevel<=Et.ERROR&&Vh.error(`Auth (${ql}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(s,...e){throw Jm(s,...e)}function ls(s,...e){return Jm(s,...e)}function T0(s,e,n){const i={...HS(),[e]:n};return new oc("auth","Firebase",i).create(e,{appName:s.name})}function Xs(s){return T0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jm(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return b0.create(s,...e)}function $e(s,e,...n){if(!s)throw Jm(e,...n)}function Ys(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Th(e),new Error(e)}function Zs(s,e){s||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function KS(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KS()||_w()||"connection"in navigator)?navigator.onLine:!0}function YS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zs(n>e,"Short delay should be less than long delay!"),this.isMobile=gw()||Ew()}get(){return GS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(s,e){Zs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WS=new uc(3e4,6e4);function Za(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ja(s,e,n,i,l={}){return S0(s,l,async()=>{let c={},m={};i&&(e==="GET"?m=i:c={body:JSON.stringify(i)});const v=lc({key:s.config.apiKey,...m}).slice(1),E=await s._getAdditionalHeaders();E["Content-Type"]="application/json",s.languageCode&&(E["X-Firebase-Locale"]=s.languageCode);const b={method:e,headers:E,...c};return vw()||(b.referrerPolicy="no-referrer"),s.emulatorConfig&&zl(s.emulatorConfig.host)&&(b.credentials="include"),w0.fetch()(await A0(s,s.config.apiHost,n,v),b)})}async function S0(s,e,n){s._canInitEmulator=!1;const i={...QS,...e};try{const l=new ZS(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const m=await c.json();if("needConfirmation"in m)throw ph(s,"account-exists-with-different-credential",m);if(c.ok&&!("errorMessage"in m))return m;{const v=c.ok?m.errorMessage:m.error.message,[E,b]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(s,"credential-already-in-use",m);if(E==="EMAIL_EXISTS")throw ph(s,"email-already-in-use",m);if(E==="USER_DISABLED")throw ph(s,"user-disabled",m);const I=i[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw T0(s,I,b);Hi(s,I)}}catch(l){if(l instanceof ta)throw l;Hi(s,"network-request-failed",{message:String(l)})}}async function cc(s,e,n,i,l={}){const c=await Ja(s,e,n,i,l);return"mfaPendingCredential"in c&&Hi(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function A0(s,e,n,i){const l=`${e}${n}?${i}`,c=s,m=c.config.emulator?ep(s.config,l):`${s.config.apiScheme}://${l}`;return XS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(m).toString():m}function $S(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ls(this.auth,"network-request-failed")),WS.get())})}}function ph(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=ls(s,e,i);return l.customData._tokenResponse=n,l}function Fv(s){return s!==void 0&&s.enterprise!==void 0}class JS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $S(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eA(s,e){return Ja(s,"GET","/v2/recaptchaConfig",Za(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(s,e){return Ja(s,"POST","/v1/accounts:delete",e)}async function Mh(s,e){return Ja(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nA(s,e=!1){const n=Yr(s),i=await n.getIdToken(e),l=tp(i);$e(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,m=c==null?void 0:c.sign_in_provider;return{claims:l,token:i,authTime:Hu(hm(l.auth_time)),issuedAtTime:Hu(hm(l.iat)),expirationTime:Hu(hm(l.exp)),signInProvider:m||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function hm(s){return Number(s)*1e3}function tp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return Th("JWT malformed, contained fewer than 3 sections"),null;try{const l=u0(n);return l?JSON.parse(l):(Th("Failed to decode base64 JWT payload"),null)}catch(l){return Th("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Kv(s){const e=tp(s);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ta&&rA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function rA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(s){var V;const e=s.auth,n=await s.getIdToken(),i=await $u(s,Mh(e,{idToken:n}));$e(i==null?void 0:i.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const c=(V=l.providerUserInfo)!=null&&V.length?R0(l.providerUserInfo):[],m=aA(s.providerData,c),v=s.isAnonymous,E=!(s.email&&l.passwordHash)&&!(m!=null&&m.length),b=v?E:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Rm(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(s,I)}async function sA(s){const e=Yr(s);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aA(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function R0(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(s,e){const n=await S0(s,{},async()=>{const i=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,m=await A0(s,l,"/v1/token",`key=${c}`),v=await s._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:i};return s.emulatorConfig&&zl(s.emulatorConfig.host)&&(E.credentials="include"),w0.fetch()(m,E)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lA(s,e){return Ja(s,"POST","/v2/accounts:revokeToken",Za(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const n=Kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:c}=await oA(e,n);this.updateTokensAndExpiration(i,l,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:c}=n,m=new xl;return i&&($e(typeof i=="string","internal-error",{appName:e}),m.refreshToken=i),l&&($e(typeof l=="string","internal-error",{appName:e}),m.accessToken=l),c&&($e(typeof c=="number","internal-error",{appName:e}),m.expirationTime=c),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(s,e){$e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Bi{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new iA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Rm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await $u(this,this.stsTokenManager.getToken(this.auth,e));return $e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nA(this,e)}reload(){return sA(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(Xs(this.auth));const e=await this.getIdToken();return await $u(this,tA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,m=n.photoURL??void 0,v=n.tenantId??void 0,E=n._redirectEventId??void 0,b=n.createdAt??void 0,I=n.lastLoginAt??void 0,{uid:V,emailVerified:U,isAnonymous:se,providerData:pe,stsTokenManager:Se}=n;$e(V&&Se,e,"internal-error");const Ee=xl.fromJSON(this.name,Se);$e(typeof V=="string",e,"internal-error"),Ma(i,e.name),Ma(l,e.name),$e(typeof U=="boolean",e,"internal-error"),$e(typeof se=="boolean",e,"internal-error"),Ma(c,e.name),Ma(m,e.name),Ma(v,e.name),Ma(E,e.name),Ma(b,e.name),Ma(I,e.name);const Le=new Bi({uid:V,auth:e,email:l,emailVerified:U,displayName:i,isAnonymous:se,photoURL:m,phoneNumber:c,tenantId:v,stsTokenManager:Ee,createdAt:b,lastLoginAt:I});return pe&&Array.isArray(pe)&&(Le.providerData=pe.map(Ne=>({...Ne}))),E&&(Le._redirectEventId=E),Le}static async _fromIdTokenResponse(e,n,i=!1){const l=new xl;l.updateFromServerResponse(n);const c=new Bi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Ph(c),c}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];$e(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?R0(l.providerUserInfo):[],m=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),v=new xl;v.updateFromIdToken(i);const E=new Bi({uid:l.localId,auth:e,stsTokenManager:v,isAnonymous:m}),b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Rm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(E,b),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function Qs(s){Zs(s instanceof Function,"Expected a class definition");let e=Gv.get(s);return e?(Zs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Gv.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C0.type="NONE";const Yv=C0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(s,e,n){return`firebase:${s}:${e}:${n}`}class Dl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:c}=this.auth;this.fullUserKey=wh(this.userKey,l.apiKey,c),this.fullPersistenceKey=wh("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mh(this.auth,{idToken:e}).catch(()=>{});return n?Bi._fromGetAccountInfoResponse(this.auth,n,e):null}return Bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Dl(Qs(Yv),e,i);const l=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=l[0]||Qs(Yv);const m=wh(i,e.config.apiKey,e.name);let v=null;for(const b of n)try{const I=await b._get(m);if(I){let V;if(typeof I=="string"){const U=await Mh(e,{idToken:I}).catch(()=>{});if(!U)break;V=await Bi._fromGetAccountInfoResponse(e,U,I)}else V=Bi._fromJSON(e,I);b!==c&&(v=V),c=b;break}}catch{}const E=l.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new Dl(c,e,i):(c=E[0],v&&await c._set(m,v.toJSON()),await Promise.all(n.map(async b=>{if(b!==c)try{await b._remove(m)}catch{}})),new Dl(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k0(e))return"Blackberry";if(V0(e))return"Webos";if(x0(e))return"Safari";if((e.includes("chrome/")||D0(e))&&!e.includes("edge/"))return"Chrome";if(N0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function I0(s=fr()){return/firefox\//i.test(s)}function x0(s=fr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D0(s=fr()){return/crios\//i.test(s)}function O0(s=fr()){return/iemobile/i.test(s)}function N0(s=fr()){return/android/i.test(s)}function k0(s=fr()){return/blackberry/i.test(s)}function V0(s=fr()){return/webos/i.test(s)}function np(s=fr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function uA(s=fr()){var e;return np(s)&&!!((e=window.navigator)!=null&&e.standalone)}function cA(){return bw()&&document.documentMode===10}function M0(s=fr()){return np(s)||N0(s)||V0(s)||k0(s)||/windows phone/i.test(s)||O0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(s,e=[]){let n;switch(s){case"Browser":n=Qv(fr());break;case"Worker":n=`${Qv(fr())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ql}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((m,v)=>{try{const E=e(c);m(E)}catch(E){v(E)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(s,e={}){return Ja(s,"GET","/v2/passwordPolicy",Za(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=6;class mA{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xv(this),this.idTokenSubscription=new Xv(this),this.beforeStateQueue=new hA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qs(n)),this._initializationPromise=this.queue(async()=>{var i,l,c;if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mh(this,{idToken:e}),i=await Bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(vi(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(v,v))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=(c=this.redirectUser)==null?void 0:c._redirectEventId,v=i==null?void 0:i._redirectEventId,E=await this.tryRedirectSignIn(e);(!m||m===v)&&(E!=null&&E.user)&&(i=E.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(m){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(Xs(this));const n=e?Yr(e):null;return n&&$e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(Xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(Xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fA(this),n=new mA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await lA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qs(e)||this._popupRedirectResolver;$e(n,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[Qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let m=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(v,this,"internal-error"),v.then(()=>{m||c(this.currentUser)}),typeof n=="function"){const E=e.addObserver(n,i,l);return()=>{m=!0,E()}}else{const E=e.addObserver(n);return()=>{m=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&FS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fo(s){return Yr(s)}class Xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=xw(n=>this.observer=n)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gA(s){tf=s}function L0(s){return tf.loadJS(s)}function yA(){return tf.recaptchaEnterpriseScript}function vA(){return tf.gapiScript}function _A(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class EA{constructor(){this.enterprise=new bA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TA="recaptcha-enterprise",U0="NO_RECAPTCHA";class wA{constructor(e){this.type=TA,this.auth=Fo(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(m,v)=>{eA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(E=>{if(E.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const b=new JS(E);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,m(b.siteKey)}}).catch(E=>{v(E)})})}function l(c,m,v){const E=window.grecaptcha;Fv(E)?E.enterprise.ready(()=>{E.enterprise.execute(c,{action:e}).then(b=>{m(b)}).catch(()=>{m(U0)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EA().execute("siteKey",{action:"verify"}):new Promise((c,m)=>{i(this.auth).then(v=>{if(!n&&Fv(window.grecaptcha))l(v,c,m);else{if(typeof window>"u"){m(new Error("RecaptchaVerifier is only supported in browser"));return}let E=yA();E.length!==0&&(E+=v),L0(E).then(()=>{l(v,c,m)}).catch(b=>{m(b)})}}).catch(v=>{m(v)})})}}async function Wv(s,e,n,i=!1,l=!1){const c=new wA(s);let m;if(l)m=U0;else try{m=await c.verify(n)}catch{m=await c.verify(n,!0)}const v={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const E=v.phoneEnrollmentInfo.phoneNumber,b=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:E,recaptchaToken:b,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const E=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:E,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return i?Object.assign(v,{captchaResp:m}):Object.assign(v,{captchaResponse:m}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function Cm(s,e,n,i,l){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await Wv(s,e,n,n==="getOobCode");return i(s,m)}else return i(s,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const v=await Wv(s,e,n,n==="getOobCode");return i(s,v)}else return Promise.reject(m)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(s,e){const n=$m(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Po(c,e??{}))return l;Hi(l,"already-initialized")}return n.initialize({options:e})}function AA(s,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Qs);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function RA(s,e,n){const i=Fo(s);$e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,c=j0(e),{host:m,port:v}=CA(e),E=v===null?"":`:${v}`,b={url:`${c}//${m}${E}/`},I=Object.freeze({host:m,port:v,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){$e(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),$e(Po(b,i.config.emulator)&&Po(I,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=b,i.emulatorConfig=I,i.settings.appVerificationDisabledForTesting=!0,zl(m)?(d0(`${c}//${m}${E}`),m0("Auth",!0)):IA()}function j0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function CA(s){const e=j0(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const c=l[1];return{host:c,port:$v(i.substr(c.length+1))}}else{const[c,m]=i.split(":");return{host:c,port:$v(m)}}}function $v(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function IA(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,n){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function xA(s,e){return Ja(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(s,e){return cc(s,"POST","/v1/accounts:signInWithPassword",Za(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(s,e){return cc(s,"POST","/v1/accounts:signInWithEmailLink",Za(s,e))}async function NA(s,e){return cc(s,"POST","/v1/accounts:signInWithEmailLink",Za(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends rp{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Zu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Zu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cm(e,n,"signInWithPassword",DA);case"emailLink":return OA(e,{email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cm(e,i,"signUpPassword",xA);case"emailLink":return NA(e,{idToken:n,email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(s,e){return cc(s,"POST","/v1/accounts:signInWithIdp",Za(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="http://localhost";class Uo extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...c}=n;if(!i||!l)return null;const m=new Uo(i,l);return m.idToken=c.idToken||void 0,m.accessToken=c.accessToken||void 0,m.secret=c.secret,m.nonce=c.nonce,m.pendingToken=c.pendingToken||null,m}_getIdTokenResponse(e){const n=this.buildRequest();return Ol(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ol(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ol(e,n)}buildRequest(){const e={requestUri:kA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MA(s){const e=Pu(Lu(s)).link,n=e?Pu(Lu(e)).deep_link_id:null,i=Pu(Lu(s)).deep_link_id;return(i?Pu(Lu(i)).link:null)||i||n||e||s}class ip{constructor(e){const n=Pu(Lu(e)),i=n.apiKey??null,l=n.oobCode??null,c=VA(n.mode??null);$e(i&&l&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=MA(e);try{return new ip(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.providerId=Hl.PROVIDER_ID}static credential(e,n){return Zu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ip.parseLink(n);return $e(i,"argument-error"),Zu._fromEmailAndCode(e,i.code,i.tenantId)}}Hl.PROVIDER_ID="password";Hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends B0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends hc{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pa.credential(e.oauthAccessToken)}catch{return null}}}Pa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Uo._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return La.credential(n,i)}catch{return null}}}La.GOOGLE_SIGN_IN_METHOD="google.com";La.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends hc{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ua.credentialFromTaggedObject(e)}static credentialFromError(e){return Ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ua.credential(e.oauthAccessToken)}catch{return null}}}Ua.GITHUB_SIGN_IN_METHOD="github.com";Ua.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends hc{constructor(){super("twitter.com")}static credential(e,n){return Uo._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ja.credential(n,i)}catch{return null}}}ja.TWITTER_SIGN_IN_METHOD="twitter.com";ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(s,e){return cc(s,"POST","/v1/accounts:signUp",Za(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const c=await Bi._fromIdTokenResponse(e,i,l),m=Zv(i);return new jo({user:c,providerId:m,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=Zv(i);return new jo({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function Zv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends ta{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Lh(e,n,i,l)}}function z0(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(s,c,e,i):c})}async function LA(s,e,n=!1){const i=await $u(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return jo._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(s,e,n=!1){const{auth:i}=s;if(vi(i.app))return Promise.reject(Xs(i));const l="reauthenticate";try{const c=await $u(s,z0(i,l,e,s),n);$e(c.idToken,i,"internal-error");const m=tp(c.idToken);$e(m,i,"internal-error");const{sub:v}=m;return $e(s.uid===v,i,"user-mismatch"),jo._forOperation(s,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Hi(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0(s,e,n=!1){if(vi(s.app))return Promise.reject(Xs(s));const i="signIn",l=await z0(s,i,e),c=await jo._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(c.user),c}async function jA(s,e){return q0(Fo(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0(s){const e=Fo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BA(s,e,n){if(vi(s.app))return Promise.reject(Xs(s));const i=Fo(s),m=await Cm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PA).catch(E=>{throw E.code==="auth/password-does-not-meet-requirements"&&H0(s),E}),v=await jo._fromIdTokenResponse(i,"signIn",m);return await i._updateCurrentUser(v.user),v}function zA(s,e,n){return vi(s.app)?Promise.reject(Xs(s)):jA(Yr(s),Hl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&H0(s),i})}function qA(s,e,n,i){return Yr(s).onIdTokenChanged(e,n,i)}function HA(s,e,n){return Yr(s).beforeAuthStateChanged(e,n)}function FA(s,e,n,i){return Yr(s).onAuthStateChanged(e,n,i)}function KA(s){return Yr(s).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=1e3,YA=10;class K0 extends F0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((m,v,E)=>{this.notifyListeners(m,E)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const m=this.storage.getItem(i);!n&&this.localCache[i]===m||this.notifyListeners(i,m)},c=this.storage.getItem(i);cA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,YA):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},GA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}K0.type="LOCAL";const QA=K0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends F0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G0.type="SESSION";const Y0=G0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new nf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:c}=n.data,m=this.handlersMap[l];if(!(m!=null&&m.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const v=Array.from(m).map(async b=>b(n.origin,c)),E=await XA(v);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:E})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,m;return new Promise((v,E)=>{const b=sp("",20);l.port1.start();const I=setTimeout(()=>{E(new Error("unsupported_event"))},i);m={messageChannel:l,onMessage(V){const U=V;if(U.data.eventId===b)switch(U.data.status){case"ack":clearTimeout(I),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),v(U.data.response);break;default:clearTimeout(I),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(m),l.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[l.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function $A(s){us().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function ZA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function e1(){return Q0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="firebaseLocalStorageDb",t1=1,jh="firebaseLocalStorage",W0="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rf(s,e){return s.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function n1(){const s=indexedDB.deleteDatabase(X0);return new fc(s).toPromise()}function Im(){const s=indexedDB.open(X0,t1);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(jh,{keyPath:W0})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(jh)?e(i):(i.close(),await n1(),e(await Im()))})})}async function Jv(s,e,n){const i=rf(s,!0).put({[W0]:e,value:n});return new fc(i).toPromise()}async function r1(s,e){const n=rf(s,!1).get(e),i=await new fc(n).toPromise();return i===void 0?null:i.value}function e_(s,e){const n=rf(s,!0).delete(e);return new fc(n).toPromise()}const i1=800,s1=3;class $0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>s1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(e1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await ZA(),!this.activeServiceWorker)return;this.sender=new WA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await Jv(e,Uh,"1"),await e_(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Jv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>r1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>e_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=rf(l,!1).getAll();return new fc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$0.type="LOCAL";const a1=$0;new uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(s,e){return e?Qs(e):($e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function l1(s){return q0(s.auth,new ap(s),s.bypassAuthState)}function u1(s){const{auth:e,user:n}=s;return $e(n,e,"internal-error"),UA(n,new ap(s),s.bypassAuthState)}async function c1(s){const{auth:e,user:n}=s;return $e(n,e,"internal-error"),LA(n,new ap(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,i,l,c=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:c,error:m,type:v}=e;if(m){this.reject(m);return}const E={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l1;case"linkViaPopup":case"linkViaRedirect":return c1;case"reauthViaPopup":case"reauthViaRedirect":return u1;default:Hi(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new uc(2e3,1e4);class Il extends Z0{constructor(e,n,i,l,c){super(e,n,l,c),this.provider=i,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h1.get())};e()}}Il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="pendingRedirect",Sh=new Map;class d1 extends Z0{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const i=await m1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m1(s,e){const n=y1(e),i=g1(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function p1(s,e){Sh.set(s._key(),e)}function g1(s){return Qs(s._redirectPersistence)}function y1(s){return wh(f1,s.config.apiKey,s.name)}async function v1(s,e,n=!1){if(vi(s.app))return Promise.reject(Xs(s));const i=Fo(s),l=o1(i,e),m=await new d1(i,l,n).execute();return m&&!n&&(delete m.user._redirectEventId,await i._persistUserIfCurrent(m.user),await i._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=600*1e3;class E1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!J0(e)){const l=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ls(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_1&&this.cachedEventUids.clear(),this.cachedEventUids.has(t_(e))}saveEventToCache(e){this.cachedEventUids.add(t_(e)),this.lastProcessedEventTime=Date.now()}}function t_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function J0({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b1(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(s,e={}){return Ja(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S1=/^https?/;async function A1(s){if(s.config.emulator)return;const{authorizedDomains:e}=await T1(s);for(const n of e)try{if(R1(n))return}catch{}Hi(s,"unauthorized-domain")}function R1(s){const e=Am(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const m=new URL(s);return m.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&m.hostname===i}if(!S1.test(n))return!1;if(w1.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new uc(3e4,6e4);function n_(){const s=us().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function I1(s){return new Promise((e,n)=>{var l,c,m;function i(){n_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n_(),n(ls(s,"network-request-failed"))},timeout:C1.get()})}if((c=(l=us().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((m=us().gapi)!=null&&m.load)i();else{const v=_A("iframefcb");return us()[v]=()=>{gapi.load?i():n(ls(s,"network-request-failed"))},L0(`${vA()}?onload=${v}`).catch(E=>n(E))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function x1(s){return Ah=Ah||I1(s),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new uc(5e3,15e3),O1="__/auth/iframe",N1="emulator/auth/iframe",k1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M1(s){const e=s.config;$e(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?ep(e,N1):`https://${s.config.authDomain}/${O1}`,i={apiKey:e.apiKey,appName:s.name,v:ql},l=V1.get(s.config.apiHost);l&&(i.eid=l);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${lc(i).slice(1)}`}async function P1(s){const e=await x1(s),n=us().gapi;return $e(n,s,"internal-error"),e.open({where:document.body,url:M1(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k1,dontclear:!0},i=>new Promise(async(l,c)=>{await i.restyle({setHideOnLeave:!1});const m=ls(s,"network-request-failed"),v=us().setTimeout(()=>{c(m)},D1.get());function E(){us().clearTimeout(v),l(i)}i.ping(E).then(E,()=>{c(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U1=500,j1=600,B1="_blank",z1="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q1(s,e,n,i=U1,l=j1){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),m=Math.max((window.screen.availWidth-i)/2,0).toString();let v="";const E={...L1,width:i.toString(),height:l.toString(),top:c,left:m},b=fr().toLowerCase();n&&(v=D0(b)?B1:n),I0(b)&&(e=e||z1,E.scrollbars="yes");const I=Object.entries(E).reduce((U,[se,pe])=>`${U}${se}=${pe},`,"");if(uA(b)&&v!=="_self")return H1(e||"",v),new r_(null);const V=window.open(e||"",v,I);$e(V,s,"popup-blocked");try{V.focus()}catch{}return new r_(V)}function H1(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="__/auth/handler",K1="emulator/auth/handler",G1=encodeURIComponent("fac");async function i_(s,e,n,i,l,c){$e(s.config.authDomain,s,"auth-domain-config-required"),$e(s.config.apiKey,s,"invalid-api-key");const m={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:ql,eventId:l};if(e instanceof B0){e.setDefaultLanguage(s.languageCode),m.providerId=e.providerId||"",Iw(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,V]of Object.entries({}))m[I]=V}if(e instanceof hc){const I=e.getScopes().filter(V=>V!=="");I.length>0&&(m.scopes=I.join(","))}s.tenantId&&(m.tid=s.tenantId);const v=m;for(const I of Object.keys(v))v[I]===void 0&&delete v[I];const E=await s._getAppCheckToken(),b=E?`#${G1}=${encodeURIComponent(E)}`:"";return`${Y1(s)}?${lc(v).slice(1)}${b}`}function Y1({config:s}){return s.emulator?ep(s,K1):`https://${s.authDomain}/${F1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class Q1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y0,this._completeRedirectFn=v1,this._overrideRedirectResult=p1}async _openPopup(e,n,i,l){var m;Zs((m=this.eventManagers[e._key()])==null?void 0:m.manager,"_initialize() not called before _openPopup()");const c=await i_(e,n,i,Am(),l);return q1(e,c,sp())}async _openRedirect(e,n,i,l){await this._originValidation(e);const c=await i_(e,n,i,Am(),l);return $A(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Zs(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await P1(e),i=new E1(e);return n.register("authEvent",l=>($e(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},l=>{var m;const c=(m=l==null?void 0:l[0])==null?void 0:m[fm];c!==void 0&&n(!!c),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M0()||x0()||np()}}const X1=Q1;var s_="@firebase/auth",a_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z1(s){Vl(new Lo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:m,authDomain:v}=i.options;$e(m&&!m.includes(":"),"invalid-api-key",{appName:i.name});const E={apiKey:m,authDomain:v,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P0(s)},b=new pA(i,l,c,E);return AA(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Vl(new Lo("auth-internal",e=>{const n=Fo(e.getProvider("auth").getImmediate());return(i=>new W1(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ha(s_,a_,$1(s)),Ha(s_,a_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=300,eR=f0("authIdTokenMaxAge")||J1;let o_=null;const tR=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>eR)return;const l=n==null?void 0:n.token;o_!==l&&(o_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function nR(s=Zm()){const e=$m(s,"auth");if(e.isInitialized())return e.getImmediate();const n=SA(s,{popupRedirectResolver:X1,persistence:[a1,QA,Y0]}),i=f0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const m=tR(c.toString());HA(n,m,()=>m(n.currentUser)),qA(n,v=>m(v))}}const l=c0("auth");return l&&RA(n,`http://${l}`),n}function rR(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}gA({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const c=ls("internal-error");c.customData=l,n(c)},i.type="text/javascript",i.charset="UTF-8",rR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z1("Browser");var l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fa,eE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,O){function D(){}D.prototype=O.prototype,P.F=O.prototype,P.prototype=new D,P.prototype.constructor=P,P.D=function(M,j,X){for(var k=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)k[Ct-2]=arguments[Ct];return O.prototype[j].apply(M,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(P,O,D){D||(D=0);const M=Array(16);if(typeof O=="string")for(var j=0;j<16;++j)M[j]=O.charCodeAt(D++)|O.charCodeAt(D++)<<8|O.charCodeAt(D++)<<16|O.charCodeAt(D++)<<24;else for(j=0;j<16;++j)M[j]=O[D++]|O[D++]<<8|O[D++]<<16|O[D++]<<24;O=P.g[0],D=P.g[1],j=P.g[2];let X=P.g[3],k;k=O+(X^D&(j^X))+M[0]+3614090360&4294967295,O=D+(k<<7&4294967295|k>>>25),k=X+(j^O&(D^j))+M[1]+3905402710&4294967295,X=O+(k<<12&4294967295|k>>>20),k=j+(D^X&(O^D))+M[2]+606105819&4294967295,j=X+(k<<17&4294967295|k>>>15),k=D+(O^j&(X^O))+M[3]+3250441966&4294967295,D=j+(k<<22&4294967295|k>>>10),k=O+(X^D&(j^X))+M[4]+4118548399&4294967295,O=D+(k<<7&4294967295|k>>>25),k=X+(j^O&(D^j))+M[5]+1200080426&4294967295,X=O+(k<<12&4294967295|k>>>20),k=j+(D^X&(O^D))+M[6]+2821735955&4294967295,j=X+(k<<17&4294967295|k>>>15),k=D+(O^j&(X^O))+M[7]+4249261313&4294967295,D=j+(k<<22&4294967295|k>>>10),k=O+(X^D&(j^X))+M[8]+1770035416&4294967295,O=D+(k<<7&4294967295|k>>>25),k=X+(j^O&(D^j))+M[9]+2336552879&4294967295,X=O+(k<<12&4294967295|k>>>20),k=j+(D^X&(O^D))+M[10]+4294925233&4294967295,j=X+(k<<17&4294967295|k>>>15),k=D+(O^j&(X^O))+M[11]+2304563134&4294967295,D=j+(k<<22&4294967295|k>>>10),k=O+(X^D&(j^X))+M[12]+1804603682&4294967295,O=D+(k<<7&4294967295|k>>>25),k=X+(j^O&(D^j))+M[13]+4254626195&4294967295,X=O+(k<<12&4294967295|k>>>20),k=j+(D^X&(O^D))+M[14]+2792965006&4294967295,j=X+(k<<17&4294967295|k>>>15),k=D+(O^j&(X^O))+M[15]+1236535329&4294967295,D=j+(k<<22&4294967295|k>>>10),k=O+(j^X&(D^j))+M[1]+4129170786&4294967295,O=D+(k<<5&4294967295|k>>>27),k=X+(D^j&(O^D))+M[6]+3225465664&4294967295,X=O+(k<<9&4294967295|k>>>23),k=j+(O^D&(X^O))+M[11]+643717713&4294967295,j=X+(k<<14&4294967295|k>>>18),k=D+(X^O&(j^X))+M[0]+3921069994&4294967295,D=j+(k<<20&4294967295|k>>>12),k=O+(j^X&(D^j))+M[5]+3593408605&4294967295,O=D+(k<<5&4294967295|k>>>27),k=X+(D^j&(O^D))+M[10]+38016083&4294967295,X=O+(k<<9&4294967295|k>>>23),k=j+(O^D&(X^O))+M[15]+3634488961&4294967295,j=X+(k<<14&4294967295|k>>>18),k=D+(X^O&(j^X))+M[4]+3889429448&4294967295,D=j+(k<<20&4294967295|k>>>12),k=O+(j^X&(D^j))+M[9]+568446438&4294967295,O=D+(k<<5&4294967295|k>>>27),k=X+(D^j&(O^D))+M[14]+3275163606&4294967295,X=O+(k<<9&4294967295|k>>>23),k=j+(O^D&(X^O))+M[3]+4107603335&4294967295,j=X+(k<<14&4294967295|k>>>18),k=D+(X^O&(j^X))+M[8]+1163531501&4294967295,D=j+(k<<20&4294967295|k>>>12),k=O+(j^X&(D^j))+M[13]+2850285829&4294967295,O=D+(k<<5&4294967295|k>>>27),k=X+(D^j&(O^D))+M[2]+4243563512&4294967295,X=O+(k<<9&4294967295|k>>>23),k=j+(O^D&(X^O))+M[7]+1735328473&4294967295,j=X+(k<<14&4294967295|k>>>18),k=D+(X^O&(j^X))+M[12]+2368359562&4294967295,D=j+(k<<20&4294967295|k>>>12),k=O+(D^j^X)+M[5]+4294588738&4294967295,O=D+(k<<4&4294967295|k>>>28),k=X+(O^D^j)+M[8]+2272392833&4294967295,X=O+(k<<11&4294967295|k>>>21),k=j+(X^O^D)+M[11]+1839030562&4294967295,j=X+(k<<16&4294967295|k>>>16),k=D+(j^X^O)+M[14]+4259657740&4294967295,D=j+(k<<23&4294967295|k>>>9),k=O+(D^j^X)+M[1]+2763975236&4294967295,O=D+(k<<4&4294967295|k>>>28),k=X+(O^D^j)+M[4]+1272893353&4294967295,X=O+(k<<11&4294967295|k>>>21),k=j+(X^O^D)+M[7]+4139469664&4294967295,j=X+(k<<16&4294967295|k>>>16),k=D+(j^X^O)+M[10]+3200236656&4294967295,D=j+(k<<23&4294967295|k>>>9),k=O+(D^j^X)+M[13]+681279174&4294967295,O=D+(k<<4&4294967295|k>>>28),k=X+(O^D^j)+M[0]+3936430074&4294967295,X=O+(k<<11&4294967295|k>>>21),k=j+(X^O^D)+M[3]+3572445317&4294967295,j=X+(k<<16&4294967295|k>>>16),k=D+(j^X^O)+M[6]+76029189&4294967295,D=j+(k<<23&4294967295|k>>>9),k=O+(D^j^X)+M[9]+3654602809&4294967295,O=D+(k<<4&4294967295|k>>>28),k=X+(O^D^j)+M[12]+3873151461&4294967295,X=O+(k<<11&4294967295|k>>>21),k=j+(X^O^D)+M[15]+530742520&4294967295,j=X+(k<<16&4294967295|k>>>16),k=D+(j^X^O)+M[2]+3299628645&4294967295,D=j+(k<<23&4294967295|k>>>9),k=O+(j^(D|~X))+M[0]+4096336452&4294967295,O=D+(k<<6&4294967295|k>>>26),k=X+(D^(O|~j))+M[7]+1126891415&4294967295,X=O+(k<<10&4294967295|k>>>22),k=j+(O^(X|~D))+M[14]+2878612391&4294967295,j=X+(k<<15&4294967295|k>>>17),k=D+(X^(j|~O))+M[5]+4237533241&4294967295,D=j+(k<<21&4294967295|k>>>11),k=O+(j^(D|~X))+M[12]+1700485571&4294967295,O=D+(k<<6&4294967295|k>>>26),k=X+(D^(O|~j))+M[3]+2399980690&4294967295,X=O+(k<<10&4294967295|k>>>22),k=j+(O^(X|~D))+M[10]+4293915773&4294967295,j=X+(k<<15&4294967295|k>>>17),k=D+(X^(j|~O))+M[1]+2240044497&4294967295,D=j+(k<<21&4294967295|k>>>11),k=O+(j^(D|~X))+M[8]+1873313359&4294967295,O=D+(k<<6&4294967295|k>>>26),k=X+(D^(O|~j))+M[15]+4264355552&4294967295,X=O+(k<<10&4294967295|k>>>22),k=j+(O^(X|~D))+M[6]+2734768916&4294967295,j=X+(k<<15&4294967295|k>>>17),k=D+(X^(j|~O))+M[13]+1309151649&4294967295,D=j+(k<<21&4294967295|k>>>11),k=O+(j^(D|~X))+M[4]+4149444226&4294967295,O=D+(k<<6&4294967295|k>>>26),k=X+(D^(O|~j))+M[11]+3174756917&4294967295,X=O+(k<<10&4294967295|k>>>22),k=j+(O^(X|~D))+M[2]+718787259&4294967295,j=X+(k<<15&4294967295|k>>>17),k=D+(X^(j|~O))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+O&4294967295,P.g[1]=P.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,P.g[2]=P.g[2]+j&4294967295,P.g[3]=P.g[3]+X&4294967295}i.prototype.v=function(P,O){O===void 0&&(O=P.length);const D=O-this.blockSize,M=this.C;let j=this.h,X=0;for(;X<O;){if(j==0)for(;X<=D;)l(this,P,X),X+=this.blockSize;if(typeof P=="string"){for(;X<O;)if(M[j++]=P.charCodeAt(X++),j==this.blockSize){l(this,M),j=0;break}}else for(;X<O;)if(M[j++]=P[X++],j==this.blockSize){l(this,M),j=0;break}}this.h=j,this.o+=O},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var O=1;O<P.length-8;++O)P[O]=0;O=this.o*8;for(var D=P.length-8;D<P.length;++D)P[D]=O&255,O/=256;for(this.v(P),P=Array(16),O=0,D=0;D<4;++D)for(let M=0;M<32;M+=8)P[O++]=this.g[D]>>>M&255;return P};function c(P,O){var D=v;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=O(P)}function m(P,O){this.h=O;const D=[];let M=!0;for(let j=P.length-1;j>=0;j--){const X=P[j]|0;M&&X==O||(D[j]=X,M=!1)}this.g=D}var v={};function E(P){return-128<=P&&P<128?c(P,function(O){return new m([O|0],O<0?-1:0)}):new m([P|0],P<0?-1:0)}function b(P){if(isNaN(P)||!isFinite(P))return V;if(P<0)return Ee(b(-P));const O=[];let D=1;for(let M=0;P>=D;M++)O[M]=P/D|0,D*=4294967296;return new m(O,0)}function I(P,O){if(P.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(P.charAt(0)=="-")return Ee(I(P.substring(1),O));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=b(Math.pow(O,8));let M=V;for(let X=0;X<P.length;X+=8){var j=Math.min(8,P.length-X);const k=parseInt(P.substring(X,X+j),O);j<8?(j=b(Math.pow(O,j)),M=M.j(j).add(b(k))):(M=M.j(D),M=M.add(b(k)))}return M}var V=E(0),U=E(1),se=E(16777216);s=m.prototype,s.m=function(){if(Se(this))return-Ee(this).m();let P=0,O=1;for(let D=0;D<this.g.length;D++){const M=this.i(D);P+=(M>=0?M:4294967296+M)*O,O*=4294967296}return P},s.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(pe(this))return"0";if(Se(this))return"-"+Ee(this).toString(P);const O=b(Math.pow(P,6));var D=this;let M="";for(;;){const j=ht(D,O).g;D=Le(D,j.j(O));let X=((D.g.length>0?D.g[0]:D.h)>>>0).toString(P);if(D=j,pe(D))return X+M;for(;X.length<6;)X="0"+X;M=X+M}},s.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function pe(P){if(P.h!=0)return!1;for(let O=0;O<P.g.length;O++)if(P.g[O]!=0)return!1;return!0}function Se(P){return P.h==-1}s.l=function(P){return P=Le(this,P),Se(P)?-1:pe(P)?0:1};function Ee(P){const O=P.g.length,D=[];for(let M=0;M<O;M++)D[M]=~P.g[M];return new m(D,~P.h).add(U)}s.abs=function(){return Se(this)?Ee(this):this},s.add=function(P){const O=Math.max(this.g.length,P.g.length),D=[];let M=0;for(let j=0;j<=O;j++){let X=M+(this.i(j)&65535)+(P.i(j)&65535),k=(X>>>16)+(this.i(j)>>>16)+(P.i(j)>>>16);M=k>>>16,X&=65535,k&=65535,D[j]=k<<16|X}return new m(D,D[D.length-1]&-2147483648?-1:0)};function Le(P,O){return P.add(Ee(O))}s.j=function(P){if(pe(this)||pe(P))return V;if(Se(this))return Se(P)?Ee(this).j(Ee(P)):Ee(Ee(this).j(P));if(Se(P))return Ee(this.j(Ee(P)));if(this.l(se)<0&&P.l(se)<0)return b(this.m()*P.m());const O=this.g.length+P.g.length,D=[];for(var M=0;M<2*O;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(let j=0;j<P.g.length;j++){const X=this.i(M)>>>16,k=this.i(M)&65535,Ct=P.i(j)>>>16,kt=P.i(j)&65535;D[2*M+2*j]+=k*kt,Ne(D,2*M+2*j),D[2*M+2*j+1]+=X*kt,Ne(D,2*M+2*j+1),D[2*M+2*j+1]+=k*Ct,Ne(D,2*M+2*j+1),D[2*M+2*j+2]+=X*Ct,Ne(D,2*M+2*j+2)}for(P=0;P<O;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=O;P<2*O;P++)D[P]=0;return new m(D,0)};function Ne(P,O){for(;(P[O]&65535)!=P[O];)P[O+1]+=P[O]>>>16,P[O]&=65535,O++}function Ye(P,O){this.g=P,this.h=O}function ht(P,O){if(pe(O))throw Error("division by zero");if(pe(P))return new Ye(V,V);if(Se(P))return O=ht(Ee(P),O),new Ye(Ee(O.g),Ee(O.h));if(Se(O))return O=ht(P,Ee(O)),new Ye(Ee(O.g),O.h);if(P.g.length>30){if(Se(P)||Se(O))throw Error("slowDivide_ only works with positive integers.");for(var D=U,M=O;M.l(P)<=0;)D=Ue(D),M=Ue(M);var j=Re(D,1),X=Re(M,1);for(M=Re(M,2),D=Re(D,2);!pe(M);){var k=X.add(M);k.l(P)<=0&&(j=j.add(D),X=k),M=Re(M,1),D=Re(D,1)}return O=Le(P,j.j(O)),new Ye(j,O)}for(j=V;P.l(O)>=0;){for(D=Math.max(1,Math.floor(P.m()/O.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),X=b(D),k=X.j(O);Se(k)||k.l(P)>0;)D-=M,X=b(D),k=X.j(O);pe(X)&&(X=U),j=j.add(X),P=Le(P,k)}return new Ye(j,P)}s.B=function(P){return ht(this,P).h},s.and=function(P){const O=Math.max(this.g.length,P.g.length),D=[];for(let M=0;M<O;M++)D[M]=this.i(M)&P.i(M);return new m(D,this.h&P.h)},s.or=function(P){const O=Math.max(this.g.length,P.g.length),D=[];for(let M=0;M<O;M++)D[M]=this.i(M)|P.i(M);return new m(D,this.h|P.h)},s.xor=function(P){const O=Math.max(this.g.length,P.g.length),D=[];for(let M=0;M<O;M++)D[M]=this.i(M)^P.i(M);return new m(D,this.h^P.h)};function Ue(P){const O=P.g.length+1,D=[];for(let M=0;M<O;M++)D[M]=P.i(M)<<1|P.i(M-1)>>>31;return new m(D,P.h)}function Re(P,O){const D=O>>5;O%=32;const M=P.g.length-D,j=[];for(let X=0;X<M;X++)j[X]=O>0?P.i(X+D)>>>O|P.i(X+D+1)<<32-O:P.i(X+D);return new m(j,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,eE=i,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=b,m.fromString=I,Fa=m}).apply(typeof l_<"u"?l_:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tE,Uu,nE,Rh,xm,rE,iE,sE;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var y=0;y<u.length;++y){var T=u[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function l(u,y){if(y)e:{var T=i;u=u.split(".");for(var C=0;C<u.length-1;C++){var te=u[C];if(!(te in T))break e;T=T[te]}u=u[u.length-1],C=T[u],y=y(C),y!=C&&y!=null&&e(T,u,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(y){var T=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&T.push([C,y[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function v(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function E(u,y,T){return u.call.apply(u.bind,arguments)}function b(u,y,T){return b=E,b.apply(null,arguments)}function I(u,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function V(u,y){function T(){}T.prototype=y.prototype,u.Z=y.prototype,u.prototype=new T,u.prototype.constructor=u,u.Ob=function(C,te,ae){for(var we=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)we[Je-2]=arguments[Je];return y.prototype[te].apply(C,we)}}var U=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function se(u){const y=u.length;if(y>0){const T=Array(y);for(let C=0;C<y;C++)T[C]=u[C];return T}return[]}function pe(u,y){for(let C=1;C<arguments.length;C++){const te=arguments[C];var T=typeof te;if(T=T!="object"?T:te?Array.isArray(te)?"array":T:"null",T=="array"||T=="object"&&typeof te.length=="number"){T=u.length||0;const ae=te.length||0;u.length=T+ae;for(let we=0;we<ae;we++)u[T+we]=te[we]}else u.push(te)}}class Se{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Ee(u){m.setTimeout(()=>{throw u},0)}function Le(){var u=P;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Ne{constructor(){this.h=this.g=null}add(y,T){const C=Ye.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var Ye=new Se(()=>new ht,u=>u.reset());class ht{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Re=!1,P=new Ne,O=()=>{const u=Promise.resolve(void 0);Ue=()=>{u.then(D)}};function D(){for(var u;u=Le();){try{u.h.call(u.g)}catch(T){Ee(T)}var y=Ye;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}Re=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const T=()=>{};m.addEventListener("test",T,y),m.removeEventListener("test",T,y)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function Ct(u,y){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}V(Ct,j),Ct.prototype.init=function(u,y){const T=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(T=="mouseover"?y=u.fromElement:T=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ct.Z.h.call(this)},Ct.prototype.h=function(){Ct.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var kt="closure_listenable_"+(Math.random()*1e6|0),fe=0;function ze(u,y,T,C,te){this.listener=u,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=te,this.key=++fe,this.da=this.fa=!1}function Ve(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dt(u,y,T){for(const C in u)y.call(T,u[C],C,u)}function z(u,y){for(const T in u)y.call(void 0,u[T],T,u)}function ve(u){const y={};for(const T in u)y[T]=u[T];return y}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function je(u,y){let T,C;for(let te=1;te<arguments.length;te++){C=arguments[te];for(T in C)u[T]=C[T];for(let ae=0;ae<Ge.length;ae++)T=Ge[ae],Object.prototype.hasOwnProperty.call(C,T)&&(u[T]=C[T])}}function Oe(u){this.src=u,this.g={},this.h=0}Oe.prototype.add=function(u,y,T,C,te){const ae=u.toString();u=this.g[ae],u||(u=this.g[ae]=[],this.h++);const we=Xe(u,y,C,te);return we>-1?(y=u[we],T||(y.fa=!1)):(y=new ze(y,this.src,ae,!!C,te),y.fa=T,u.push(y)),y};function ot(u,y){const T=y.type;if(T in u.g){var C=u.g[T],te=Array.prototype.indexOf.call(C,y,void 0),ae;(ae=te>=0)&&Array.prototype.splice.call(C,te,1),ae&&(Ve(y),u.g[T].length==0&&(delete u.g[T],u.h--))}}function Xe(u,y,T,C){for(let te=0;te<u.length;++te){const ae=u[te];if(!ae.da&&ae.listener==y&&ae.capture==!!T&&ae.ha==C)return te}return-1}var rn="closure_lm_"+(Math.random()*1e6|0),_t={};function xe(u,y,T,C,te){if(Array.isArray(y)){for(let ae=0;ae<y.length;ae++)xe(u,y[ae],T,C,te);return null}return T=ys(T),u&&u[kt]?u.J(y,T,v(C)?!!C.capture:!1,te):Pt(u,y,T,!1,C,te)}function Pt(u,y,T,C,te,ae){if(!y)throw Error("Invalid event type");const we=v(te)?!!te.capture:!!te;let Je=Qr(u);if(Je||(u[rn]=Je=new Oe(u)),T=Je.add(y,T,C,we,ae),T.proxy)return T;if(C=Yn(),T.proxy=C,C.src=u,C.listener=T,u.addEventListener)X||(te=we),te===void 0&&(te=!1),u.addEventListener(y.toString(),C,te);else if(u.attachEvent)u.attachEvent(ps(y.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Yn(){function u(T){return y.call(u.src,u.listener,T)}const y=br;return u}function gt(u,y,T,C,te){if(Array.isArray(y))for(var ae=0;ae<y.length;ae++)gt(u,y[ae],T,C,te);else C=v(C)?!!C.capture:!!C,T=ys(T),u&&u[kt]?(u=u.i,ae=String(y).toString(),ae in u.g&&(y=u.g[ae],T=Xe(y,T,C,te),T>-1&&(Ve(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete u.g[ae],u.h--)))):u&&(u=Qr(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Xe(y,T,C,te)),(T=u>-1?y[u]:null)&&jn(T))}function jn(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[kt])ot(y.i,u);else{var T=u.type,C=u.proxy;y.removeEventListener?y.removeEventListener(T,C,u.capture):y.detachEvent?y.detachEvent(ps(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=Qr(y))?(ot(T,u),T.h==0&&(T.src=null,y[rn]=null)):Ve(u)}}}function ps(u){return u in _t?_t[u]:_t[u]="on"+u}function br(u,y){if(u.da)u=!0;else{y=new Ct(y,this);const T=u.listener,C=u.ha||u.src;u.fa&&jn(u),u=T.call(C,y)}return u}function Qr(u){return u=u[rn],u instanceof Oe?u:null}var gs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ys(u){return typeof u=="function"?u:(u[gs]||(u[gs]=function(y){return u.handleEvent(y)}),u[gs])}function hn(){M.call(this),this.i=new Oe(this),this.M=this,this.G=null}V(hn,M),hn.prototype[kt]=!0,hn.prototype.removeEventListener=function(u,y,T,C){gt(this,u,y,T,C)};function sn(u,y){var T,C=u.G;if(C)for(T=[];C;C=C.G)T.push(C);if(u=u.M,C=y.type||y,typeof y=="string")y=new j(y,u);else if(y instanceof j)y.target=y.target||u;else{var te=y;y=new j(C,u),je(y,te)}te=!0;let ae,we;if(T)for(we=T.length-1;we>=0;we--)ae=y.g=T[we],te=xn(ae,C,!0,y)&&te;if(ae=y.g=u,te=xn(ae,C,!0,y)&&te,te=xn(ae,C,!1,y)&&te,T)for(we=0;we<T.length;we++)ae=y.g=T[we],te=xn(ae,C,!1,y)&&te}hn.prototype.N=function(){if(hn.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const T=u.g[y];for(let C=0;C<T.length;C++)Ve(T[C]);delete u.g[y],u.h--}}this.G=null},hn.prototype.J=function(u,y,T,C){return this.i.add(String(u),y,!1,T,C)},hn.prototype.K=function(u,y,T,C){return this.i.add(String(u),y,!0,T,C)};function xn(u,y,T,C){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let te=!0;for(let ae=0;ae<y.length;++ae){const we=y[ae];if(we&&!we.da&&we.capture==T){const Je=we.listener,Vt=we.ha||we.src;we.fa&&ot(u.i,we),te=Je.call(Vt,C)!==!1&&te}}return te&&!C.defaultPrevented}function Xo(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:m.setTimeout(u,y||0)}function Fi(u){u.g=Xo(()=>{u.g=null,u.i&&(u.i=!1,Fi(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class dr extends M{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Fi(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(u){M.call(this),this.h=u,this.g={}}V(Mr,M);var bi=[];function vs(u){dt(u.g,function(y,T){this.g.hasOwnProperty(T)&&jn(y)},u),u.g={}}Mr.prototype.N=function(){Mr.Z.N.call(this),vs(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=m.JSON.stringify,eo=m.JSON.parse,_s=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Xr(){}function Es(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){j.call(this,"d")}V(qt,j);function Me(){j.call(this,"c")}V(Me,j);var fn={},Zt=null;function Ti(){return Zt=Zt||new hn}fn.Ia="serverreachability";function De(u){j.call(this,fn.Ia,u)}V(De,j);function wi(u){const y=Ti();sn(y,new De(y))}fn.STAT_EVENT="statevent";function Ki(u,y){j.call(this,fn.STAT_EVENT,u),this.stat=y}V(Ki,j);function Jt(u){const y=Ti();sn(y,new Ki(y,u))}fn.Ja="timingevent";function Pr(u,y){j.call(this,fn.Ja,u),this.size=y}V(Pr,j);function wr(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function Lr(){this.g=!0}Lr.prototype.ua=function(){this.g=!1};function Ql(u,y,T,C,te,ae){u.info(function(){if(u.g)if(ae){var we="",Je=ae.split("&");for(let Nt=0;Nt<Je.length;Nt++){var Vt=Je[Nt].split("=");if(Vt.length>1){const Qt=Vt[0];Vt=Vt[1];const Xn=Qt.split("_");we=Xn.length>=2&&Xn[1]=="type"?we+(Qt+"="+Vt+"&"):we+(Qt+"=redacted&")}}}else we=null;else we=ae;return"XMLHTTP REQ ("+C+") [attempt "+te+"]: "+y+`
`+T+`
`+we})}function Si(u,y,T,C,te,ae,we){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+te+"]: "+y+`
`+T+`
`+ae+" "+we})}function nr(u,y,T,C){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Wr(u,T)+(C?" "+C:"")})}function bs(u,y){u.info(function(){return"TIMEOUT: "+y})}Lr.prototype.info=function(){};function Wr(u,y){if(!u.g)return y;if(!y)return null;try{const ae=JSON.parse(y);if(ae){for(u=0;u<ae.length;u++)if(Array.isArray(ae[u])){var T=ae[u];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var te=C[0];if(te!="noop"&&te!="stop"&&te!="close")for(let we=1;we<C.length;we++)C[we]=""}}}}return Tr(ae)}catch{return y}}var Ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},en={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},to;function Ai(){}V(Ai,Xr),Ai.prototype.g=function(){return new XMLHttpRequest},to=new Ai;function Ur(u){return encodeURIComponent(String(u))}function na(u){var y=1;u=u.split(":");const T=[];for(;y>0&&u.length;)T.push(u.shift()),y--;return u.length&&T.push(u.join(":")),T}function Dn(u,y,T,C){this.j=u,this.i=y,this.l=T,this.S=C||1,this.V=new Mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var tn={},On={};function $r(u,y,T){u.M=1,u.A=xi(an(y)),u.u=T,u.R=!0,Wo(u,null)}function Wo(u,y){u.F=Date.now(),Ri(u),u.B=an(u.A);var T=u.B,C=u.S;Array.isArray(C)||(C=[String(C)]),_n(T.i,"t",C),u.C=0,T=u.j.L,u.h=new Ut,u.g=si(u.j,T?y:null,!u.u),u.P>0&&(u.O=new dr(b(u.Y,u,u.g),u.P)),y=u.V,T=u.g,C=u.ba;var te="readystatechange";Array.isArray(te)||(te&&(bi[0]=te.toString()),te=bi);for(let ae=0;ae<te.length;ae++){const we=xe(T,te[ae],C||y.handleEvent,!1,y.h||y);if(!we)break;y.g[we.key]=we}y=u.J?ve(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),wi(),Ql(u.i,u.v,u.B,u.l,u.S,u.u)}Dn.prototype.ba=function(u){u=u.target;const y=this.O;y&&Bn(u)==3?y.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const Je=Bn(this.g),Vt=this.g.ya(),Nt=this.g.ca();if(!(Je<3)&&(Je!=3||this.g&&(this.h.h||this.g.la()||Ss(this.g)))){this.K||Je!=4||Vt==7||(Vt==8||Nt<=0?wi(3):wi(2)),It(this);var y=this.g.ca();this.X=y;var T=Zr(this);if(this.o=y==200,Si(this.i,this.v,this.B,this.l,this.S,Je,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,te=this.g;if((C=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(C)){var ae=C;break t}}ae=null}if(u=ae)nr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gt(this,u);else{this.o=!1,this.m=3,Jt(12),nn(this),Nn(this);break e}}if(this.R){u=!0;let Qt;for(;!this.K&&this.C<T.length;)if(Qt=pr(this,T),Qt==On){Je==4&&(this.m=4,Jt(14),u=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==tn){this.m=4,Jt(15),nr(this.i,this.l,T,"[Invalid Chunk]"),u=!1;break}else nr(this.i,this.l,Qt,null),Gt(this,Qt);if(ra(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||T.length!=0||this.h.h||(this.m=1,Jt(16),u=!1),this.o=this.o&&u,!u)nr(this.i,this.l,T,"[Invalid Chunked Response]"),nn(this),Nn(this);else if(T.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),uo(we),we.P=!0,Jt(11))}}else nr(this.i,this.l,T,null),Gt(this,T);Je==4&&nn(this),this.o&&!this.K&&(Je==4?xs(this.j,this):(this.o=!1,Ri(this)))}else ti(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),nn(this),Nn(this)}}}catch{}finally{}};function Zr(u){if(!ra(u))return u.g.la();const y=Ss(u.g);if(y==="")return"";let T="";const C=y.length,te=Bn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return nn(u),Nn(u),"";u.h.i=new m.TextDecoder}for(let ae=0;ae<C;ae++)u.h.h=!0,T+=u.h.i.decode(y[ae],{stream:!(te&&ae==C-1)});return y.length=0,u.h.g+=T,u.C=0,u.h.g}function ra(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function pr(u,y){var T=u.C,C=y.indexOf(`
`,T);return C==-1?On:(T=Number(y.substring(T,C)),isNaN(T)?tn:(C+=1,C+T>y.length?On:(y=y.slice(C,C+T),u.C=C+T,y)))}Dn.prototype.cancel=function(){this.K=!0,nn(this)};function Ri(u){u.T=Date.now()+u.H,Sr(u,u.H)}function Sr(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=wr(b(u.aa,u),y)}function It(u){u.D&&(m.clearTimeout(u.D),u.D=null)}Dn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(bs(this.i,this.B),this.M!=2&&(wi(),Jt(17)),nn(this),this.m=2,Nn(this)):Sr(this,this.T-u)};function Nn(u){u.j.I==0||u.K||xs(u.j,u)}function nn(u){It(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,vs(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function Gt(u,y){try{var T=u.j;if(T.I!=0&&(T.g==u||gn(T.h,u))){if(!u.L&&gn(T.h,u)&&T.I==3){try{var C=T.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var te=C;if(te[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<u.F)Ji(T),ri(T);else break e;ua(T),Jt(18)}}else T.xa=te[1],0<T.xa-T.K&&te[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=wr(b(T.Va,T),6e3));jr(T.h)<=1&&T.ta&&(T.ta=void 0)}else zr(T,11)}else if((u.L||T.g==u)&&Ji(T),!k(y))for(te=T.Ba.g.parse(y),y=0;y<te.length;y++){let Nt=te[y];const Qt=Nt[0];if(!(Qt<=T.K))if(T.K=Qt,Nt=Nt[1],T.I==2)if(Nt[0]=="c"){T.M=Nt[1],T.ba=Nt[2];const Xn=Nt[3];Xn!=null&&(T.ka=Xn,T.j.info("VER="+T.ka));const oi=Nt[4];oi!=null&&(T.za=oi,T.j.info("SVER="+T.za));const Dr=Nt[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(C=1.5*Dr,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const qr=u.g;if(qr){const Or=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Or){var ae=C.h;ae.g||Or.indexOf("spdy")==-1&&Or.indexOf("quic")==-1&&Or.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(ia(ae,ae.h),ae.h=null))}if(C.G){const fa=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(C.wa=fa,yt(C.J,C.G,fa))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-u.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var we=u;if(C.na=es(C,C.L?C.ba:null,C.W),we.L){Yi(C.h,we);var Je=we,Vt=C.O;Vt&&(Je.H=Vt),Je.D&&(It(Je),Ri(Je)),C.g=we}else Cs(C);T.i.length>0&&Vi(T)}else Nt[0]!="stop"&&Nt[0]!="close"||zr(T,7);else T.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?zr(T,7):As(T):Nt[0]!="noop"&&T.l&&T.l.qa(Nt),T.A=0)}}wi(4)}catch{}}var Ci=class{constructor(u,y){this.g=u,this.map=y}};function Gi(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ar(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function jr(u){return u.h?1:u.g?u.g.size:0}function gn(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function ia(u,y){u.g?u.g.add(y):u.h=y}function Yi(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Gi.prototype.cancel=function(){if(this.i=sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sa(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const T of u.g.values())y=y.concat(T.G);return y}return se(u.i)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ts(u,y){if(u){u=u.split("&");for(let T=0;T<u.length;T++){const C=u[T].indexOf("=");let te,ae=null;C>=0?(te=u[T].substring(0,C),ae=u[T].substring(C+1)):te=u[T],y(te,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function rr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof rr?(this.l=u.l,rt(this,u.j),this.o=u.o,this.g=u.g,Rr(this,u.u),this.h=u.h,Ii(this,Oi(u.i)),this.m=u.m):u&&(y=String(u).match(mt))?(this.l=!1,rt(this,y[1]||"",!0),this.o=Cr(y[2]||""),this.g=Cr(y[3]||"",!0),Rr(this,y[4]),this.h=Cr(y[5]||"",!0),Ii(this,y[6]||"",!0),this.m=Cr(y[7]||"")):(this.l=!1,this.i=new Qi(null,this.l))}rr.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Jr(y,Di,!0),":");var T=this.g;return(T||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Jr(y,Di,!0),"@"),u.push(Ur(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&u.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&u.push("/"),u.push(Jr(T,T.charAt(0)=="/"?gr:no,!0))),(T=this.i.toString())&&u.push("?",T),(T=this.m)&&u.push("#",Jr(T,ro)),u.join("")},rr.prototype.resolve=function(u){const y=an(this);let T=!!u.j;T?rt(y,u.j):T=!!u.o,T?y.o=u.o:T=!!u.g,T?y.g=u.g:T=u.u!=null;var C=u.h;if(T)Rr(y,u.u);else if(T=!!u.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var te=y.h.lastIndexOf("/");te!=-1&&(C=y.h.slice(0,te+1)+C)}if(te=C,te==".."||te==".")C="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){C=te.lastIndexOf("/",0)==0,te=te.split("/");const ae=[];for(let we=0;we<te.length;){const Je=te[we++];Je=="."?C&&we==te.length&&ae.push(""):Je==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),C&&we==te.length&&ae.push("")):(ae.push(Je),C=!0)}C=ae.join("/")}else C=te}return T?y.h=C:T=u.i.toString()!=="",T?Ii(y,Oi(u.i)):T=!!u.m,T&&(y.m=u.m),y};function an(u){return new rr(u)}function rt(u,y,T){u.j=T?Cr(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Rr(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Ii(u,y,T){y instanceof Qi?(u.i=y,yr(u.i,u.l)):(T||(y=Jr(y,Ir)),u.i=new Qi(y,u.l))}function yt(u,y,T){u.i.set(y,T)}function xi(u){return yt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Cr(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Jr(u,y,T){return typeof u=="string"?(u=encodeURI(u).replace(y,Qn),T&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Qn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Di=/[#\/\?@]/g,no=/[#\?:]/g,gr=/[#\?]/g,Ir=/[#\?@]/g,ro=/#/g;function Qi(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function et(u){u.g||(u.g=new Map,u.h=0,u.i&&Ts(u.i,function(y,T){u.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}s=Qi.prototype,s.add=function(u,y){et(this),this.i=null,u=Br(this,u);let T=this.g.get(u);return T||this.g.set(u,T=[]),T.push(y),this.h+=1,this};function aa(u,y){et(u),y=Br(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function io(u,y){return et(u),y=Br(u,y),u.g.has(y)}s.forEach=function(u,y){et(this),this.g.forEach(function(T,C){T.forEach(function(te){u.call(y,te,C,this)},this)},this)};function so(u,y){et(u);let T=[];if(typeof y=="string")io(u,y)&&(T=T.concat(u.g.get(Br(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)T=T.concat(u[y]);return T}s.set=function(u,y){return et(this),this.i=null,u=Br(this,u),io(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=so(this,u),u.length>0?String(u[0]):y):y};function _n(u,y,T){aa(u,y),T.length>0&&(u.i=null,u.g.set(Br(u,y),se(T)),u.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var T=y[C];const te=Ur(T);T=so(this,T);for(let ae=0;ae<T.length;ae++){let we=te;T[ae]!==""&&(we+="="+Ur(T[ae])),u.push(we)}}return this.i=u.join("&")};function Oi(u){const y=new Qi;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function Br(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function yr(u,y){y&&!u.j&&(et(u),u.i=null,u.g.forEach(function(T,C){const te=C.toLowerCase();C!=te&&(aa(this,C),_n(this,te,T))},u)),u.j=y}function oa(u,y){const T=new Lr;if(m.Image){const C=new Image;C.onload=I(St,T,"TestLoadImage: loaded",!0,y,C),C.onerror=I(St,T,"TestLoadImage: error",!1,y,C),C.onabort=I(St,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=I(St,T,"TestLoadImage: timeout",!1,y,C),m.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else y(!1)}function la(u,y){const T=new Lr,C=new AbortController,te=setTimeout(()=>{C.abort(),St(T,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:C.signal}).then(ae=>{clearTimeout(te),ae.ok?St(T,"TestPingServer: ok",!0,y):St(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(te),St(T,"TestPingServer: error",!1,y)})}function St(u,y,T,C,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),C(T)}catch{}}function kn(){this.g=new _s}function ei(u){this.i=u.Sb||null,this.h=u.ab||!1}V(ei,Xr),ei.prototype.g=function(){return new xr(this.i,this.h)};function xr(u,y){hn.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}V(xr,hn),s=xr.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,Ni(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||m).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,En(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ws(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ws(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?En(this):Ni(this),this.readyState==3&&ws(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,En(this))},s.Na=function(u){this.g&&(this.response=u,En(this))},s.ga=function(){this.g&&En(this)};function En(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ni(u)}s.setRequestHeader=function(u,y){this.A.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,u.push(T[0]+": "+T[1]),T=y.next();return u.join(`\r
`)};function Ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vn(u){let y="";return dt(u,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function ir(u,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Vn(T),typeof u=="string"?T!=null&&Ur(T):yt(u,y,T))}function Lt(u){hn.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}V(Lt,hn);var Xi=/^https?$/i,Wi=["POST","PUT"];s=Lt.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():to.g(),this.g.onreadystatechange=U(b(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(ae){ki(this,ae);return}if(u=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var te in C)T.set(te,C[te]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ae of C.keys())T.set(ae,C.get(ae));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(ae=>ae.toLowerCase()=="content-type"),te=m.FormData&&u instanceof m.FormData,!(Array.prototype.indexOf.call(Wi,y,void 0)>=0)||C||te||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,we]of T)this.g.setRequestHeader(ae,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(ae){ki(this,ae)}};function ki(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,$i(u),Yt(u)}function $i(u){u.A||(u.A=!0,sn(u,"complete"),sn(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,sn(this,"complete"),sn(this,"abort"),Yt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),Lt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ao(this):this.Xa())},s.Xa=function(){ao(this)};function ao(u){if(u.h&&typeof c<"u"){if(u.v&&Bn(u)==4)setTimeout(u.Ca.bind(u),0);else if(sn(u,"readystatechange"),Bn(u)==4){u.h=!1;try{const ae=u.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=ae===0){let we=String(u.D).match(mt)[1]||null;!we&&m.self&&m.self.location&&(we=m.self.location.protocol.slice(0,-1)),C=!Xi.test(we?we.toLowerCase():"")}T=C}if(T)sn(u,"complete"),sn(u,"success");else{u.o=6;try{var te=Bn(u)>2?u.g.statusText:""}catch{te=""}u.l=te+" ["+u.ca()+"]",$i(u)}}finally{Yt(u)}}}}function Yt(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const T=u.g;u.g=null,y||sn(u,"ready");try{T.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Bn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),eo(y)}};function Ss(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ti(u){const y={};u=(u.g&&Bn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(k(u[C]))continue;var T=na(u[C]);const te=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ae=y[te]||[];y[te]=ae,ae.push(T)}z(y,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ni(u,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[u]||y}function Zi(u){this.za=0,this.i=[],this.j=new Lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ni("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ni("baseRetryDelayMs",5e3,u),this.Za=ni("retryDelaySeedMs",1e4,u),this.Ta=ni("forwardChannelMaxRetries",2,u),this.va=ni("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Gi(u&&u.concurrentRequestLimit),this.Ba=new kn,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Zi.prototype,s.ka=8,s.I=1,s.connect=function(u,y,T,C){Jt(0),this.W=u,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=es(this,null,this.W),Vi(this)};function As(u){if(Rs(u),u.I==3){var y=u.V++,T=an(u.J);if(yt(T,"SID",u.M),yt(T,"RID",y),yt(T,"TYPE","terminate"),ii(u,T),y=new Dn(u,u.j,y),y.M=2,y.A=xi(an(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&m.Image&&(new Image().src=y.A,T=!0),T||(y.g=si(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ri(y)}bn(u)}function ri(u){u.g&&(uo(u),u.g.cancel(),u.g=null)}function Rs(u){ri(u),u.v&&(m.clearTimeout(u.v),u.v=null),Ji(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&m.clearTimeout(u.m),u.m=null)}function Vi(u){if(!Ar(u.h)&&!u.m){u.m=!0;var y=u.Ea;Ue||O(),Re||(Ue(),Re=!0),P.add(y,u),u.D=0}}function oo(u,y){return jr(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=wr(b(u.Ea,u,y),ca(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const te=new Dn(this,this.j,u);let ae=this.o;if(this.U&&(ae?(ae=ve(ae),je(ae,this.U)):ae=this.U),this.u!==null||this.R||(te.J=ae,ae=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Mi(this,te,y),T=an(this.J),yt(T,"RID",u),yt(T,"CVER",22),this.G&&yt(T,"X-HTTP-Session-Id",this.G),ii(this,T),ae&&(this.R?y="headers="+Ur(Vn(ae))+"&"+y:this.u&&ir(T,this.u,ae)),ia(this.h,te),this.Ra&&yt(T,"TYPE","init"),this.S?(yt(T,"$req",y),yt(T,"SID","null"),te.U=!0,$r(te,T,null)):$r(te,T,y),this.I=2}}else this.I==3&&(u?lo(this,u):this.i.length==0||Ar(this.h)||lo(this))};function lo(u,y){var T;y?T=y.l:T=u.V++;const C=an(u.J);yt(C,"SID",u.M),yt(C,"RID",T),yt(C,"AID",u.K),ii(u,C),u.u&&u.o&&ir(C,u.u,u.o),T=new Dn(u,u.j,T,u.D+1),u.u===null&&(T.J=u.o),y&&(u.i=y.G.concat(u.i)),y=Mi(u,T,1e3),T.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ia(u.h,T),$r(T,C,y)}function ii(u,y){u.H&&dt(u.H,function(T,C){yt(y,C,T)}),u.l&&dt({},function(T,C){yt(y,C,T)})}function Mi(u,y,T){T=Math.min(u.i.length,T);const C=u.l?b(u.l.Ka,u.l,u):null;e:{var te=u.i;let Je=-1;for(;;){const Vt=["count="+T];Je==-1?T>0?(Je=te[0].g,Vt.push("ofs="+Je)):Je=0:Vt.push("ofs="+Je);let Nt=!0;for(let Qt=0;Qt<T;Qt++){var ae=te[Qt].g;const Xn=te[Qt].map;if(ae-=Je,ae<0)Je=Math.max(0,te[Qt].g-100),Nt=!1;else try{ae="req"+ae+"_"||"";try{var we=Xn instanceof Map?Xn:Object.entries(Xn);for(const[oi,Dr]of we){let qr=Dr;v(Dr)&&(qr=Tr(Dr)),Vt.push(ae+oi+"="+encodeURIComponent(qr))}}catch(oi){throw Vt.push(ae+"type="+encodeURIComponent("_badmap")),oi}}catch{C&&C(Xn)}}if(Nt){we=Vt.join("&");break e}}we=void 0}return u=u.i.splice(0,T),y.G=u,we}function Cs(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;Ue||O(),Re||(Ue(),Re=!0),P.add(y,u),u.A=0}}function ua(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=wr(b(u.Da,u),ca(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Is(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=wr(b(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),ri(this),Is(this))};function uo(u){u.B!=null&&(m.clearTimeout(u.B),u.B=null)}function Is(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=an(u.na);yt(y,"RID","rpc"),yt(y,"SID",u.M),yt(y,"AID",u.K),yt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&yt(y,"TO",u.ia),yt(y,"TYPE","xmlhttp"),ii(u,y),u.u&&u.o&&ir(y,u.u,u.o),u.O&&(u.g.H=u.O);var T=u.g;u=u.ba,T.M=1,T.A=xi(an(y)),T.u=null,T.R=!0,Wo(T,u)}s.Va=function(){this.C!=null&&(this.C=null,ri(this),ua(this),Jt(19))};function Ji(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function xs(u,y){var T=null;if(u.g==y){Ji(u),uo(u),u.g=null;var C=2}else if(gn(u.h,y))T=y.G,Yi(u.h,y),C=1;else return;if(u.I!=0){if(y.o)if(C==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var te=u.D;C=Ti(),sn(C,new Pr(C,T)),Vi(u)}else Cs(u);else if(te=y.m,te==3||te==0&&y.X>0||!(C==1&&oo(u,y)||C==2&&ua(u)))switch(T&&T.length>0&&(y=u.h,y.i=y.i.concat(T)),te){case 1:zr(u,5);break;case 4:zr(u,10);break;case 3:zr(u,6);break;default:zr(u,2)}}}function ca(u,y){let T=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(T*=2),T*y}function zr(u,y){if(u.j.info("Error code "+y),y==2){var T=b(u.bb,u),C=u.Ua;const te=!C;C=new rr(C||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||rt(C,"https"),xi(C),te?oa(C.toString(),T):la(C.toString(),T)}else Jt(2);u.I=0,u.l&&u.l.pa(y),bn(u),Rs(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function bn(u){if(u.I=0,u.ja=[],u.l){const y=sa(u.h);(y.length!=0||u.i.length!=0)&&(pe(u.ja,y),pe(u.ja,u.i),u.h.i.length=0,se(u.i),u.i.length=0),u.l.oa()}}function es(u,y,T){var C=T instanceof rr?an(T):new rr(T);if(C.g!="")y&&(C.g=y+"."+C.g),Rr(C,C.u);else{var te=m.location;C=te.protocol,y=y?y+"."+te.hostname:te.hostname,te=+te.port;const ae=new rr(null);C&&rt(ae,C),y&&(ae.g=y),te&&Rr(ae,te),T&&(ae.h=T),C=ae}return T=u.G,y=u.wa,T&&y&&yt(C,T,y),yt(C,"VER",u.ka),ii(u,C),C}function si(u,y,T){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new Lt(new ei({ab:T})):new Lt(u.ma),y.Fa(u.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function co(){}s=co.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Pi(){}Pi.prototype.g=function(u,y){return new zn(u,y)};function zn(u,y){hn.call(this),this.g=new Zi(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!k(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ai(this)}V(zn,hn),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){As(this.g)},zn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var T={};T.__data__=u,u=T}else this.v&&(T={},T.__data__=Tr(u),u=T);y.i.push(new Ci(y.Ya++,u)),y.I==3&&Vi(y)},zn.prototype.N=function(){this.g.l=null,delete this.j,As(this.g),delete this.g,zn.Z.N.call(this)};function ha(u){qt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const T in y){u=T;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}V(ha,qt);function Ds(){Me.call(this),this.status=1}V(Ds,Me);function ai(u){this.g=u}V(ai,co),ai.prototype.ra=function(){sn(this.g,"a")},ai.prototype.qa=function(u){sn(this.g,new ha(u))},ai.prototype.pa=function(u){sn(this.g,new Ds)},ai.prototype.oa=function(){sn(this.g,"b")},Pi.prototype.createWebChannel=Pi.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,sE=function(){return new Pi},iE=function(){return Ti()},rE=fn,xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,Rh=Ot,en.COMPLETE="complete",nE=en,Es.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",hn.prototype.listen=hn.prototype.J,Uu=Es,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,tE=Lt}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.8.0";function iR(s){Fl=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Xm("@firebase/firestore");function Sl(){return Bo.logLevel}function ke(s,...e){if(Bo.logLevel<=Et.DEBUG){const n=e.map(op);Bo.debug(`Firestore (${Fl}): ${s}`,...n)}}function Js(s,...e){if(Bo.logLevel<=Et.ERROR){const n=e.map(op);Bo.error(`Firestore (${Fl}): ${s}`,...n)}}function Ml(s,...e){if(Bo.logLevel<=Et.WARN){const n=e.map(op);Bo.warn(`Firestore (${Fl}): ${s}`,...n)}}function op(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,aE(s,i,n)}function aE(s,e,n){let i=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Js(i),new Error(i)}function Mt(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||aE(e,l,i)}function at(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends ta{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cr.UNAUTHENTICATED)))}shutdown(){}}class aR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class oR{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Mt(this.o===void 0,42304);let i=this.i;const l=E=>this.i!==i?(i=this.i,n(E)):Promise.resolve();let c=new Ka;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ka,e.enqueueRetryable((()=>l(this.currentUser)))};const m=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await l(this.currentUser)}))},v=E=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>v(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ka)}}),0),m()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Mt(typeof i.accessToken=="string",31837,{l:i}),new oE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class lR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class uR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new lR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class u_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Mt(this.o===void 0,3512);const i=c=>{c.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const m=c.token!==this.m;return this.m=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const l=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new u_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new u_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=hR(40);for(let c=0;c<l.length;++c)i.length<20&&l[c]<n&&(i+=e.charAt(l[c]%62))}return i}}function bt(s,e){return s<e?-1:s>e?1:0}function Dm(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),c=e.charAt(i);if(l!==c)return dm(l)===dm(c)?bt(l,c):dm(l)?1:-1}return bt(s.length,e.length)}const fR=55296,dR=57343;function dm(s){const e=s.charCodeAt(0);return e>=fR&&e<=dR}function Pl(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="__name__";class os{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ze(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return os.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const c=os.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return bt(e.length,n.length)}static compareSegments(e,n){const i=os.isNumericId(e),l=os.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?os.extractNumericId(e).compare(os.extractNumericId(n)):Dm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fa.fromString(e.substring(4,e.length-2))}}class un extends os{construct(e,n,i){return new un(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new qe(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new un(n)}static emptyPath(){return new un([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends os{construct(e,n,i){return new er(e,n,i)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c_}static keyField(){return new er([c_])}static fromServerFormat(e){const n=[];let i="",l=0;const c=()=>{if(i.length===0)throw new qe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let m=!1;for(;l<e.length;){const v=e[l];if(v==="\\"){if(l+1===e.length)throw new qe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[l+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new qe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=E,l+=2}else v==="`"?(m=!m,l++):v!=="."||m?(i+=v,l++):(c(),l++)}if(c(),m)throw new qe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(un.fromString(e))}static fromName(e){return new Qe(un.fromString(e).popFirst(5))}static empty(){return new Qe(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new un(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(s,e,n){if(!n)throw new qe(ye.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function gR(s,e,n,i){if(e===!0&&i===!0)throw new qe(ye.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function h_(s){if(!Qe.isDocumentKey(s))throw new qe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function lE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function up(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ze(12329,{type:typeof s})}function Ju(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new qe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=up(s);throw new qe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(s,e){const n={typeString:s};return e&&(n.value=e),n}function dc(s,e){if(!lE(s))throw new qe(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const m=s[i];if(l&&typeof m!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(c!==void 0&&m!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new qe(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-62135596800,d_=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*d_);return new $t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<f_)throw new qe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d_}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dc(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-f_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:In("string",$t._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new $t(0,0))}static max(){return new nt(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=-1;function yR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=nt.fromTimestamp(i===1e9?new $t(n+1,0):new $t(n,i));return new Ga(l,Qe.empty(),e)}function vR(s){return new Ga(s.readTime,s.key,ec)}class Ga{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ga(nt.min(),Qe.empty(),ec)}static max(){return new Ga(nt.max(),Qe.empty(),ec)}}function _R(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(s.documentKey,e.documentKey),n!==0?n:bt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(s){if(s.code!==ye.FAILED_PRECONDITION||s.message!==ER)throw s;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((i,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,i)=>{n(e)}))}static reject(e){return new me(((n,i)=>{i(e)}))}static waitFor(e){return new me(((n,i)=>{let l=0,c=0,m=!1;e.forEach((v=>{++l,v.next((()=>{++c,m&&c===l&&n()}),(E=>i(E)))})),m=!0,c===l&&n()}))}static or(e){let n=me.resolve(!1);for(const i of e)n=n.next((l=>l?me.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,c)=>{i.push(n.call(this,l,c))})),this.waitFor(i)}static mapArray(e,n){return new me(((i,l)=>{const c=e.length,m=new Array(c);let v=0;for(let E=0;E<c;E++){const b=E;n(e[b]).next((I=>{m[b]=I,++v,v===c&&i(m)}),(I=>l(I)))}}))}static doWhile(e,n){return new me(((i,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):i()};c()}))}}function TR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=-1;function af(s){return s==null}function Bh(s){return s===0&&1/s==-1/0}function wR(s){return typeof s=="number"&&Number.isInteger(s)&&!Bh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="";function SR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=m_(e)),e=AR(s.get(n),e);return m_(e)}function AR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case uE:n+="";break;default:n+=c}}return n}function m_(s){return s+uE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ko(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function cE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,n,i,l,c){this.key=e,this.value=n,this.color=i??Jn.RED,this.left=l??Jn.EMPTY,this.right=c??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,c){return new Jn(e??this.key,n??this.value,i??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const c=i(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,i),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Jn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,i,l,c){return this}insert(e,n,i){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new g_(this.data.getIterator())}getIteratorFrom(e){return new g_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class g_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new zi([])}unionWith(e){let n=new Un(er.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hE("Invalid base64 string: "+c):c}})(e);return new tr(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let m=0;m<l.length;++m)c+=String.fromCharCode(l[m]);return c})(e);return new tr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ya(s){if(Mt(!!s,39018),typeof s=="string"){let e=0;const n=RR.exec(s);if(Mt(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vn(s.seconds),nanos:vn(s.nanos)}}function vn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Qa(s){return typeof s=="string"?tr.fromBase64String(s):tr.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="server_timestamp",dE="__type__",mE="__previous_value__",pE="__local_write_time__";function hp(s){var n,i;return((i=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[dE])==null?void 0:i.stringValue)===fE}function of(s){const e=s.mapValue.fields[mE];return hp(e)?of(e):e}function tc(s){const e=Ya(s.mapValue.fields[pE].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,i,l,c,m,v,E,b,I,V){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=c,this.forceLongPolling=m,this.autoDetectLongPolling=v,this.longPollingOptions=E,this.useFetchStreams=b,this.isUsingEmulator=I,this.apiKey=V}}const zh="(default)";class nc{constructor(e,n){this.projectId=e,this.database=n||zh}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database===zh}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}function IR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new qe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__type__",xR="__max__",vh={mapValue:{}},yE="__vector__",qh="value";function Xa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?hp(s)?4:OR(s)?9007199254740991:DR(s)?10:11:Ze(28295,{value:s})}function ds(s,e){if(s===e)return!0;const n=Xa(s);if(n!==Xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return tc(s).isEqual(tc(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const m=Ya(l.timestampValue),v=Ya(c.timestampValue);return m.seconds===v.seconds&&m.nanos===v.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Qa(l.bytesValue).isEqual(Qa(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return vn(l.geoPointValue.latitude)===vn(c.geoPointValue.latitude)&&vn(l.geoPointValue.longitude)===vn(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return vn(l.integerValue)===vn(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const m=vn(l.doubleValue),v=vn(c.doubleValue);return m===v?Bh(m)===Bh(v):isNaN(m)&&isNaN(v)}return!1})(s,e);case 9:return Pl(s.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return(function(l,c){const m=l.mapValue.fields||{},v=c.mapValue.fields||{};if(p_(m)!==p_(v))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(v[E]===void 0||!ds(m[E],v[E])))return!1;return!0})(s,e);default:return Ze(52216,{left:s})}}function rc(s,e){return(s.values||[]).find((n=>ds(n,e)))!==void 0}function Ll(s,e){if(s===e)return 0;const n=Xa(s),i=Xa(e);if(n!==i)return bt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(s.booleanValue,e.booleanValue);case 2:return(function(c,m){const v=vn(c.integerValue||c.doubleValue),E=vn(m.integerValue||m.doubleValue);return v<E?-1:v>E?1:v===E?0:isNaN(v)?isNaN(E)?0:-1:1})(s,e);case 3:return y_(s.timestampValue,e.timestampValue);case 4:return y_(tc(s),tc(e));case 5:return Dm(s.stringValue,e.stringValue);case 6:return(function(c,m){const v=Qa(c),E=Qa(m);return v.compareTo(E)})(s.bytesValue,e.bytesValue);case 7:return(function(c,m){const v=c.split("/"),E=m.split("/");for(let b=0;b<v.length&&b<E.length;b++){const I=bt(v[b],E[b]);if(I!==0)return I}return bt(v.length,E.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,m){const v=bt(vn(c.latitude),vn(m.latitude));return v!==0?v:bt(vn(c.longitude),vn(m.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return v_(s.arrayValue,e.arrayValue);case 10:return(function(c,m){var U,se,pe,Se;const v=c.fields||{},E=m.fields||{},b=(U=v[qh])==null?void 0:U.arrayValue,I=(se=E[qh])==null?void 0:se.arrayValue,V=bt(((pe=b==null?void 0:b.values)==null?void 0:pe.length)||0,((Se=I==null?void 0:I.values)==null?void 0:Se.length)||0);return V!==0?V:v_(b,I)})(s.mapValue,e.mapValue);case 11:return(function(c,m){if(c===vh.mapValue&&m===vh.mapValue)return 0;if(c===vh.mapValue)return 1;if(m===vh.mapValue)return-1;const v=c.fields||{},E=Object.keys(v),b=m.fields||{},I=Object.keys(b);E.sort(),I.sort();for(let V=0;V<E.length&&V<I.length;++V){const U=Dm(E[V],I[V]);if(U!==0)return U;const se=Ll(v[E[V]],b[I[V]]);if(se!==0)return se}return bt(E.length,I.length)})(s.mapValue,e.mapValue);default:throw Ze(23264,{he:n})}}function y_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return bt(s,e);const n=Ya(s),i=Ya(e),l=bt(n.seconds,i.seconds);return l!==0?l:bt(n.nanos,i.nanos)}function v_(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const c=Ll(n[l],i[l]);if(c)return c}return bt(n.length,i.length)}function Ul(s){return Om(s)}function Om(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Ya(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Qa(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Qe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const c of n.values||[])l?l=!1:i+=",",i+=Om(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const m of i)c?c=!1:l+=",",l+=`${m}:${Om(n.fields[m])}`;return l+"}"})(s.mapValue):Ze(61005,{value:s})}function Ch(s){switch(Xa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(s);return e?16+Ch(e):16;case 5:return 2*s.stringValue.length;case 6:return Qa(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,c)=>l+Ch(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return Ko(i.fields,((c,m)=>{l+=c.length+Ch(m)})),l})(s.mapValue);default:throw Ze(13486,{value:s})}}function Nm(s){return!!s&&"integerValue"in s}function fp(s){return!!s&&"arrayValue"in s}function __(s){return!!s&&"nullValue"in s}function E_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ih(s){return!!s&&"mapValue"in s}function DR(s){var n,i;return((i=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[gE])==null?void 0:i.stringValue)===yE}function Fu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ko(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Fu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fu(s.arrayValue.values[n]);return e}return{...s}}function OR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===xR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(n)}setAll(e){let n=er.emptyPath(),i={},l=[];e.forEach(((m,v)=>{if(!n.isImmediateParentOf(v)){const E=this.getFieldsMap(n);this.applyChanges(E,i,l),i={},l=[],n=v.popLast()}m?i[v.lastSegment()]=Fu(m):l.push(v.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,l)}delete(e){const n=this.field(e.popLast());Ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];Ih(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Ko(n,((l,c)=>e[l]=c));for(const l of i)delete e[l]}clone(){return new _i(Fu(this.value))}}function vE(s){const e=[];return Ko(s.fields,((n,i)=>{const l=new er([n]);if(Ih(i)){const c=vE(i.mapValue).fields;if(c.length===0)e.push(l);else for(const m of c)e.push(l.child(m))}else e.push(l)})),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,i,l,c,m,v){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=c,this.data=m,this.documentState=v}static newInvalidDocument(e){return new hr(e,0,nt.min(),nt.min(),nt.min(),_i.empty(),0)}static newFoundDocument(e,n,i,l){return new hr(e,1,n,nt.min(),i,l,0)}static newNoDocument(e,n){return new hr(e,2,n,nt.min(),nt.min(),_i.empty(),0)}static newUnknownDocument(e,n){return new hr(e,3,n,nt.min(),nt.min(),_i.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.position=e,this.inclusive=n}}function b_(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const c=e[l],m=s.position[l];if(c.field.isKeyField()?i=Qe.comparator(Qe.fromName(m.referenceValue),n.key):i=Ll(m,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function T_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ds(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function NR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{}class Ln extends _E{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new VR(e,n,i):n==="array-contains"?new LR(e,i):n==="in"?new UR(e,i):n==="not-in"?new jR(e,i):n==="array-contains-any"?new BR(e,i):new Ln(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new MR(e,i):new PR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&Xa(this.value)===Xa(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends _E{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ms(e,n)}matches(e){return EE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(s){return s.op==="and"}function bE(s){return kR(s)&&EE(s)}function kR(s){for(const e of s.filters)if(e instanceof ms)return!1;return!0}function km(s){if(s instanceof Ln)return s.field.canonicalString()+s.op.toString()+Ul(s.value);if(bE(s))return s.filters.map((e=>km(e))).join(",");{const e=s.filters.map((n=>km(n))).join(",");return`${s.op}(${e})`}}function TE(s,e){return s instanceof Ln?(function(i,l){return l instanceof Ln&&i.op===l.op&&i.field.isEqual(l.field)&&ds(i.value,l.value)})(s,e):s instanceof ms?(function(i,l){return l instanceof ms&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((c,m,v)=>c&&TE(m,l.filters[v])),!0):!1})(s,e):void Ze(19439)}function wE(s){return s instanceof Ln?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ul(n.value)}`})(s):s instanceof ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(wE).join(" ,")+"}"})(s):"Filter"}class VR extends Ln{constructor(e,n,i){super(e,n,i),this.key=Qe.fromName(i.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class MR extends Ln{constructor(e,n){super(e,"in",n),this.keys=SE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class PR extends Ln{constructor(e,n){super(e,"not-in",n),this.keys=SE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function SE(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Qe.fromName(i.referenceValue)))}class LR extends Ln{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fp(n)&&rc(n.arrayValue,this.value)}}class UR extends Ln{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rc(this.value.arrayValue,n)}}class jR extends Ln{constructor(e,n){super(e,"not-in",n)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rc(this.value.arrayValue,n)}}class BR extends Ln{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>rc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n=null,i=[],l=[],c=null,m=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=c,this.startAt=m,this.endAt=v,this.Te=null}}function w_(s,e=null,n=[],i=[],l=null,c=null,m=null){return new zR(s,e,n,i,l,c,m)}function dp(s){const e=at(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>km(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ul(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ul(i))).join(",")),e.Te=n}return e.Te}function mp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!NR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!TE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!T_(s.startAt,e.startAt)&&T_(s.endAt,e.endAt)}function Vm(s){return Qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n=null,i=[],l=[],c=null,m="F",v=null,E=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=c,this.limitType=m,this.startAt=v,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qR(s,e,n,i,l,c,m,v){return new lf(s,e,n,i,l,c,m,v)}function pp(s){return new lf(s)}function S_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function HR(s){return Qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function FR(s){return s.collectionGroup!==null}function Ku(s){const e=at(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let v=new Un(er.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((b=>{b.isInequality()&&(v=v.add(b.field))}))})),v})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Fh(c,i))})),n.has(er.keyField().canonicalString())||e.Ie.push(new Fh(er.keyField(),i))}return e.Ie}function cs(s){const e=at(s);return e.Ee||(e.Ee=KR(e,Ku(s))),e.Ee}function KR(s,e){if(s.limitType==="F")return w_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Fh(l.field,c)}));const n=s.endAt?new Hh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Hh(s.startAt.position,s.startAt.inclusive):null;return w_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Mm(s,e,n){return new lf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function uf(s,e){return mp(cs(s),cs(e))&&s.limitType===e.limitType}function AE(s){return`${dp(cs(s))}|lt:${s.limitType}`}function Al(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>wE(l))).join(", ")}]`),af(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Ul(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Ul(l))).join(",")),`Target(${i})`})(cs(s))}; limitType=${s.limitType})`}function cf(s,e){return e.isFoundDocument()&&(function(i,l){const c=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Qe.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,l){for(const c of Ku(i))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const c of i.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(m,v,E){const b=b_(m,v,E);return m.inclusive?b<=0:b<0})(i.startAt,Ku(i),l)||i.endAt&&!(function(m,v,E){const b=b_(m,v,E);return m.inclusive?b>=0:b>0})(i.endAt,Ku(i),l))})(s,e)}function GR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function RE(s){return(e,n)=>{let i=!1;for(const l of Ku(s)){const c=YR(l,e,n);if(c!==0)return c;i=i||l.field.isKeyField()}return 0}}function YR(s,e,n){const i=s.field.isKeyField()?Qe.comparator(e.key,n.key):(function(c,m,v){const E=m.data.field(c),b=v.data.field(c);return E!==null&&b!==null?Ll(E,b):Ze(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ze(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,c]of i)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((n,i)=>{for(const[l,c]of i)e(l,c)}))}isEmpty(){return cE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new cn(Qe.comparator);function ea(){return QR}const CE=new cn(Qe.comparator);function ju(...s){let e=CE;for(const n of s)e=e.insert(n.key,n);return e}function IE(s){let e=CE;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ko(){return Gu()}function xE(){return Gu()}function Gu(){return new Go((s=>s.toString()),((s,e)=>s.isEqual(e)))}const XR=new cn(Qe.comparator),WR=new Un(Qe.comparator);function Tt(...s){let e=WR;for(const n of s)e=e.add(n);return e}const $R=new Un(bt);function ZR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function DE(s){return{integerValue:""+s}}function JR(s,e){return wR(e)?DE(e):gp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function eC(s,e,n){return s instanceof Kh?(function(l,c){const m={fields:{[dE]:{stringValue:fE},[pE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&hp(c)&&(c=of(c)),c&&(m.fields[mE]=c),{mapValue:m}})(n,e):s instanceof ic?NE(s,e):s instanceof sc?kE(s,e):(function(l,c){const m=OE(l,c),v=A_(m)+A_(l.Ae);return Nm(m)&&Nm(l.Ae)?DE(v):gp(l.serializer,v)})(s,e)}function tC(s,e,n){return s instanceof ic?NE(s,e):s instanceof sc?kE(s,e):n}function OE(s,e){return s instanceof Gh?(function(i){return Nm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Kh extends hf{}class ic extends hf{constructor(e){super(),this.elements=e}}function NE(s,e){const n=VE(e);for(const i of s.elements)n.some((l=>ds(l,i)))||n.push(i);return{arrayValue:{values:n}}}class sc extends hf{constructor(e){super(),this.elements=e}}function kE(s,e){let n=VE(e);for(const i of s.elements)n=n.filter((l=>!ds(l,i)));return{arrayValue:{values:n}}}class Gh extends hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function A_(s){return vn(s.integerValue||s.doubleValue)}function VE(s){return fp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function nC(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof ic&&l instanceof ic||i instanceof sc&&l instanceof sc?Pl(i.elements,l.elements,ds):i instanceof Gh&&l instanceof Gh?ds(i.Ae,l.Ae):i instanceof Kh&&l instanceof Kh})(s.transform,e.transform)}class rC{constructor(e,n){this.version=e,this.transformResults=n}}class Ws{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ws}static exists(e){return new Ws(void 0,e)}static updateTime(e){return new Ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ff{}function ME(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new LE(s.key,Ws.none()):new mc(s.key,s.data,Ws.none());{const n=s.data,i=_i.empty();let l=new Un(er.comparator);for(let c of e.fields)if(!l.has(c)){let m=n.field(c);m===null&&c.length>1&&(c=c.popLast(),m=n.field(c)),m===null?i.delete(c):i.set(c,m),l=l.add(c)}return new Yo(s.key,i,new zi(l.toArray()),Ws.none())}}function iC(s,e,n){s instanceof mc?(function(l,c,m){const v=l.value.clone(),E=C_(l.fieldTransforms,c,m.transformResults);v.setAll(E),c.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(s,e,n):s instanceof Yo?(function(l,c,m){if(!xh(l.precondition,c))return void c.convertToUnknownDocument(m.version);const v=C_(l.fieldTransforms,c,m.transformResults),E=c.data;E.setAll(PE(l)),E.setAll(v),c.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(s,e,n):(function(l,c,m){c.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,n)}function Yu(s,e,n,i){return s instanceof mc?(function(c,m,v,E){if(!xh(c.precondition,m))return v;const b=c.value.clone(),I=I_(c.fieldTransforms,E,m);return b.setAll(I),m.convertToFoundDocument(m.version,b).setHasLocalMutations(),null})(s,e,n,i):s instanceof Yo?(function(c,m,v,E){if(!xh(c.precondition,m))return v;const b=I_(c.fieldTransforms,E,m),I=m.data;return I.setAll(PE(c)),I.setAll(b),m.convertToFoundDocument(m.version,I).setHasLocalMutations(),v===null?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((V=>V.field)))})(s,e,n,i):(function(c,m,v){return xh(c.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):v})(s,e,n)}function sC(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),c=OE(i.transform,l||null);c!=null&&(n===null&&(n=_i.empty()),n.set(i.field,c))}return n||null}function R_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Pl(i,l,((c,m)=>nC(c,m)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class mc extends ff{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Yo extends ff{constructor(e,n,i,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function PE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function C_(s,e,n){const i=new Map;Mt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const c=s[l],m=c.transform,v=e.data.field(c.field);i.set(c.field,tC(m,v,n[l]))}return i}function I_(s,e,n){const i=new Map;for(const l of s){const c=l.transform,m=n.data.field(l.field);i.set(l.field,eC(c,m,e))}return i}class LE extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aC extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&iC(c,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Yu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Yu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=xE();return this.mutations.forEach((l=>{const c=e.get(l.key),m=c.overlayedDocument;let v=this.applyToLocalView(m,c.mutatedFields);v=n.has(l.key)?null:v;const E=ME(m,v);E!==null&&i.set(l.key,E),m.isValidDocument()||m.convertToNoDocument(nt.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>R_(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>R_(n,i)))}}class yp{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){Mt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return XR})();const c=e.mutations;for(let m=0;m<c.length;m++)l=l.insert(c[m].key,i[m].version);return new yp(e,n,i,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,Rt;function cC(s){switch(s){case ye.OK:return Ze(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Ze(15467,{code:s})}}function UE(s){if(s===void 0)return Js("GRPC error has no .code"),ye.UNKNOWN;switch(s){case Cn.OK:return ye.OK;case Cn.CANCELLED:return ye.CANCELLED;case Cn.UNKNOWN:return ye.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return ye.INTERNAL;case Cn.UNAVAILABLE:return ye.UNAVAILABLE;case Cn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Cn.NOT_FOUND:return ye.NOT_FOUND;case Cn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Cn.ABORTED:return ye.ABORTED;case Cn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Cn.DATA_LOSS:return ye.DATA_LOSS;default:return Ze(39323,{code:s})}}(Rt=Cn||(Cn={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Fa([4294967295,4294967295],0);function x_(s){const e=hC().encode(s),n=new eE;return n.update(e),new Uint8Array(n.digest())}function D_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Fa([n,i],0),new Fa([l,c],0)]}class vp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Bu(`Invalid padding: ${n}`);if(i<0)throw new Bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fa.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Fa.fromNumber(i)));return l.compare(fC)===1&&(l=new Fa([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=x_(e),[i,l]=D_(n);for(let c=0;c<this.hashCount;c++){const m=this.ye(i,l,c);if(!this.we(m))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),m=new vp(c,l,n);return i.forEach((v=>m.insert(v))),m}insert(e){if(this.ge===0)return;const n=x_(e),[i,l]=D_(n);for(let c=0;c<this.hashCount;c++){const m=this.ye(i,l,c);this.be(m)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,i,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new df(nt.min(),l,new cn(bt),ea(),Tt())}}class pc{constructor(e,n,i,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new pc(i,n,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class jE{constructor(e,n){this.targetId=e,this.Ce=n}}class BE{constructor(e,n,i=tr.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class O_{constructor(){this.ve=0,this.Fe=N_(),this.Me=tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Tt(),n=Tt(),i=Tt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Ze(38017,{changeType:c})}})),new pc(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=N_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ea(),this.He=_h(),this.Je=_h(),this.Ze=new cn(bt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Vm(c))if(i===0){const m=new Qe(c.path);this.et(n,m,hr.newNoDocument(m,nt.min()))}else Mt(i===1,20013,{expectedCount:i});else{const m=this._t(n);if(m!==i){const v=this.ut(e),E=v?this.ct(v,e,m):1;if(E!==0){this.it(n);const b=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:c=0}=n;let m,v;try{m=Qa(i).toUint8Array()}catch(E){if(E instanceof hE)return Ml("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{v=new vp(m,l,c)}catch(E){return Ml(E instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return v.ge===0?null:v}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((c=>{const m=this.Ge.ht(),v=`projects/${m.projectId}/databases/${m.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,m)=>{const v=this.ot(m);if(v){if(c.current&&Vm(v.target)){const E=new Qe(v.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,hr.newNoDocument(E,e))}c.Be&&(n.set(m,c.ke()),c.Ke())}}));let i=Tt();this.Je.forEach(((c,m)=>{let v=!0;m.forEachWhile((E=>{const b=this.ot(E);return!b||b.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(i=i.add(c))})),this.je.forEach(((c,m)=>m.setReadTime(e)));const l=new df(e,n,this.Ze,this.je,i);return this.je=ea(),this.He=_h(),this.Je=_h(),this.Ze=new cn(bt),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new O_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Un(bt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Un(bt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new O_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _h(){return new cn(Qe.comparator)}function N_(){return new cn(Qe.comparator)}const mC={asc:"ASCENDING",desc:"DESCENDING"},pC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gC={and:"AND",or:"OR"};class yC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pm(s,e){return s.useProto3Json||af(e)?e:{value:e}}function Yh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function vC(s,e){return Yh(s,e.toTimestamp())}function hs(s){return Mt(!!s,49232),nt.fromTimestamp((function(n){const i=Ya(n);return new $t(i.seconds,i.nanos)})(s))}function _p(s,e){return Lm(s,e).canonicalString()}function Lm(s,e){const n=(function(l){return new un(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function qE(s){const e=un.fromString(s);return Mt(YE(e),10190,{key:e.toString()}),e}function Um(s,e){return _p(s.databaseId,e.path)}function mm(s,e){const n=qE(e);if(n.get(1)!==s.databaseId.projectId)throw new qe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new qe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Qe(FE(n))}function HE(s,e){return _p(s.databaseId,e)}function _C(s){const e=qE(s);return e.length===4?un.emptyPath():FE(e)}function jm(s){return new un(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function FE(s){return Mt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function k_(s,e,n){return{name:Um(s,e),fields:n.value.mapValue.fields}}function EC(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Ze(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(b,I){return b.useProto3Json?(Mt(I===void 0||typeof I=="string",58123),tr.fromBase64String(I||"")):(Mt(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),tr.fromUint8Array(I||new Uint8Array))})(s,e.targetChange.resumeToken),m=e.targetChange.cause,v=m&&(function(b){const I=b.code===void 0?ye.UNKNOWN:UE(b.code);return new qe(I,b.message||"")})(m);n=new BE(i,l,c,v||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=mm(s,i.document.name),c=hs(i.document.updateTime),m=i.document.createTime?hs(i.document.createTime):nt.min(),v=new _i({mapValue:{fields:i.document.fields}}),E=hr.newFoundDocument(l,c,m,v),b=i.targetIds||[],I=i.removedTargetIds||[];n=new Dh(b,I,E.key,E)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=mm(s,i.document),c=i.readTime?hs(i.readTime):nt.min(),m=hr.newNoDocument(l,c),v=i.removedTargetIds||[];n=new Dh([],v,m.key,m)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=mm(s,i.document),c=i.removedTargetIds||[];n=new Dh([],c,l,null)}else{if(!("filter"in e))return Ze(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:c}=i,m=new uC(l,c),v=i.targetId;n=new jE(v,m)}}return n}function bC(s,e){let n;if(e instanceof mc)n={update:k_(s,e.key,e.value)};else if(e instanceof LE)n={delete:Um(s,e.key)};else if(e instanceof Yo)n={update:k_(s,e.key,e.data),updateMask:DC(e.fieldMask)};else{if(!(e instanceof aC))return Ze(16599,{dt:e.type});n={verify:Um(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,m){const v=m.transform;if(v instanceof Kh)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof ic)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof sc)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Gh)return{fieldPath:m.field.canonicalString(),increment:v.Ae};throw Ze(20930,{transform:m.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:vC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ze(27497)})(s,e.precondition)),n}function TC(s,e){return s&&s.length>0?(Mt(e!==void 0,14353),s.map((n=>(function(l,c){let m=l.updateTime?hs(l.updateTime):hs(c);return m.isEqual(nt.min())&&(m=hs(c)),new rC(m,l.transformResults||[])})(n,e)))):[]}function wC(s,e){return{documents:[HE(s,e.path)]}}function SC(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=HE(s,l);const c=(function(b){if(b.length!==0)return GE(ms.create(b,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const m=(function(b){if(b.length!==0)return b.map((I=>(function(U){return{field:Rl(U.field),direction:CC(U.dir)}})(I)))})(e.orderBy);m&&(n.structuredQuery.orderBy=m);const v=Pm(s,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:l}}function AC(s){let e=_C(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){Mt(i===1,65062);const I=n.from[0];I.allDescendants?l=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=(function(V){const U=KE(V);return U instanceof ms&&bE(U)?U.getFilters():[U]})(n.where));let m=[];n.orderBy&&(m=(function(V){return V.map((U=>(function(pe){return new Fh(Cl(pe.field),(function(Ee){switch(Ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(pe.direction))})(U)))})(n.orderBy));let v=null;n.limit&&(v=(function(V){let U;return U=typeof V=="object"?V.value:V,af(U)?null:U})(n.limit));let E=null;n.startAt&&(E=(function(V){const U=!!V.before,se=V.values||[];return new Hh(se,U)})(n.startAt));let b=null;return n.endAt&&(b=(function(V){const U=!V.before,se=V.values||[];return new Hh(se,U)})(n.endAt)),qR(e,l,m,c,v,"F",E,b)}function RC(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Cl(n.unaryFilter.field);return Ln.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Cl(n.unaryFilter.field);return Ln.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Cl(n.unaryFilter.field);return Ln.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Cl(n.unaryFilter.field);return Ln.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Ln.create(Cl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ms.create(n.compositeFilter.filters.map((i=>KE(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}})(n.compositeFilter.op))})(s):Ze(30097,{filter:s})}function CC(s){return mC[s]}function IC(s){return pC[s]}function xC(s){return gC[s]}function Rl(s){return{fieldPath:s.canonicalString()}}function Cl(s){return er.fromServerFormat(s.fieldPath)}function GE(s){return s instanceof Ln?(function(n){if(n.op==="=="){if(E_(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NAN"}};if(__(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E_(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NAN"}};if(__(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rl(n.field),op:IC(n.op),value:n.value}}})(s):s instanceof ms?(function(n){const i=n.getFilters().map((l=>GE(l)));return i.length===1?i[0]:{compositeFilter:{op:xC(n.op),filters:i}}})(s):Ze(54877,{filter:s})}function DC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function YE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function QE(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,i,l,c=nt.min(),m=nt.min(),v=tr.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=v,this.expectedCount=E}withSequenceNumber(e){return new Ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.yt=e}}function NC(s){const e=AC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.Sn=new VC}addToCollectionParentIndex(e,n){return this.Sn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(Ga.min())}updateCollectionGroup(e,n,i){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class VC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new Un(un.comparator),c=!l.has(i);return this.index[n]=l.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Un(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XE=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(XE,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new jl(0)}static ar(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LruGarbageCollector",MC=1048576;function P_([s,e],[n,i]){const l=bt(s,n);return l===0?bt(e,i):l}class PC{constructor(e){this.Pr=e,this.buffer=new Un(P_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();P_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ke(M_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gl(n)?ke(M_,"Ignoring IndexedDB error during garbage collection: ",n):await Kl(n)}await this.Ar(3e5)}))}}class UC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return me.resolve(sf.ce);const i=new PC(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(V_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,c,m,v,E,b;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((V=>(V>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${V}`),l=this.params.maximumSequenceNumbersToCollect):l=V,m=Date.now(),this.nthSequenceNumber(e,l)))).next((V=>(i=V,v=Date.now(),this.removeTargets(e,i,n)))).next((V=>(c=V,E=Date.now(),this.removeOrphanedDocuments(e,i)))).next((V=>(b=Date.now(),Sl()<=Et.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-I}ms
	Determined least recently used ${l} in `+(v-m)+`ms
	Removed ${c} targets in `+(E-v)+`ms
	Removed ${V} documents in `+(b-E)+`ms
Total Duration: ${b-I}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:V}))))}}function jC(s,e){return new UC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.changes=new Go((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?me.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&Yu(i.mutation,l,zi.empty(),$t.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Tt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Tt()){const l=ko();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((c=>{let m=ju();return c.forEach(((v,E)=>{m=m.insert(v,E.overlayedDocument)})),m}))))}getOverlayedDocuments(e,n){const i=ko();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Tt())))}populateOverlays(e,n,i){const l=[];return i.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((m,v)=>{n.set(m,v)}))}))}computeViews(e,n,i,l){let c=ea();const m=Gu(),v=(function(){return Gu()})();return n.forEach(((E,b)=>{const I=i.get(b.key);l.has(b.key)&&(I===void 0||I.mutation instanceof Yo)?c=c.insert(b.key,b):I!==void 0?(m.set(b.key,I.mutation.getFieldMask()),Yu(I.mutation,b,I.mutation.getFieldMask(),$t.now())):m.set(b.key,zi.empty())})),this.recalculateAndSaveOverlays(e,c).next((E=>(E.forEach(((b,I)=>m.set(b,I))),n.forEach(((b,I)=>v.set(b,new zC(I,m.get(b)??null)))),v)))}recalculateAndSaveOverlays(e,n){const i=Gu();let l=new cn(((m,v)=>m-v)),c=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((m=>{for(const v of m)v.keys().forEach((E=>{const b=n.get(E);if(b===null)return;let I=i.get(E)||zi.empty();I=v.applyToLocalView(b,I),i.set(E,I);const V=(l.get(v.batchId)||Tt()).add(E);l=l.insert(v.batchId,V)}))})).next((()=>{const m=[],v=l.getReverseIterator();for(;v.hasNext();){const E=v.getNext(),b=E.key,I=E.value,V=xE();I.forEach((U=>{if(!c.has(U)){const se=ME(n.get(U),i.get(U));se!==null&&V.set(U,se),c=c.add(U)}})),m.push(this.documentOverlayCache.saveOverlays(e,b,V))}return me.waitFor(m)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return HR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((c=>{const m=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-c.size):me.resolve(ko());let v=ec,E=c;return m.next((b=>me.forEach(b,((I,V)=>(v<V.largestBatchId&&(v=V.largestBatchId),c.get(I)?me.resolve():this.remoteDocumentCache.getEntry(e,I).next((U=>{E=E.insert(I,U)}))))).next((()=>this.populateOverlays(e,b,c))).next((()=>this.computeViews(e,E,b,Tt()))).next((I=>({batchId:v,changes:IE(I)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((i=>{let l=ju();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const c=n.collectionGroup;let m=ju();return this.indexManager.getCollectionParents(e,c).next((v=>me.forEach(v,(E=>{const b=(function(V,U){return new lf(U,null,V.explicitOrderBy.slice(),V.filters.slice(),V.limit,V.limitType,V.startAt,V.endAt)})(n,E.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,i,l).next((I=>{I.forEach(((V,U)=>{m=m.insert(V,U)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,l)))).next((m=>{c.forEach(((E,b)=>{const I=b.getKey();m.get(I)===null&&(m=m.insert(I,hr.newInvalidDocument(I)))}));let v=ju();return m.forEach(((E,b)=>{const I=c.get(E);I!==void 0&&Yu(I.mutation,b,zi.empty(),$t.now()),cf(n,b)&&(v=v.insert(E,b))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return me.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:hs(l.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:NC(l.bundledQuery),readTime:hs(l.readTime)}})(n)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.overlays=new cn(Qe.comparator),this.Lr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ko();return me.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&i.set(l,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,c)=>{this.bt(e,n,c)})),me.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),me.resolve()}getOverlaysForCollection(e,n,i){const l=ko(),c=n.length+1,m=new Qe(n.child("")),v=this.overlays.getIteratorFrom(m);for(;v.hasNext();){const E=v.getNext().value,b=E.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===c&&E.largestBatchId>i&&l.set(E.getKey(),E)}return me.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let c=new cn(((b,I)=>b-I));const m=this.overlays.getIterator();for(;m.hasNext();){const b=m.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>i){let I=c.get(b.largestBatchId);I===null&&(I=ko(),c=c.insert(b.largestBatchId,I)),I.set(b.getKey(),b)}}const v=ko(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((b,I)=>v.set(b,I))),!(v.size()>=l)););return me.resolve(v)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const m=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,m)}this.overlays=this.overlays.insert(i.key,new lC(n,i));let c=this.Lr.get(n);c===void 0&&(c=Tt(),this.Lr.set(n,c)),this.Lr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.kr=new Un(Kn.Kr),this.qr=new Un(Kn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Kn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Kn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Qe(new un([])),i=new Kn(n,e),l=new Kn(n,e+1),c=[];return this.qr.forEachInRange([i,l],(m=>{this.Wr(m),c.push(m.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Qe(new un([])),i=new Kn(n,e),l=new Kn(n,e+1);let c=Tt();return this.qr.forEachInRange([i,l],(m=>{c=c.add(m.key)})),c}containsKey(e){const n=new Kn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Kn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Qe.comparator(e.key,n.key)||bt(e.Hr,n.Hr)}static Ur(e,n){return bt(e.Hr,n.Hr)||Qe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Un(Kn.Kr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new oC(c,n,i,l);this.mutationQueue.push(m);for(const v of l)this.Jr=this.Jr.add(new Kn(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return me.resolve(m)}lookupMutationBatch(e,n){return me.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),c=l<0?0:l;return me.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?cp:this.Yn-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Kn(n,0),l=new Kn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,l],(m=>{const v=this.Zr(m.Hr);c.push(v)})),me.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Un(bt);return n.forEach((l=>{const c=new Kn(l,0),m=new Kn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,m],(v=>{i=i.add(v.Hr)}))})),me.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let c=i;Qe.isDocumentKey(c)||(c=c.child(""));const m=new Kn(new Qe(c),0);let v=new Un(bt);return this.Jr.forEachWhile((E=>{const b=E.key.path;return!!i.isPrefixOf(b)&&(b.length===l&&(v=v.add(E.Hr)),!0)}),m),me.resolve(this.Yr(v))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Mt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return me.forEach(n.mutations,(l=>{const c=new Kn(l.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Kn(n,0),l=this.Jr.firstAfterOrEqual(i);return me.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.ti=e,this.docs=(function(){return new cn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),c=l?l.size:0,m=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:m}),this.size+=m-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return me.resolve(i?i.document.mutableCopy():hr.newInvalidDocument(n))}getEntries(e,n){let i=ea();return n.forEach((l=>{const c=this.docs.get(l);i=i.insert(l,c?c.document.mutableCopy():hr.newInvalidDocument(l))})),me.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let c=ea();const m=n.path,v=new Qe(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(v);for(;E.hasNext();){const{key:b,value:{document:I}}=E.getNext();if(!m.isPrefixOf(b.path))break;b.path.length>m.length+1||_R(vR(I),i)<=0||(l.has(I.key)||cf(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return me.resolve(c)}getAllFromCollectionGroup(e,n,i,l){Ze(9500)}ni(e,n){return me.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new QC(this)}getSize(e){return me.resolve(this.size)}}class QC extends BC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),me.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.persistence=e,this.ri=new Go((n=>dp(n)),mp),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.ii=0,this.si=new Ep,this.targetCount=0,this.oi=jl._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),me.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new jl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.lr(n),me.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,i){let l=0;const c=[];return this.ri.forEach(((m,v)=>{v.sequenceNumber<=n&&i.get(v.targetId)===null&&(this.ri.delete(m),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),l++)})),me.waitFor(c).next((()=>l))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return me.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),me.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((m=>{c.push(l.markPotentiallyOrphaned(e,m))})),me.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return me.resolve(i)}containsKey(e,n){return me.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this._i={},this.overlays={},this.ai=new sf(0),this.ui=!1,this.ui=!0,this.ci=new KC,this.referenceDelegate=e(this),this.li=new XC(this),this.indexManager=new kC,this.remoteDocumentCache=(function(l){return new YC(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new OC(n),this.Pi=new HC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new GC(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){ke("MemoryPersistence","Starting transaction:",e);const l=new WC(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((c=>this.referenceDelegate.Ii(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ei(e,n){return me.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class WC extends bR{constructor(e){super(),this.currentSequenceNumber=e}}class bp{constructor(e){this.persistence=e,this.Ri=new Ep,this.Ai=null}static Vi(e){return new bp(e)}get di(){if(this.Ai)return this.Ai;throw Ze(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),me.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.di,(i=>{const l=Qe.fromPath(i);return this.mi(e,l).next((c=>{c||n.removeEntry(l,nt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Qh{constructor(e,n){this.persistence=e,this.fi=new Go((i=>SR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=jC(this,n)}static Vi(e,n){return new Qh(e,n)}Ti(){}Ii(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return me.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((c=>c?me.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ni(e,(m=>this.wr(e,m,n).next((v=>{v||(i++,c.removeEntry(m,nt.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),me.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ch(e.data.value)),n}wr(e,n,i){return me.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return me.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=Tt(),l=Tt();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Tp(e,n.fromCache,i,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Tw()?8:TR(fr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const c={result:null};return this.gs(e,n).next((m=>{c.result=m})).next((()=>{if(!c.result)return this.ps(e,n,l,i).next((m=>{c.result=m}))})).next((()=>{if(c.result)return;const m=new $C;return this.ys(e,n,m).next((v=>{if(c.result=v,this.As)return this.ws(e,n,m,v.size)}))})).next((()=>c.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(Sl()<=Et.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",Al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(Sl()<=Et.DEBUG&&ke("QueryEngine","Query:",Al(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Sl()<=Et.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",Al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(n))):me.resolve())}gs(e,n){if(S_(n))return me.resolve(null);let i=cs(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Mm(n,null,"F"),i=cs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const m=Tt(...c);return this.fs.getDocuments(e,m).next((v=>this.indexManager.getMinOffset(e,i).next((E=>{const b=this.bs(n,v);return this.Ss(n,b,m,E.readTime)?this.gs(e,Mm(n,null,"F")):this.Ds(e,b,n,E)}))))})))))}ps(e,n,i,l){return S_(n)||l.isEqual(nt.min())?me.resolve(null):this.fs.getDocuments(e,i).next((c=>{const m=this.bs(n,c);return this.Ss(n,m,i,l)?me.resolve(null):(Sl()<=Et.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Al(n)),this.Ds(e,m,n,yR(l,ec)).next((v=>v)))}))}bs(e,n){let i=new Un(RE(e));return n.forEach(((l,c)=>{cf(e,c)&&(i=i.add(c))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}ys(e,n,i){return Sl()<=Et.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Al(n)),this.fs.getDocumentsMatchingQuery(e,n,Ga.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((c=>(n.forEach((m=>{c=c.insert(m.key,m)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="LocalStore",JC=3e8;class eI{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new cn(bt),this.Fs=new Go((c=>dp(c)),mp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function tI(s,e,n,i){return new eI(s,e,n,i)}async function $E(s,e){const n=at(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((c=>(l=c,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const m=[],v=[];let E=Tt();for(const b of l){m.push(b.batchId);for(const I of b.mutations)E=E.add(I.key)}for(const b of c){v.push(b.batchId);for(const I of b.mutations)E=E.add(I.key)}return n.localDocuments.getDocuments(i,E).next((b=>({Ns:b,removedBatchIds:m,addedBatchIds:v})))}))}))}function nI(s,e){const n=at(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(v,E,b,I){const V=b.batch,U=V.keys();let se=me.resolve();return U.forEach((pe=>{se=se.next((()=>I.getEntry(E,pe))).next((Se=>{const Ee=b.docVersions.get(pe);Mt(Ee!==null,48541),Se.version.compareTo(Ee)<0&&(V.applyToRemoteDocument(Se,b),Se.isValidDocument()&&(Se.setReadTime(b.commitVersion),I.addEntry(Se)))}))})),se.next((()=>v.mutationQueue.removeMutationBatch(E,V)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(v){let E=Tt();for(let b=0;b<v.mutationResults.length;++b)v.mutationResults[b].transformResults.length>0&&(E=E.add(v.batch.mutations[b].key));return E})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function ZE(s){const e=at(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function rI(s,e){const n=at(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const m=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const v=[];e.targetChanges.forEach(((I,V)=>{const U=l.get(V);if(!U)return;v.push(n.li.removeMatchingKeys(c,I.removedDocuments,V).next((()=>n.li.addMatchingKeys(c,I.addedDocuments,V))));let se=U.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(V)!==null?se=se.withResumeToken(tr.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):I.resumeToken.approximateByteSize()>0&&(se=se.withResumeToken(I.resumeToken,i)),l=l.insert(V,se),(function(Se,Ee,Le){return Se.resumeToken.approximateByteSize()===0||Ee.snapshotVersion.toMicroseconds()-Se.snapshotVersion.toMicroseconds()>=JC?!0:Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0})(U,se,I)&&v.push(n.li.updateTargetData(c,se))}));let E=ea(),b=Tt();if(e.documentUpdates.forEach((I=>{e.resolvedLimboDocuments.has(I)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))})),v.push(iI(c,m,e.documentUpdates).next((I=>{E=I.Bs,b=I.Ls}))),!i.isEqual(nt.min())){const I=n.li.getLastRemoteSnapshotVersion(c).next((V=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));v.push(I)}return me.waitFor(v).next((()=>m.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,E,b))).next((()=>E))})).then((c=>(n.vs=l,c)))}function iI(s,e,n){let i=Tt(),l=Tt();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let m=ea();return n.forEach(((v,E)=>{const b=c.get(v);E.isFoundDocument()!==b.isFoundDocument()&&(l=l.add(v)),E.isNoDocument()&&E.version.isEqual(nt.min())?(e.removeEntry(v,E.readTime),m=m.insert(v,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||E.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(E),m=m.insert(v,E)):ke(wp,"Ignoring outdated watch update for ",v,". Current version:",b.version," Watch version:",E.version)})),{Bs:m,Ls:l}}))}function sI(s,e){const n=at(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=cp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function aI(s,e){const n=at(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((c=>c?(l=c,me.resolve(l)):n.li.allocateTargetId(i).next((m=>(l=new Ba(e,m,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function Bm(s,e,n){const i=at(s),l=i.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(m=>i.persistence.referenceDelegate.removeTarget(m,l)))}catch(m){if(!Gl(m))throw m;ke(wp,`Failed to update sequence numbers for target ${e}: ${m}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function L_(s,e,n){const i=at(s);let l=nt.min(),c=Tt();return i.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,b,I){const V=at(E),U=V.Fs.get(I);return U!==void 0?me.resolve(V.vs.get(U)):V.li.getTargetData(b,I)})(i,m,cs(e)).next((v=>{if(v)return l=v.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(m,v.targetId).next((E=>{c=E}))})).next((()=>i.Cs.getDocumentsMatchingQuery(m,e,n?l:nt.min(),n?c:Tt()))).next((v=>(oI(i,GR(e),v),{documents:v,ks:c})))))}function oI(s,e,n){let i=s.Ms.get(e)||nt.min();n.forEach(((l,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Ms.set(e,i)}class U_{constructor(){this.activeTargetIds=ZR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lI{constructor(){this.vo=new U_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new U_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="ConnectivityMonitor";class B_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ke(j_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ke(j_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=null;function zm(){return Eh===null?Eh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Eh++,"0x"+Eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",cI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===zh?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,c){const m=zm(),v=this.Qo(e,n.toUriEncodedString());ke(pm,`Sending RPC '${e}' ${m}:`,v,i);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,l,c);const{host:b}=new URL(v),I=zl(b);return this.zo(e,v,E,i,I).then((V=>(ke(pm,`Received RPC '${e}' ${m}: `,V),V)),(V=>{throw Ml(pm,`RPC '${e}' ${m} failed with error: `,V,"url: ",v,"request:",i),V}))}jo(e,n,i,l,c,m){return this.Wo(e,n,i,l,c)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),i&&i.headers.forEach(((l,c)=>e[c]=l))}Qo(e,n){const i=cI[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="WebChannelConnection",Mu=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Nl extends hI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Nl.c_){const e=iE();Mu(e,rE.STAT_EVENT,(n=>{n.stat===xm.PROXY?ke(ur,"STAT_EVENT: detected buffering proxy"):n.stat===xm.NOPROXY&&ke(ur,"STAT_EVENT: detected no buffering proxy")})),Nl.c_=!0}}zo(e,n,i,l,c){const m=zm();return new Promise(((v,E)=>{const b=new tE;b.setWithCredentials(!0),b.listenOnce(nE.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Rh.NO_ERROR:const V=b.getResponseJson();ke(ur,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(V)),v(V);break;case Rh.TIMEOUT:ke(ur,`RPC '${e}' ${m} timed out`),E(new qe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const U=b.getStatus();if(ke(ur,`RPC '${e}' ${m} failed with status:`,U,"response text:",b.getResponseText()),U>0){let se=b.getResponseJson();Array.isArray(se)&&(se=se[0]);const pe=se==null?void 0:se.error;if(pe&&pe.status&&pe.message){const Se=(function(Le){const Ne=Le.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Ne)>=0?Ne:ye.UNKNOWN})(pe.status);E(new qe(Se,pe.message))}else E(new qe(ye.UNKNOWN,"Server responded with status "+b.getStatus()))}else E(new qe(ye.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:m,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{ke(ur,`RPC '${e}' ${m} completed.`)}}));const I=JSON.stringify(l);ke(ur,`RPC '${e}' ${m} sending request:`,l),b.send(n,"POST",I,i,15)}))}T_(e,n,i){const l=zm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=this.createWebChannelTransport(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Go(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const b=c.join("");ke(ur,`Creating RPC '${e}' stream ${l}: ${b}`,v);const I=m.createWebChannel(b,v);this.I_(I);let V=!1,U=!1;const se=new fI({Ho:pe=>{U?ke(ur,`Not sending because RPC '${e}' stream ${l} is closed:`,pe):(V||(ke(ur,`Opening RPC '${e}' stream ${l} transport.`),I.open(),V=!0),ke(ur,`RPC '${e}' stream ${l} sending:`,pe),I.send(pe))},Jo:()=>I.close()});return Mu(I,Uu.EventType.OPEN,(()=>{U||(ke(ur,`RPC '${e}' stream ${l} transport opened.`),se.i_())})),Mu(I,Uu.EventType.CLOSE,(()=>{U||(U=!0,ke(ur,`RPC '${e}' stream ${l} transport closed`),se.o_(),this.E_(I))})),Mu(I,Uu.EventType.ERROR,(pe=>{U||(U=!0,Ml(ur,`RPC '${e}' stream ${l} transport errored. Name:`,pe.name,"Message:",pe.message),se.o_(new qe(ye.UNAVAILABLE,"The operation could not be completed")))})),Mu(I,Uu.EventType.MESSAGE,(pe=>{var Se;if(!U){const Ee=pe.data[0];Mt(!!Ee,16349);const Le=Ee,Ne=(Le==null?void 0:Le.error)||((Se=Le[0])==null?void 0:Se.error);if(Ne){ke(ur,`RPC '${e}' stream ${l} received error:`,Ne);const Ye=Ne.status;let ht=(function(P){const O=Cn[P];if(O!==void 0)return UE(O)})(Ye),Ue=Ne.message;ht===void 0&&(ht=ye.INTERNAL,Ue="Unknown error status: "+Ye+" with message "+Ne.message),U=!0,se.o_(new qe(ht,Ue)),I.close()}else ke(ur,`RPC '${e}' stream ${l} received:`,Ee),se.__(Ee)}})),Nl.u_(),setTimeout((()=>{se.s_()}),0),se}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return sE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(s){return new Nl(s)}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(s){return new yC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nl.c_=!1;class JE{constructor(e,n,i=1e3,l=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&ke("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="PersistentStream";class eb{constructor(e,n,i,l,c,m,v,E){this.Ci=e,this.b_=i,this.S_=l,this.connection=c,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=v,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(Js(n.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new qe(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ke(z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mI extends eb{constructor(e,n,i,l,c,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,m),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=EC(this.serializer,e),i=(function(c){if(!("targetChange"in c))return nt.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?nt.min():m.readTime?hs(m.readTime):nt.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=jm(this.serializer),n.addTarget=(function(c,m){let v;const E=m.target;if(v=Vm(E)?{documents:wC(c,E)}:{query:SC(c,E).ft},v.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){v.resumeToken=zE(c,m.resumeToken);const b=Pm(c,m.expectedCount);b!==null&&(v.expectedCount=b)}else if(m.snapshotVersion.compareTo(nt.min())>0){v.readTime=Yh(c,m.snapshotVersion.toTimestamp());const b=Pm(c,m.expectedCount);b!==null&&(v.expectedCount=b)}return v})(this.serializer,e);const i=RC(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=jm(this.serializer),n.removeTarget=e,this.K_(n)}}class pI extends eb{constructor(e,n,i,l,c,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,m),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TC(e.writeResults,e.commitTime),i=hs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>bC(this.serializer,i)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class yI extends gI{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new qe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Wo(e,Lm(n,i),l,c,m))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(ye.UNKNOWN,c.toString())}))}jo(e,n,i,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,v])=>this.connection.jo(e,Lm(n,i),l,m,v,c))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new qe(ye.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function vI(s,e,n,i){return new yI(s,e,n,i)}class _I{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Js(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class EI{constructor(e,n,i,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((m=>{i.enqueueAndForget((async()=>{Qo(this)&&(ke(zo,"Restarting streams for network reachability change."),await(async function(E){const b=at(E);b.Ea.add(4),await gc(b),b.Va.set("Unknown"),b.Ea.delete(4),await pf(b)})(this))}))})),this.Va=new _I(i,l)}}async function pf(s){if(Qo(s))for(const e of s.Ra)await e(!0)}async function gc(s){for(const e of s.Ra)await e(!1)}function tb(s,e){const n=at(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cp(n)?Rp(n):Yl(n).O_()&&Ap(n,e))}function Sp(s,e){const n=at(s),i=Yl(n);n.Ia.delete(e),i.O_()&&nb(n,e),n.Ia.size===0&&(i.O_()?i.L_():Qo(n)&&n.Va.set("Unknown"))}function Ap(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(s).Z_(e)}function nb(s,e){s.da.$e(e),Yl(s).X_(e)}function Rp(s){s.da=new dC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Yl(s).start(),s.Va.ua()}function Cp(s){return Qo(s)&&!Yl(s).x_()&&s.Ia.size>0}function Qo(s){return at(s).Ea.size===0}function rb(s){s.da=void 0}async function bI(s){s.Va.set("Online")}async function TI(s){s.Ia.forEach(((e,n)=>{Ap(s,e)}))}async function wI(s,e){rb(s),Cp(s)?(s.Va.ha(e),Rp(s)):s.Va.set("Unknown")}async function SI(s,e,n){if(s.Va.set("Online"),e instanceof BE&&e.state===2&&e.cause)try{await(async function(l,c){const m=c.cause;for(const v of c.targetIds)l.Ia.has(v)&&(await l.remoteSyncer.rejectListen(v,m),l.Ia.delete(v),l.da.removeTarget(v))})(s,e)}catch(i){ke(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xh(s,i)}else if(e instanceof Dh?s.da.Xe(e):e instanceof jE?s.da.st(e):s.da.tt(e),!n.isEqual(nt.min()))try{const i=await ZE(s.localStore);n.compareTo(i)>=0&&await(function(c,m){const v=c.da.Tt(m);return v.targetChanges.forEach(((E,b)=>{if(E.resumeToken.approximateByteSize()>0){const I=c.Ia.get(b);I&&c.Ia.set(b,I.withResumeToken(E.resumeToken,m))}})),v.targetMismatches.forEach(((E,b)=>{const I=c.Ia.get(E);if(!I)return;c.Ia.set(E,I.withResumeToken(tr.EMPTY_BYTE_STRING,I.snapshotVersion)),nb(c,E);const V=new Ba(I.target,E,b,I.sequenceNumber);Ap(c,V)})),c.remoteSyncer.applyRemoteEvent(v)})(s,n)}catch(i){ke(zo,"Failed to raise snapshot:",i),await Xh(s,i)}}async function Xh(s,e,n){if(!Gl(e))throw e;s.Ea.add(1),await gc(s),s.Va.set("Offline"),n||(n=()=>ZE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(zo,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await pf(s)}))}function ib(s,e){return e().catch((n=>Xh(s,n,e)))}async function gf(s){const e=at(s),n=Wa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cp;for(;AI(e);)try{const l=await sI(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,RI(e,l)}catch(l){await Xh(e,l)}sb(e)&&ab(e)}function AI(s){return Qo(s)&&s.Ta.length<10}function RI(s,e){s.Ta.push(e);const n=Wa(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function sb(s){return Qo(s)&&!Wa(s).x_()&&s.Ta.length>0}function ab(s){Wa(s).start()}async function CI(s){Wa(s).ra()}async function II(s){const e=Wa(s);for(const n of s.Ta)e.ea(n.mutations)}async function xI(s,e,n){const i=s.Ta.shift(),l=yp.from(i,e,n);await ib(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await gf(s)}async function DI(s,e){e&&Wa(s).Y_&&await(async function(i,l){if((function(m){return cC(m)&&m!==ye.ABORTED})(l.code)){const c=i.Ta.shift();Wa(i).B_(),await ib(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,l))),await gf(i)}})(s,e),sb(s)&&ab(s)}async function q_(s,e){const n=at(s);n.asyncQueue.verifyOperationInProgress(),ke(zo,"RemoteStore received new credentials");const i=Qo(n);n.Ea.add(3),await gc(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pf(n)}async function OI(s,e){const n=at(s);e?(n.Ea.delete(2),await pf(n)):e||(n.Ea.add(2),await gc(n),n.Va.set("Unknown"))}function Yl(s){return s.ma||(s.ma=(function(n,i,l){const c=at(n);return c.sa(),new mI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Zo:bI.bind(null,s),Yo:TI.bind(null,s),t_:wI.bind(null,s),J_:SI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Cp(s)?Rp(s):s.Va.set("Unknown")):(await s.ma.stop(),rb(s))}))),s.ma}function Wa(s){return s.fa||(s.fa=(function(n,i,l){const c=at(n);return c.sa(),new pI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:CI.bind(null,s),t_:DI.bind(null,s),ta:II.bind(null,s),na:xI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await gf(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(zo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,i,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=c,this.deferred=new Ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,c){const m=Date.now()+i,v=new Ip(e,n,m,l,c);return v.start(i),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(s,e){if(Js("AsyncQueue",`${e}: ${s}`),Gl(s))return new qe(ye.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{static emptySet(e){return new kl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Qe.comparator(n.key,i.key):(n,i)=>Qe.comparator(n.key,i.key),this.keyedMap=ju(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new kl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.ga=new cn(Qe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ze(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Bl{constructor(e,n,i,l,c,m,v,E,b){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=v,this.excludesMetadataChanges=E,this.hasCachedResults=b}static fromInitialDocuments(e,n,i,l,c){const m=[];return n.forEach((v=>{m.push({type:0,doc:v})})),new Bl(e,n,kl.emptySet(n),m,i,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class kI{constructor(){this.queries=F_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=at(n),c=l.queries;l.queries=F_(),c.forEach(((m,v)=>{for(const E of v.ba)E.onError(i)}))})(this,new qe(ye.ABORTED,"Firestore shutting down"))}}function F_(){return new Go((s=>AE(s)),uf)}async function VI(s,e){const n=at(s);let i=3;const l=e.query;let c=n.queries.get(l);c?!c.Sa()&&e.Da()&&(i=2):(c=new NI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(m){const v=xp(m,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(v)}n.queries.set(l,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Dp(n)}async function MI(s,e){const n=at(s),i=e.query;let l=3;const c=n.queries.get(i);if(c){const m=c.ba.indexOf(e);m>=0&&(c.ba.splice(m,1),c.ba.length===0?l=e.Da()?0:1:!c.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function PI(s,e){const n=at(s);let i=!1;for(const l of e){const c=l.query,m=n.queries.get(c);if(m){for(const v of m.ba)v.Fa(l)&&(i=!0);m.wa=l}}i&&Dp(n)}function LI(s,e,n){const i=at(s),l=i.queries.get(e);if(l)for(const c of l.ba)c.onError(n);i.queries.delete(e)}function Dp(s){s.Ca.forEach((e=>{e.next()}))}var qm,K_;(K_=qm||(qm={})).Ma="default",K_.Cache="cache";class UI{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Bl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.key=e}}class lb{constructor(e){this.key=e}}class jI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Tt(),this.mutatedKeys=Tt(),this.eu=RE(e),this.tu=new kl(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new H_,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,m=l,v=!1;const E=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,b=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((I,V)=>{const U=l.get(I),se=cf(this.query,V)?V:null,pe=!!U&&this.mutatedKeys.has(U.key),Se=!!se&&(se.hasLocalMutations||this.mutatedKeys.has(se.key)&&se.hasCommittedMutations);let Ee=!1;U&&se?U.data.isEqual(se.data)?pe!==Se&&(i.track({type:3,doc:se}),Ee=!0):this.su(U,se)||(i.track({type:2,doc:se}),Ee=!0,(E&&this.eu(se,E)>0||b&&this.eu(se,b)<0)&&(v=!0)):!U&&se?(i.track({type:0,doc:se}),Ee=!0):U&&!se&&(i.track({type:1,doc:U}),Ee=!0,(E||b)&&(v=!0)),Ee&&(se?(m=m.add(se),c=Se?c.add(I):c.delete(I)):(m=m.delete(I),c=c.delete(I)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const I=this.query.limitType==="F"?m.last():m.first();m=m.delete(I.key),c=c.delete(I.key),i.track({type:1,doc:I})}return{tu:m,iu:i,Ss:v,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((I,V)=>(function(se,pe){const Se=Ee=>{switch(Ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Vt:Ee})}};return Se(se)-Se(pe)})(I.type,V.type)||this.eu(I.doc,V.doc))),this.ou(i),l=l??!1;const v=n&&!l?this._u():[],E=this.Ya.size===0&&this.current&&!l?1:0,b=E!==this.Xa;return this.Xa=E,m.length!==0||b?{snapshot:new Bl(this.query,e.tu,c,m,e.mutatedKeys,E===0,b,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new H_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Tt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new lb(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new ob(i))})),n}cu(e){this.Za=e.ks,this.Ya=Tt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Op="SyncEngine";class BI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class zI{constructor(e){this.key=e,this.hu=!1}}class qI{constructor(e,n,i,l,c,m){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Go((v=>AE(v)),uf),this.Iu=new Map,this.Eu=new Set,this.Ru=new cn(Qe.comparator),this.Au=new Map,this.Vu=new Ep,this.du={},this.mu=new Map,this.fu=jl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HI(s,e,n=!0){const i=mb(s);let l;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await ub(i,e,n,!0),l}async function FI(s,e){const n=mb(s);await ub(n,e,!0,!1)}async function ub(s,e,n,i){const l=await aI(s.localStore,cs(e)),c=l.targetId,m=s.sharedClientState.addLocalQueryTarget(c,n);let v;return i&&(v=await KI(s,e,c,m==="current",l.resumeToken)),s.isPrimaryClient&&n&&tb(s.remoteStore,l),v}async function KI(s,e,n,i,l){s.pu=(V,U,se)=>(async function(Se,Ee,Le,Ne){let Ye=Ee.view.ru(Le);Ye.Ss&&(Ye=await L_(Se.localStore,Ee.query,!1).then((({documents:P})=>Ee.view.ru(P,Ye))));const ht=Ne&&Ne.targetChanges.get(Ee.targetId),Ue=Ne&&Ne.targetMismatches.get(Ee.targetId)!=null,Re=Ee.view.applyChanges(Ye,Se.isPrimaryClient,ht,Ue);return Y_(Se,Ee.targetId,Re.au),Re.snapshot})(s,V,U,se);const c=await L_(s.localStore,e,!0),m=new jI(e,c.ks),v=m.ru(c.documents),E=pc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),b=m.applyChanges(v,s.isPrimaryClient,E);Y_(s,n,b.au);const I=new BI(e,n,m);return s.Tu.set(e,I),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),b.snapshot}async function GI(s,e,n){const i=at(s),l=i.Tu.get(e),c=i.Iu.get(l.targetId);if(c.length>1)return i.Iu.set(l.targetId,c.filter((m=>!uf(m,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Bm(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Sp(i.remoteStore,l.targetId),Hm(i,l.targetId)})).catch(Kl)):(Hm(i,l.targetId),await Bm(i.localStore,l.targetId,!0))}async function YI(s,e){const n=at(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Sp(n.remoteStore,i.targetId))}async function QI(s,e,n){const i=t2(s);try{const l=await(function(m,v){const E=at(m),b=$t.now(),I=v.reduce(((se,pe)=>se.add(pe.key)),Tt());let V,U;return E.persistence.runTransaction("Locally write mutations","readwrite",(se=>{let pe=ea(),Se=Tt();return E.xs.getEntries(se,I).next((Ee=>{pe=Ee,pe.forEach(((Le,Ne)=>{Ne.isValidDocument()||(Se=Se.add(Le))}))})).next((()=>E.localDocuments.getOverlayedDocuments(se,pe))).next((Ee=>{V=Ee;const Le=[];for(const Ne of v){const Ye=sC(Ne,V.get(Ne.key).overlayedDocument);Ye!=null&&Le.push(new Yo(Ne.key,Ye,vE(Ye.value.mapValue),Ws.exists(!0)))}return E.mutationQueue.addMutationBatch(se,b,Le,v)})).next((Ee=>{U=Ee;const Le=Ee.applyToLocalDocumentSet(V,Se);return E.documentOverlayCache.saveOverlays(se,Ee.batchId,Le)}))})).then((()=>({batchId:U.batchId,changes:IE(V)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(m,v,E){let b=m.du[m.currentUser.toKey()];b||(b=new cn(bt)),b=b.insert(v,E),m.du[m.currentUser.toKey()]=b})(i,l.batchId,n),await yc(i,l.changes),await gf(i.remoteStore)}catch(l){const c=xp(l,"Failed to persist write");n.reject(c)}}async function cb(s,e){const n=at(s);try{const i=await rI(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const m=n.Au.get(c);m&&(Mt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?m.hu=!0:l.modifiedDocuments.size>0?Mt(m.hu,14607):l.removedDocuments.size>0&&(Mt(m.hu,42227),m.hu=!1))})),await yc(n,i,e)}catch(i){await Kl(i)}}function G_(s,e,n){const i=at(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((c,m)=>{const v=m.view.va(e);v.snapshot&&l.push(v.snapshot)})),(function(m,v){const E=at(m);E.onlineState=v;let b=!1;E.queries.forEach(((I,V)=>{for(const U of V.ba)U.va(v)&&(b=!0)})),b&&Dp(E)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function XI(s,e,n){const i=at(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),c=l&&l.key;if(c){let m=new cn(Qe.comparator);m=m.insert(c,hr.newNoDocument(c,nt.min()));const v=Tt().add(c),E=new df(nt.min(),new Map,new cn(bt),m,v);await cb(i,E),i.Ru=i.Ru.remove(c),i.Au.delete(e),Np(i)}else await Bm(i.localStore,e,!1).then((()=>Hm(i,e,n))).catch(Kl)}async function WI(s,e){const n=at(s),i=e.batch.batchId;try{const l=await nI(n.localStore,e);fb(n,i,null),hb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await yc(n,l)}catch(l){await Kl(l)}}async function $I(s,e,n){const i=at(s);try{const l=await(function(m,v){const E=at(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let I;return E.mutationQueue.lookupMutationBatch(b,v).next((V=>(Mt(V!==null,37113),I=V.keys(),E.mutationQueue.removeMutationBatch(b,V)))).next((()=>E.mutationQueue.performConsistencyCheck(b))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(b,I,v))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,I))).next((()=>E.localDocuments.getDocuments(b,I)))}))})(i.localStore,e);fb(i,e,n),hb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await yc(i,l)}catch(l){await Kl(l)}}function hb(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function fb(s,e,n){const i=at(s);let l=i.du[i.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Hm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||db(s,i)}))}function db(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Sp(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Np(s))}function Y_(s,e,n){for(const i of n)i instanceof ob?(s.Vu.addReference(i.key,e),ZI(s,i)):i instanceof lb?(ke(Op,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||db(s,i.key)):Ze(19791,{wu:i})}function ZI(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(ke(Op,"New document in limbo: "+n),s.Eu.add(i),Np(s))}function Np(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Qe(un.fromString(e)),i=s.fu.next();s.Au.set(i,new zI(n)),s.Ru=s.Ru.insert(n,i),tb(s.remoteStore,new Ba(cs(pp(n.path)),i,"TargetPurposeLimboResolution",sf.ce))}}async function yc(s,e,n){const i=at(s),l=[],c=[],m=[];i.Tu.isEmpty()||(i.Tu.forEach(((v,E)=>{m.push(i.pu(E,e,n).then((b=>{var I;if((b||n)&&i.isPrimaryClient){const V=b?!b.fromCache:(I=n==null?void 0:n.targetChanges.get(E.targetId))==null?void 0:I.current;i.sharedClientState.updateQueryState(E.targetId,V?"current":"not-current")}if(b){l.push(b);const V=Tp.Es(E.targetId,b);c.push(V)}})))})),await Promise.all(m),i.Pu.J_(l),await(async function(E,b){const I=at(E);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",(V=>me.forEach(b,(U=>me.forEach(U.Ts,(se=>I.persistence.referenceDelegate.addReference(V,U.targetId,se))).next((()=>me.forEach(U.Is,(se=>I.persistence.referenceDelegate.removeReference(V,U.targetId,se)))))))))}catch(V){if(!Gl(V))throw V;ke(wp,"Failed to update sequence numbers: "+V)}for(const V of b){const U=V.targetId;if(!V.fromCache){const se=I.vs.get(U),pe=se.snapshotVersion,Se=se.withLastLimboFreeSnapshotVersion(pe);I.vs=I.vs.insert(U,Se)}}})(i.localStore,c))}async function JI(s,e){const n=at(s);if(!n.currentUser.isEqual(e)){ke(Op,"User change. New user:",e.toKey());const i=await $E(n.localStore,e);n.currentUser=e,(function(c,m){c.mu.forEach((v=>{v.forEach((E=>{E.reject(new qe(ye.CANCELLED,m))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yc(n,i.Ns)}}function e2(s,e){const n=at(s),i=n.Au.get(e);if(i&&i.hu)return Tt().add(i.key);{let l=Tt();const c=n.Iu.get(e);if(!c)return l;for(const m of c){const v=n.Tu.get(m);l=l.unionWith(v.view.nu)}return l}}function mb(s){const e=at(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=cb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XI.bind(null,e),e.Pu.J_=PI.bind(null,e.eventManager),e.Pu.yu=LI.bind(null,e.eventManager),e}function t2(s){const e=at(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$I.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tI(this.persistence,new ZC,e.initialUser,this.serializer)}Cu(e){return new WE(bp.Vi,this.serializer)}Du(e){return new lI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class n2 extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Mt(this.persistence.referenceDelegate instanceof Qh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new LC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new WE((i=>Qh.Vi(i,n)),this.serializer)}}class Fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>G_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JI.bind(null,this.syncEngine),await OI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const n=mf(e.databaseInfo.databaseId),i=dI(e.databaseInfo);return vI(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,c,m,v){return new EI(i,l,c,m,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>G_(this.syncEngine,n,0)),(function(){return B_.v()?new B_:new uI})())}createSyncEngine(e,n){return(function(l,c,m,v,E,b,I){const V=new qI(l,c,m,v,E,b);return I&&(V.gu=!0),V})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const c=at(l);ke(zo,"RemoteStore shutting down."),c.Ea.add(5),await gc(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Fm.provider={build:()=>new Fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="FirestoreClient";class i2{constructor(e,n,i,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=cr.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async m=>{ke($a,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(i,(m=>(ke($a,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=xp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ym(s,e){s.asyncQueue.verifyOperationInProgress(),ke($a,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await $E(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Q_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await s2(s);ke($a,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>q_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>q_(e.remoteStore,l))),s._onlineComponents=e}async function s2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke($a,"Using user provided OfflineComponentProvider");try{await ym(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ye.FAILED_PRECONDITION||l.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ml("Error using user provided cache. Falling back to memory cache: "+n),await ym(s,new Wh)}}else ke($a,"Using default OfflineComponentProvider"),await ym(s,new n2(void 0));return s._offlineComponents}async function pb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke($a,"Using user provided OnlineComponentProvider"),await Q_(s,s._uninitializedComponentsProvider._online)):(ke($a,"Using default OnlineComponentProvider"),await Q_(s,new Fm))),s._onlineComponents}function a2(s){return pb(s).then((e=>e.syncEngine))}async function o2(s){const e=await pb(s),n=e.eventManager;return n.onListen=HI.bind(null,e.syncEngine),n.onUnlisten=GI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YI.bind(null,e.syncEngine),n}function l2(s,e,n={}){const i=new Ka;return s.asyncQueue.enqueueAndForget((async()=>(function(c,m,v,E,b){const I=new r2({next:U=>{I.Nu(),m.enqueueAndForget((()=>MI(c,V)));const se=U.docs.has(v);!se&&U.fromCache?b.reject(new qe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):se&&U.fromCache&&E&&E.source==="server"?b.reject(new qe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(U)},error:U=>b.reject(U)}),V=new UI(pp(v.path),I,{includeMetadataChanges:!0,Ka:!0});return VI(c,V)})(await o2(s),s.asyncQueue,e,n,i))),i.promise}function u2(s,e){const n=new Ka;return s.asyncQueue.enqueueAndForget((async()=>QI(await a2(s),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="ComponentProvider",X_=new Map;function h2(s,e,n,i,l){return new CR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,gb(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firestore.googleapis.com",W_=!0;class $_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yb,this.ssl=W_}else this.host=e.host,this.ssl=e.ssl??W_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MC)throw new qe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new qe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new qe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new qe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new sR;switch(i.type){case"firstParty":return new uR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new qe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=X_.get(n);i&&(ke(c2,"Removing Datastore"),X_.delete(n),i.terminate())})(this),Promise.resolve()}}function f2(s,e,n,i={}){var b;s=Ju(s,kp);const l=zl(e),c=s._getSettings(),m={...c,emulatorOptions:s._getEmulatorOptions()},v=`${e}:${n}`;l&&(d0(`https://${v}`),m0("Firestore",!0)),c.host!==yb&&c.host!==v&&Ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:v,ssl:l,emulatorOptions:i};if(!Po(E,m)&&(s._setSettings(E),i.mockUserToken)){let I,V;if(typeof i.mockUserToken=="string")I=i.mockUserToken,V=cr.MOCK_USER;else{I=dw(i.mockUserToken,(b=s._app)==null?void 0:b.options.projectId);const U=i.mockUserToken.sub||i.mockUserToken.user_id;if(!U)throw new qe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");V=new cr(U)}s._authCredentials=new aR(new oE(I,V))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vp(this.firestore,e,this._query)}}class Gn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(dc(n,Gn._jsonSchema))return new Gn(e,i||null,new Qe(un.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:In("string",Gn._jsonSchemaVersion),referencePath:In("string")};class ac extends Vp{constructor(e,n,i){super(e,n,pp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Qe(e))}withConverter(e){return new ac(this.firestore,e,this._path)}}function Z_(s,e,...n){if(s=Yr(s),arguments.length===1&&(e=lp.newId()),pR("doc","path",e),s instanceof kp){const i=un.fromString(e,...n);return h_(i),new Gn(s,null,new Qe(i))}{if(!(s instanceof Gn||s instanceof ac))throw new qe(ye.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(un.fromString(e,...n));return h_(i),new Gn(s.firestore,s instanceof ac?s.converter:null,new Qe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="AsyncQueue";class e0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JE(this,"async_queue_retry"),this._c=()=>{const i=gm();i&&ke(J_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ka;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Gl(e))throw e;ke(J_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Js("INTERNAL UNHANDLED ERROR: ",t0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Ip.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ze(47125,{Pc:t0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Mp extends kp{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new e0,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e0(e),this._firestoreClient=void 0,await e}}}function d2(s,e){const n=typeof s=="object"?s:Zm(),i=typeof s=="string"?s:zh,l=$m(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const c=hw("firestore");c&&f2(l,...c)}return l}function vb(s){if(s._terminated)throw new qe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||m2(s),s._firestoreClient}function m2(s){var i,l,c,m;const e=s._freezeSettings(),n=h2(s._databaseId,((i=s._app)==null?void 0:i.options.appId)||"",s._persistenceKey,(l=s._app)==null?void 0:l.options.apiKey,e);s._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((m=e.localCache)!=null&&m._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new i2(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(E){const b=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(b),_online:b}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ei(tr.fromBase64String(e))}catch(n){throw new qe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ei(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dc(e,Ei._jsonSchema))return Ei.fromBase64String(e.bytes)}}Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:In("string",Ei._jsonSchemaVersion),bytes:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fs._jsonSchemaVersion}}static fromJSON(e){if(dc(e,fs._jsonSchema))return new fs(e.latitude,e.longitude)}}fs._jsonSchemaVersion="firestore/geoPoint/1.0",fs._jsonSchema={type:In("string",fs._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dc(e,qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qi(e.vectorValues);throw new qe(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:In("string",qi._jsonSchemaVersion),vectorValues:In("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=/^__.*__$/;class g2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}function bb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{dataSource:s})}}class Pp{constructor(e,n,i,l,c,m){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var l;const n=(l=this.path)==null?void 0:l.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var l;const n=(l=this.path)==null?void 0:l.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $h(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(bb(this.dataSource)&&p2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class y2{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||mf(e)}createContext(e,n,i,l=!1){return new Pp({dataSource:e,methodName:n,targetDoc:i,path:er.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v2(s){const e=s._freezeSettings(),n=mf(s._databaseId);return new y2(s._databaseId,!!e.ignoreUndefinedProperties,n)}function _2(s,e,n,i,l,c={}){const m=s.createContext(c.merge||c.mergeFields?2:0,e,n,l);Ab("Data must be an object, but it was:",m,i);const v=wb(i,m);let E,b;if(c.merge)E=new zi(m.fieldMask),b=m.fieldTransforms;else if(c.mergeFields){const I=[];for(const V of c.mergeFields){const U=Lp(e,V,n);if(!m.contains(U))throw new qe(ye.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);T2(I,U)||I.push(U)}E=new zi(I),b=m.fieldTransforms.filter((V=>E.covers(V.field)))}else E=null,b=m.fieldTransforms;return new g2(new _i(v),E,b)}function Tb(s,e){if(Sb(s=Yr(s)))return Ab("Unsupported field value:",e,s),wb(s,e);if(s instanceof Eb)return(function(i,l){if(!bb(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const c=[];let m=0;for(const v of i){let E=Tb(v,l.childContextForArray(m));E==null&&(E={nullValue:"NULL_VALUE"}),c.push(E),m++}return{arrayValue:{values:c}}})(s,e)}return(function(i,l){if((i=Yr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JR(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=$t.fromDate(i);return{timestampValue:Yh(l.serializer,c)}}if(i instanceof $t){const c=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yh(l.serializer,c)}}if(i instanceof fs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ei)return{bytesValue:zE(l.serializer,i._byteString)};if(i instanceof Gn){const c=l.databaseId,m=i.firestore._databaseId;if(!m.isEqual(c))throw l.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:_p(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof qi)return(function(m,v){const E=m instanceof qi?m.toArray():m;return{mapValue:{fields:{[gE]:{stringValue:yE},[qh]:{arrayValue:{values:E.map((I=>{if(typeof I!="number")throw v.createError("VectorValues must only contain numeric values.");return gp(v.serializer,I)}))}}}}}})(i,l);if(QE(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${up(i)}`)})(s,e)}function wb(s,e){const n={};return cE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(s,((i,l)=>{const c=Tb(l,e.childContextForField(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Sb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $t||s instanceof fs||s instanceof Ei||s instanceof Gn||s instanceof Eb||s instanceof qi||QE(s))}function Ab(s,e,n){if(!Sb(n)||!lE(n)){const i=up(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Lp(s,e,n){if((e=Yr(e))instanceof _b)return e._internalPath;if(typeof e=="string")return b2(s,e);throw $h("Field path arguments must be of type string or ",s,!1,void 0,n)}const E2=new RegExp("[~\\*/\\[\\]]");function b2(s,e,n){if(e.search(E2)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new _b(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function $h(s,e,n,i,l){const c=i&&!i.isEmpty(),m=l!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let E="";return(c||m)&&(E+=" (found",c&&(E+=` in field ${i}`),m&&(E+=` in document ${l}`),E+=")"),new qe(ye.INVALID_ARGUMENT,v+s+E)}function T2(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{convertValue(e,n="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ko(e,((l,c)=>{i[l]=this.convertValue(c,n)})),i}convertVectorValue(e){var i,l,c;const n=(c=(l=(i=e.fields)==null?void 0:i[qh].arrayValue)==null?void 0:l.values)==null?void 0:c.map((m=>vn(m.doubleValue)));return new qi(n)}convertGeoPoint(e){return new fs(vn(e.latitude),vn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=of(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const n=Ya(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=un.fromString(e);Mt(YE(i),9688,{name:e});const l=new nc(i.get(1),i.get(3)),c=new Qe(i.popFirst(5));return l.isEqual(n)||Js(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2 extends w2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}const n0="@firebase/firestore",r0="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,i,l,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Lp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A2 extends Rb{data(){return super.data()}}function R2(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class zu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vo extends Rb{constructor(e,n,i,l,c,m){super(e,n,i,l,m),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Lp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vo._jsonSchema={type:In("string",Vo._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class Oh extends Vo{data(e={}){return super.data(e)}}class Qu{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new zu(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Oh(this._firestore,this._userDataWriter,i.key,i,new zu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let m=0;return l._snapshot.docChanges.map((v=>{const E=new Oh(l._firestore,l._userDataWriter,v.doc.key,v.doc,new zu(l._snapshot.mutatedKeys.has(v.doc.key),l._snapshot.fromCache),l.query.converter);return v.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((v=>c||v.type!==3)).map((v=>{const E=new Oh(l._firestore,l._userDataWriter,v.doc.key,v.doc,new zu(l._snapshot.mutatedKeys.has(v.doc.key),l._snapshot.fromCache),l.query.converter);let b=-1,I=-1;return v.type!==0&&(b=m.indexOf(v.doc.key),m=m.delete(v.doc.key)),v.type!==1&&(m=m.add(v.doc),I=m.indexOf(v.doc.key)),{type:C2(v.type),doc:E,oldIndex:b,newIndex:I}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qu._jsonSchemaVersion="firestore/querySnapshot/1.0",Qu._jsonSchema={type:In("string",Qu._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(s){s=Ju(s,Gn);const e=Ju(s.firestore,Mp),n=vb(e);return l2(n,s._key).then((i=>O2(e,s,i)))}function x2(s,e,n){s=Ju(s,Gn);const i=Ju(s.firestore,Mp),l=R2(s.converter,e,n),c=v2(i);return D2(i,[_2(c,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Ws.none())])}function D2(s,e){const n=vb(s);return u2(n,e)}function O2(s,e,n){const i=n.docs.get(e._key),l=new S2(s);return new Vo(s,l,e._key,i,new zu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){iR(ql),Vl(new Lo("firestore",((i,{instanceIdentifier:l,options:c})=>{const m=i.getProvider("app").getImmediate(),v=new Mp(new oR(i.getProvider("auth-internal")),new cR(m,i.getProvider("app-check-internal")),IR(m,l),m);return c={useFetchStreams:n,...c},v._setSettings(c),v}),"PUBLIC").setMultipleInstances(!0)),Ha(n0,r0,e),Ha(n0,r0,"esm2020")})();var wl={};const Km={apiKey:wl.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:wl.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:wl.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:wl.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:wl.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:wl.NEXT_PUBLIC_FIREBASE_APP_ID};typeof window<"u"&&(console.log("Firebase Project ID carregado:",Km.projectId),Km.apiKey||console.error("ALERTA: Variveis de ambiente no detectadas!"));let Up;try{Up=DS().length>0?Zm():y0(Km)}catch(s){console.error("Erro ao inicializar Firebase:",s)}const Mo=nR(Up),i0=d2(Up),N2=6e5,qo="AES-GCM",jp=256;function Ho(s){return btoa(String.fromCharCode(...new Uint8Array(s)))}function Zh(s){const e=atob(s),n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n.buffer}async function vm(s,e){const n=new TextEncoder,i=await window.crypto.subtle.importKey("raw",n.encode(s),"PBKDF2",!1,["deriveBits"]),l=await window.crypto.subtle.deriveBits({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},i,256);return Ho(l)}async function Oo(s,e){const n=new TextEncoder,i=await window.crypto.subtle.importKey("raw",n.encode(s),"PBKDF2",!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:N2,hash:"SHA-256"},i,{name:qo,length:jp},!0,["encrypt","decrypt","wrapKey","unwrapKey"])}async function k2(){return window.crypto.subtle.generateKey({name:qo,length:jp},!0,["encrypt","decrypt"])}async function V2(s,e){const n=new TextEncoder,i=window.crypto.getRandomValues(new Uint8Array(12)),l=n.encode(s),c=await window.crypto.subtle.encrypt({name:qo,iv:i},e,l);return{ciphertext:Ho(c),iv:Ho(i.buffer)}}async function M2(s,e,n){const i=new TextDecoder,l=Zh(s),c=Zh(e),m=await window.crypto.subtle.decrypt({name:qo,iv:new Uint8Array(c)},n,l);return i.decode(m)}function P2(){const s=new Uint8Array(24);return window.crypto.getRandomValues(s),Ho(s.buffer).replace(/[^a-zA-Z0-9]/g,"").slice(0,32).toUpperCase()}async function bh(s,e){const n=window.crypto.getRandomValues(new Uint8Array(12)),i=await window.crypto.subtle.encrypt({name:qo,iv:n},e,await window.crypto.subtle.exportKey("raw",s));return{ciphertext:Ho(i),iv:Ho(n.buffer)}}async function _m(s,e){const n=await window.crypto.subtle.decrypt({name:qo,iv:new Uint8Array(Zh(s.iv))},e,Zh(s.ciphertext));return window.crypto.subtle.importKey("raw",n,{name:qo,length:jp},!0,["encrypt","decrypt"])}var Nh={exports:{}},L2=Nh.exports,s0;function U2(){return s0||(s0=1,(function(s,e){(function(n,i){s.exports=i()})(L2,function(){var n=function(h,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(g[S]=_[S])})(h,d)},i=function(){return(i=Object.assign||function(h){for(var d,g=1,_=arguments.length;g<_;g++)for(var S in d=arguments[g])Object.prototype.hasOwnProperty.call(d,S)&&(h[S]=d[S]);return h}).apply(this,arguments)};function l(h,d,g){for(var _,S=0,A=d.length;S<A;S++)!_&&S in d||((_=_||Array.prototype.slice.call(d,0,S))[S]=d[S]);return h.concat(_||Array.prototype.slice.call(d))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:FT,m=Object.keys,v=Array.isArray;function E(h,d){return typeof d!="object"||m(d).forEach(function(g){h[g]=d[g]}),h}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var b=Object.getPrototypeOf,I={}.hasOwnProperty;function V(h,d){return I.call(h,d)}function U(h,d){typeof d=="function"&&(d=d(b(h))),(typeof Reflect>"u"?m:Reflect.ownKeys)(d).forEach(function(g){pe(h,g,d[g])})}var se=Object.defineProperty;function pe(h,d,g,_){se(h,d,E(g&&V(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},_))}function Se(h){return{from:function(d){return h.prototype=Object.create(d.prototype),pe(h.prototype,"constructor",h),{extend:U.bind(null,h.prototype)}}}}var Ee=Object.getOwnPropertyDescriptor,Le=[].slice;function Ne(h,d,g){return Le.call(h,d,g)}function Ye(h,d){return d(h)}function ht(h){if(!h)throw new Error("Assertion Failed")}function Ue(h){c.setImmediate?setImmediate(h):setTimeout(h,0)}function Re(h,d){if(typeof d=="string"&&V(h,d))return h[d];if(!d)return h;if(typeof d!="string"){for(var g=[],_=0,S=d.length;_<S;++_){var A=Re(h,d[_]);g.push(A)}return g}var x=d.indexOf(".");if(x!==-1){var L=h[d.substr(0,x)];return L==null?void 0:Re(L,d.substr(x+1))}}function P(h,d,g){if(h&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof d!="string"&&"length"in d){ht(typeof g!="string"&&"length"in g);for(var _=0,S=d.length;_<S;++_)P(h,d[_],g[_])}else{var A,x,L=d.indexOf(".");L!==-1?(A=d.substr(0,L),(x=d.substr(L+1))===""?g===void 0?v(h)&&!isNaN(parseInt(A))?h.splice(A,1):delete h[A]:h[A]=g:P(L=!(L=h[A])||!V(h,A)?h[A]={}:L,x,g)):g===void 0?v(h)&&!isNaN(parseInt(d))?h.splice(d,1):delete h[d]:h[d]=g}}function O(h){var d,g={};for(d in h)V(h,d)&&(g[d]=h[d]);return g}var D=[].concat;function M(h){return D.apply([],h)}var gr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(M([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(d){return d+h+"Array"})}))).filter(function(h){return c[h]}),j=new Set(gr.map(function(h){return c[h]})),X=null;function k(h){return X=new WeakMap,h=(function d(g){if(!g||typeof g!="object")return g;var _=X.get(g);if(_)return _;if(v(g)){_=[],X.set(g,_);for(var S=0,A=g.length;S<A;++S)_.push(d(g[S]))}else if(j.has(g.constructor))_=g;else{var x,L=b(g);for(x in _=L===Object.prototype?{}:Object.create(L),X.set(g,_),g)V(g,x)&&(_[x]=d(g[x]))}return _})(h),X=null,h}var Ct={}.toString;function kt(h){return Ct.call(h).slice(8,-1)}var fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ze=typeof fe=="symbol"?function(h){var d;return h!=null&&(d=h[fe])&&d.apply(h)}:function(){return null};function Ve(h,d){return d=h.indexOf(d),0<=d&&h.splice(d,1),0<=d}var dt={};function z(h){var d,g,_,S;if(arguments.length===1){if(v(h))return h.slice();if(this===dt&&typeof h=="string")return[h];if(S=ze(h)){for(g=[];!(_=S.next()).done;)g.push(_.value);return g}if(h==null)return[h];if(typeof(d=h.length)!="number")return[h];for(g=new Array(d);d--;)g[d]=h[d];return g}for(d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];return g}var ve=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Mr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Mr),Ge={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function je(h,d){this.name=h,this.message=d}function Oe(h,d){return h+". Errors: "+Object.keys(d).map(function(g){return d[g].toString()}).filter(function(g,_,S){return S.indexOf(g)===_}).join(`
`)}function ot(h,d,g,_){this.failures=d,this.failedKeys=_,this.successCount=g,this.message=Oe(h,d)}function Xe(h,d){this.name="BulkError",this.failures=Object.keys(d).map(function(g){return d[g]}),this.failuresByPos=d,this.message=Oe(h,this.failures)}Se(je).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Se(ot).from(je),Se(Xe).from(je);var rn=vr.reduce(function(h,d){return h[d]=d+"Error",h},{}),_t=je,xe=vr.reduce(function(h,d){var g=d+"Error";function _(S,A){this.name=g,S?typeof S=="string"?(this.message="".concat(S).concat(A?`
 `+A:""),this.inner=A||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=Ge[d]||g,this.inner=null)}return Se(_).from(_t),h[d]=_,h},{});xe.Syntax=SyntaxError,xe.Type=TypeError,xe.Range=RangeError;var Pt=Mr.reduce(function(h,d){return h[d+"Error"]=xe[d],h},{}),Yn=vr.reduce(function(h,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(h[d+"Error"]=xe[d]),h},{});function gt(){}function jn(h){return h}function ps(h,d){return h==null||h===jn?d:function(g){return d(h(g))}}function br(h,d){return function(){h.apply(this,arguments),d.apply(this,arguments)}}function Qr(h,d){return h===gt?d:function(){var g=h.apply(this,arguments);g!==void 0&&(arguments[0]=g);var _=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var A=d.apply(this,arguments);return _&&(this.onsuccess=this.onsuccess?br(_,this.onsuccess):_),S&&(this.onerror=this.onerror?br(S,this.onerror):S),A!==void 0?A:g}}function gs(h,d){return h===gt?d:function(){h.apply(this,arguments);var g=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?br(g,this.onsuccess):g),_&&(this.onerror=this.onerror?br(_,this.onerror):_)}}function ys(h,d){return h===gt?d:function(g){var _=h.apply(this,arguments);E(g,_);var S=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=d.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?br(S,this.onsuccess):S),A&&(this.onerror=this.onerror?br(A,this.onerror):A),_===void 0?g===void 0?void 0:g:E(_,g)}}function hn(h,d){return h===gt?d:function(){return d.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function sn(h,d){return h===gt?d:function(){var g=h.apply(this,arguments);if(g&&typeof g.then=="function"){for(var _=this,S=arguments.length,A=new Array(S);S--;)A[S]=arguments[S];return g.then(function(){return d.apply(_,A)})}return d.apply(this,arguments)}}Yn.ModifyError=ot,Yn.DexieError=je,Yn.BulkError=Xe;var xn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xo(h){xn=h}var Fi={},dr=100,gr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,b(h),h];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,b(d),h]})(),Mr=gr[0],vr=gr[1],gr=gr[2],vr=vr&&vr.then,bi=Mr&&Mr.constructor,vs=!!gr,Tr=function(h,d){fn.push([h,d]),_s&&(queueMicrotask(Ql),_s=!1)},eo=!0,_s=!0,Xr=[],Es=[],mr=jn,qt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:gt,pgp:!1,env:{},finalize:gt},Me=qt,fn=[],Zt=0,Ti=[];function De(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=Me;if(typeof h!="function"){if(h!==Fi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Jt(this,this._value))}this._state=null,this._value=null,++d.ref,(function g(_,S){try{S(function(A){if(_._state===null){if(A===_)throw new TypeError("A promise cannot be resolved with itself.");var x=_._lib&&Si();A&&typeof A.then=="function"?g(_,function(L,F){A instanceof De?A._then(L,F):A.then(L,F)}):(_._state=!0,_._value=A,Pr(_)),x&&nr()}},Jt.bind(null,_))}catch(A){Jt(_,A)}})(this,h)}var wi={get:function(){var h=Me,d=na;function g(_,S){var A=this,x=!h.global&&(h!==Me||d!==na),L=x&&!On(),F=new De(function(q,W){wr(A,new Ki(Ri(_,h,x,L),Ri(S,h,x,L),q,W,h))});return this._consoleTask&&(F._consoleTask=this._consoleTask),F}return g.prototype=Fi,g},set:function(h){pe(this,"then",h&&h.prototype===Fi?wi:{get:function(){return h},set:wi.set})}};function Ki(h,d,g,_,S){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof d=="function"?d:null,this.resolve=g,this.reject=_,this.psd=S}function Jt(h,d){var g,_;Es.push(d),h._state===null&&(g=h._lib&&Si(),d=mr(d),h._state=!1,h._value=d,_=h,Xr.some(function(S){return S._value===_._value})||Xr.push(_),Pr(h),g&&nr())}function Pr(h){var d=h._listeners;h._listeners=[];for(var g=0,_=d.length;g<_;++g)wr(h,d[g]);var S=h._PSD;--S.ref||S.finalize(),Zt===0&&(++Zt,Tr(function(){--Zt==0&&bs()},[]))}function wr(h,d){if(h._state!==null){var g=h._state?d.onFulfilled:d.onRejected;if(g===null)return(h._state?d.resolve:d.reject)(h._value);++d.psd.ref,++Zt,Tr(Lr,[g,h,d])}else h._listeners.push(d)}function Lr(h,d,g){try{var _,S=d._value;!d._state&&Es.length&&(Es=[]),_=xn&&d._consoleTask?d._consoleTask.run(function(){return h(S)}):h(S),d._state||Es.indexOf(S)!==-1||(function(A){for(var x=Xr.length;x;)if(Xr[--x]._value===A._value)return Xr.splice(x,1)})(d),g.resolve(_)}catch(A){g.reject(A)}finally{--Zt==0&&bs(),--g.psd.ref||g.psd.finalize()}}function Ql(){pr(qt,function(){Si()&&nr()})}function Si(){var h=eo;return _s=eo=!1,h}function nr(){var h,d,g;do for(;0<fn.length;)for(h=fn,fn=[],g=h.length,d=0;d<g;++d){var _=h[d];_[0].apply(null,_[1])}while(0<fn.length);_s=eo=!0}function bs(){var h=Xr;Xr=[],h.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)});for(var d=Ti.slice(0),g=d.length;g;)d[--g]()}function Wr(h){return new De(Fi,!1,h)}function Ot(h,d){var g=Me;return function(){var _=Si(),S=Me;try{return Zr(g,!0),h.apply(this,arguments)}catch(A){d&&d(A)}finally{Zr(S,!1),_&&nr()}}}U(De.prototype,{then:wi,_then:function(h,d){wr(this,new Ki(null,null,h,d,Me))},catch:function(h){if(arguments.length===1)return this.then(null,h);var d=h,g=arguments[1];return typeof d=="function"?this.then(null,function(_){return(_ instanceof d?g:Wr)(_)}):this.then(null,function(_){return(_&&_.name===d?g:Wr)(_)})},finally:function(h){return this.then(function(d){return De.resolve(h()).then(function(){return d})},function(d){return De.resolve(h()).then(function(){return Wr(d)})})},timeout:function(h,d){var g=this;return h<1/0?new De(function(_,S){var A=setTimeout(function(){return S(new xe.Timeout(d))},h);g.then(_,S).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&pe(De.prototype,Symbol.toStringTag,"Dexie.Promise"),qt.env=ra(),U(De,{all:function(){var h=z.apply(null,arguments).map($r);return new De(function(d,g){h.length===0&&d([]);var _=h.length;h.forEach(function(S,A){return De.resolve(S).then(function(x){h[A]=x,--_||d(h)},g)})})},resolve:function(h){return h instanceof De?h:h&&typeof h.then=="function"?new De(function(d,g){h.then(d,g)}):new De(Fi,!0,h)},reject:Wr,race:function(){var h=z.apply(null,arguments).map($r);return new De(function(d,g){h.map(function(_){return De.resolve(_).then(d,g)})})},PSD:{get:function(){return Me},set:function(h){return Me=h}},totalEchoes:{get:function(){return na}},newPSD:Ut,usePSD:pr,scheduler:{get:function(){return Tr},set:function(h){Tr=h}},rejectionMapper:{get:function(){return mr},set:function(h){mr=h}},follow:function(h,d){return new De(function(g,_){return Ut(function(S,A){var x=Me;x.unhandleds=[],x.onunhandled=A,x.finalize=br(function(){var L,F=this;L=function(){F.unhandleds.length===0?S():A(F.unhandleds[0])},Ti.push(function q(){L(),Ti.splice(Ti.indexOf(q),1)}),++Zt,Tr(function(){--Zt==0&&bs()},[])},x.finalize),h()},d,g,_)})}}),bi&&(bi.allSettled&&pe(De,"allSettled",function(){var h=z.apply(null,arguments).map($r);return new De(function(d){h.length===0&&d([]);var g=h.length,_=new Array(g);h.forEach(function(S,A){return De.resolve(S).then(function(x){return _[A]={status:"fulfilled",value:x}},function(x){return _[A]={status:"rejected",reason:x}}).then(function(){return--g||d(_)})})})}),bi.any&&typeof AggregateError<"u"&&pe(De,"any",function(){var h=z.apply(null,arguments).map($r);return new De(function(d,g){h.length===0&&g(new AggregateError([]));var _=h.length,S=new Array(_);h.forEach(function(A,x){return De.resolve(A).then(function(L){return d(L)},function(L){S[x]=L,--_||g(new AggregateError(S))})})})}));var en={awaits:0,echoes:0,id:0},to=0,Ai=[],Ur=0,na=0,Dn=0;function Ut(h,d,g,_){var S=Me,A=Object.create(S);return A.parent=S,A.ref=0,A.global=!1,A.id=++Dn,qt.env,A.env=vs?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},d&&E(A,d),++S.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},_=pr(A,h,g,_),A.ref===0&&A.finalize(),_}function tn(){return en.id||(en.id=++to),++en.awaits,en.echoes+=dr,en.id}function On(){return!!en.awaits&&(--en.awaits==0&&(en.id=0),en.echoes=en.awaits*dr,!0)}function $r(h){return en.echoes&&h&&h.constructor===bi?(tn(),h.then(function(d){return On(),d},function(d){return On(),It(d)})):h}function Wo(){var h=Ai[Ai.length-1];Ai.pop(),Zr(h,!1)}function Zr(h,d){var g,_=Me;(d?!en.echoes||Ur++&&h===Me:!Ur||--Ur&&h===Me)||queueMicrotask(d?(function(S){++na,en.echoes&&--en.echoes!=0||(en.echoes=en.awaits=en.id=0),Ai.push(Me),Zr(S,!0)}).bind(null,h):Wo),h!==Me&&(Me=h,_===qt&&(qt.env=ra()),vs&&(g=qt.env.Promise,d=h.env,(_.global||h.global)&&(Object.defineProperty(c,"Promise",d.PromiseProp),g.all=d.all,g.race=d.race,g.resolve=d.resolve,g.reject=d.reject,d.allSettled&&(g.allSettled=d.allSettled),d.any&&(g.any=d.any))))}function ra(){var h=c.Promise;return vs?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function pr(h,d,g,_,S){var A=Me;try{return Zr(h,!0),d(g,_,S)}finally{Zr(A,!1)}}function Ri(h,d,g,_){return typeof h!="function"?h:function(){var S=Me;g&&tn(),Zr(d,!0);try{return h.apply(this,arguments)}finally{Zr(S,!1),_&&queueMicrotask(On)}}}function Sr(h){Promise===bi&&en.echoes===0?Ur===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+vr).indexOf("[native code]")===-1&&(tn=On=gt);var It=De.reject,Nn="",nn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Gt="String expected.",Ci=[],Gi="__dbnames",Ar="readonly",jr="readwrite";function gn(h,d){return h?d?function(){return h.apply(this,arguments)&&d.apply(this,arguments)}:h:d}var ia={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yi(h){return typeof h!="string"||/\./.test(h)?function(d){return d}:function(d){return d[h]===void 0&&h in d&&delete(d=k(d))[h],d}}function sa(){throw xe.Type()}function mt(h,d){try{var g=Ts(h),_=Ts(d);if(g!==_)return g==="Array"?1:_==="Array"?-1:g==="binary"?1:_==="binary"?-1:g==="string"?1:_==="string"?-1:g==="Date"?1:_!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return d<h?1:h<d?-1:0;case"binary":return(function(S,A){for(var x=S.length,L=A.length,F=x<L?x:L,q=0;q<F;++q)if(S[q]!==A[q])return S[q]<A[q]?-1:1;return x===L?0:x<L?-1:1})(rr(h),rr(d));case"Array":return(function(S,A){for(var x=S.length,L=A.length,F=x<L?x:L,q=0;q<F;++q){var W=mt(S[q],A[q]);if(W!==0)return W}return x===L?0:x<L?-1:1})(h,d)}}catch{}return NaN}function Ts(h){var d=typeof h;return d!="object"?d:ArrayBuffer.isView(h)?"binary":(h=kt(h),h==="ArrayBuffer"?"binary":h)}function rr(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}var an=(rt.prototype._trans=function(h,d,g){var _=this._tx||Me.trans,S=this.name,A=xn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function x(q,W,B){if(!B.schema[S])throw new xe.NotFound("Table "+S+" not part of transaction");return d(B.idbtrans,B)}var L=Si();try{var F=_&&_.db._novip===this.db._novip?_===Me.trans?_._promise(h,x,g):Ut(function(){return _._promise(h,x,g)},{trans:_,transless:Me.transless||Me}):(function q(W,B,Z,H){if(W.idbdb&&(W._state.openComplete||Me.letThrough||W._vip)){var K=W._createTransaction(B,Z,W._dbSchema);try{K.create(),W._state.PR1398_maxLoop=3}catch($){return $.name===rn.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return q(W,B,Z,H)})):It($)}return K._promise(B,function($,Y){return Ut(function(){return Me.trans=K,H($,Y,K)})}).then(function($){if(B==="readwrite")try{K.idbtrans.commit()}catch{}return B==="readonly"?$:K._completion.then(function(){return $})})}if(W._state.openComplete)return It(new xe.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return It(new xe.DatabaseClosed);W.open().catch(gt)}return W._state.dbReadyPromise.then(function(){return q(W,B,Z,H)})})(this.db,h,[this.name],x);return A&&(F._consoleTask=A,F=F.catch(function(q){return console.trace(q),It(q)})),F}finally{L&&nr()}},rt.prototype.get=function(h,d){var g=this;return h&&h.constructor===Object?this.where(h).first(d):h==null?It(new xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return g.core.get({trans:_,key:h}).then(function(S){return g.hook.reading.fire(S)})}).then(d)},rt.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(v(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var d=m(h);if(d.length===1)return this.where(d[0]).equals(h[d[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(F){if(F.compound&&d.every(function(W){return 0<=F.keyPath.indexOf(W)})){for(var q=0;q<d.length;++q)if(d.indexOf(F.keyPath[q])===-1)return!1;return!0}return!1}).sort(function(F,q){return F.keyPath.length-q.keyPath.length})[0];if(g&&this.db._maxKey!==Nn){var x=g.keyPath.slice(0,d.length);return this.where(x).equals(x.map(function(q){return h[q]}))}!g&&xn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var _=this.schema.idxByName,S=this.db._deps.indexedDB;function A(F,q){return S.cmp(F,q)===0}var L=d.reduce(function(Z,q){var W=Z[0],B=Z[1],Z=_[q],H=h[q];return[W||Z,W||!Z?gn(B,Z&&Z.multi?function(K){return K=Re(K,q),v(K)&&K.some(function($){return A(H,$)})}:function(K){return A(H,Re(K,q))}):B]},[null,null]),x=L[0],L=L[1];return x?this.where(x.name).equals(h[x.keyPath]).filter(L):g?this.filter(L):this.where(d).equals("")},rt.prototype.filter=function(h){return this.toCollection().and(h)},rt.prototype.count=function(h){return this.toCollection().count(h)},rt.prototype.offset=function(h){return this.toCollection().offset(h)},rt.prototype.limit=function(h){return this.toCollection().limit(h)},rt.prototype.each=function(h){return this.toCollection().each(h)},rt.prototype.toArray=function(h){return this.toCollection().toArray(h)},rt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},rt.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,v(h)?"[".concat(h.join("+"),"]"):h))},rt.prototype.reverse=function(){return this.toCollection().reverse()},rt.prototype.mapToClass=function(h){var d,g=this.db,_=this.name;function S(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof sa&&((function(F,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function W(){this.constructor=F}n(F,q),F.prototype=q===null?Object.create(q):(W.prototype=q.prototype,new W)})(S,d=h),Object.defineProperty(S.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),S.prototype.table=function(){return _},h=S);for(var A=new Set,x=h.prototype;x;x=b(x))Object.getOwnPropertyNames(x).forEach(function(F){return A.add(F)});function L(F){if(!F)return F;var q,W=Object.create(h.prototype);for(q in F)if(!A.has(q))try{W[q]=F[q]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=L,this.hook("reading",L),h},rt.prototype.defineClass=function(){return this.mapToClass(function(h){E(this,h)})},rt.prototype.add=function(h,d){var g=this,_=this.schema.primKey,S=_.auto,A=_.keyPath,x=h;return A&&S&&(x=Yi(A)(h)),this._trans("readwrite",function(L){return g.core.mutate({trans:L,type:"add",keys:d!=null?[d]:null,values:[x]})}).then(function(L){return L.numFailures?De.reject(L.failures[0]):L.lastResult}).then(function(L){if(A)try{P(h,A,L)}catch{}return L})},rt.prototype.update=function(h,d){return typeof h!="object"||v(h)?this.where(":id").equals(h).modify(d):(h=Re(h,this.schema.primKey.keyPath),h===void 0?It(new xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(d))},rt.prototype.put=function(h,d){var g=this,_=this.schema.primKey,S=_.auto,A=_.keyPath,x=h;return A&&S&&(x=Yi(A)(h)),this._trans("readwrite",function(L){return g.core.mutate({trans:L,type:"put",values:[x],keys:d!=null?[d]:null})}).then(function(L){return L.numFailures?De.reject(L.failures[0]):L.lastResult}).then(function(L){if(A)try{P(h,A,L)}catch{}return L})},rt.prototype.delete=function(h){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"delete",keys:[h]})}).then(function(g){return g.numFailures?De.reject(g.failures[0]):void 0})},rt.prototype.clear=function(){var h=this;return this._trans("readwrite",function(d){return h.core.mutate({trans:d,type:"deleteRange",range:ia})}).then(function(d){return d.numFailures?De.reject(d.failures[0]):void 0})},rt.prototype.bulkGet=function(h){var d=this;return this._trans("readonly",function(g){return d.core.getMany({keys:h,trans:g}).then(function(_){return _.map(function(S){return d.hook.reading.fire(S)})})})},rt.prototype.bulkAdd=function(h,d,g){var _=this,S=Array.isArray(d)?d:void 0,A=(g=g||(S?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function(x){var q=_.schema.primKey,L=q.auto,q=q.keyPath;if(q&&S)throw new xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var F=h.length,q=q&&L?h.map(Yi(q)):h;return _.core.mutate({trans:x,type:"add",keys:S,values:q,wantResults:A}).then(function(K){var B=K.numFailures,Z=K.results,H=K.lastResult,K=K.failures;if(B===0)return A?Z:H;throw new Xe("".concat(_.name,".bulkAdd(): ").concat(B," of ").concat(F," operations failed"),K)})})},rt.prototype.bulkPut=function(h,d,g){var _=this,S=Array.isArray(d)?d:void 0,A=(g=g||(S?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function(x){var q=_.schema.primKey,L=q.auto,q=q.keyPath;if(q&&S)throw new xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var F=h.length,q=q&&L?h.map(Yi(q)):h;return _.core.mutate({trans:x,type:"put",keys:S,values:q,wantResults:A}).then(function(K){var B=K.numFailures,Z=K.results,H=K.lastResult,K=K.failures;if(B===0)return A?Z:H;throw new Xe("".concat(_.name,".bulkPut(): ").concat(B," of ").concat(F," operations failed"),K)})})},rt.prototype.bulkUpdate=function(h){var d=this,g=this.core,_=h.map(function(x){return x.key}),S=h.map(function(x){return x.changes}),A=[];return this._trans("readwrite",function(x){return g.getMany({trans:x,keys:_,cache:"clone"}).then(function(L){var F=[],q=[];h.forEach(function(B,Z){var H=B.key,K=B.changes,$=L[Z];if($){for(var Y=0,ne=Object.keys(K);Y<ne.length;Y++){var oe=ne[Y],le=K[oe];if(oe===d.schema.primKey.keyPath){if(mt(le,H)!==0)throw new xe.Constraint("Cannot update primary key in bulkUpdate()")}else P($,oe,le)}A.push(Z),F.push(H),q.push($)}});var W=F.length;return g.mutate({trans:x,type:"put",keys:F,values:q,updates:{keys:_,changeSpecs:S}}).then(function(B){var Z=B.numFailures,H=B.failures;if(Z===0)return W;for(var K=0,$=Object.keys(H);K<$.length;K++){var Y,ne=$[K],oe=A[Number(ne)];oe!=null&&(Y=H[ne],delete H[ne],H[oe]=Y)}throw new Xe("".concat(d.name,".bulkUpdate(): ").concat(Z," of ").concat(W," operations failed"),H)})})})},rt.prototype.bulkDelete=function(h){var d=this,g=h.length;return this._trans("readwrite",function(_){return d.core.mutate({trans:_,type:"delete",keys:h})}).then(function(x){var S=x.numFailures,A=x.lastResult,x=x.failures;if(S===0)return A;throw new Xe("".concat(d.name,".bulkDelete(): ").concat(S," of ").concat(g," operations failed"),x)})},rt);function rt(){}function Rr(h){function d(x,L){if(L){for(var F=arguments.length,q=new Array(F-1);--F;)q[F-1]=arguments[F];return g[x].subscribe.apply(null,q),h}if(typeof x=="string")return g[x]}var g={};d.addEventType=A;for(var _=1,S=arguments.length;_<S;++_)A(arguments[_]);return d;function A(x,L,F){if(typeof x!="object"){var q;L=L||hn;var W={subscribers:[],fire:F=F||gt,subscribe:function(B){W.subscribers.indexOf(B)===-1&&(W.subscribers.push(B),W.fire=L(W.fire,B))},unsubscribe:function(B){W.subscribers=W.subscribers.filter(function(Z){return Z!==B}),W.fire=W.subscribers.reduce(L,F)}};return g[x]=d[x]=W}m(q=x).forEach(function(B){var Z=q[B];if(v(Z))A(B,q[B][0],q[B][1]);else{if(Z!=="asap")throw new xe.InvalidArgument("Invalid event config");var H=A(B,jn,function(){for(var K=arguments.length,$=new Array(K);K--;)$[K]=arguments[K];H.subscribers.forEach(function(Y){Ue(function(){Y.apply(null,$)})})})}})}}function Ii(h,d){return Se(d).from({prototype:h}),d}function yt(h,d){return!(h.filter||h.algorithm||h.or)&&(d?h.justLimit:!h.replayFilter)}function xi(h,d){h.filter=gn(h.filter,d)}function Cr(h,d,g){var _=h.replayFilter;h.replayFilter=_?function(){return gn(_(),d())}:d,h.justLimit=g&&!_}function Jr(h,d){if(h.isPrimKey)return d.primaryKey;var g=d.getIndexByKeyPath(h.index);if(!g)throw new xe.Schema("KeyPath "+h.index+" on object store "+d.name+" is not indexed");return g}function Qn(h,d,g){var _=Jr(h,d.schema);return d.openCursor({trans:g,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:_,range:h.range}})}function Di(h,d,g,_){var S=h.replayFilter?gn(h.filter,h.replayFilter()):h.filter;if(h.or){var A={},x=function(L,F,q){var W,B;S&&!S(F,q,function(Z){return F.stop(Z)},function(Z){return F.fail(Z)})||((B=""+(W=F.primaryKey))=="[object ArrayBuffer]"&&(B=""+new Uint8Array(W)),V(A,B)||(A[B]=!0,d(L,F,q)))};return Promise.all([h.or._iterate(x,g),no(Qn(h,_,g),h.algorithm,x,!h.keysOnly&&h.valueMapper)])}return no(Qn(h,_,g),gn(h.algorithm,S),d,!h.keysOnly&&h.valueMapper)}function no(h,d,g,_){var S=Ot(_?function(A,x,L){return g(_(A),x,L)}:g);return h.then(function(A){if(A)return A.start(function(){var x=function(){return A.continue()};d&&!d(A,function(L){return x=L},function(L){A.stop(L),x=gt},function(L){A.fail(L),x=gt})||S(A.value,A,function(L){return x=L}),x()})})}var gr=Symbol(),Ir=(ro.prototype.execute=function(h){if(this.add!==void 0){var d=this.add;if(v(d))return l(l([],v(h)?h:[],!0),d).sort();if(typeof d=="number")return(Number(h)||0)+d;if(typeof d=="bigint")try{return BigInt(h)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var g=this.remove;if(v(g))return v(h)?h.filter(function(_){return!g.includes(_)}).sort():[];if(typeof g=="number")return Number(h)-g;if(typeof g=="bigint")try{return BigInt(h)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return d=(d=this.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof h=="string"&&h.startsWith(d)?this.replacePrefix[1]+h.substring(d.length):h},ro);function ro(h){Object.assign(this,h)}var Qi=(et.prototype._read=function(h,d){var g=this._ctx;return g.error?g.table._trans(null,It.bind(null,g.error)):g.table._trans("readonly",h).then(d)},et.prototype._write=function(h){var d=this._ctx;return d.error?d.table._trans(null,It.bind(null,d.error)):d.table._trans("readwrite",h,"locked")},et.prototype._addAlgorithm=function(h){var d=this._ctx;d.algorithm=gn(d.algorithm,h)},et.prototype._iterate=function(h,d){return Di(this._ctx,h,d,this._ctx.table.core)},et.prototype.clone=function(h){var d=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return h&&E(g,h),d._ctx=g,d},et.prototype.raw=function(){return this._ctx.valueMapper=null,this},et.prototype.each=function(h){var d=this._ctx;return this._read(function(g){return Di(d,h,g,d.table.core)})},et.prototype.count=function(h){var d=this;return this._read(function(g){var _=d._ctx,S=_.table.core;if(yt(_,!0))return S.count({trans:g,query:{index:Jr(_,S.schema),range:_.range}}).then(function(x){return Math.min(x,_.limit)});var A=0;return Di(_,function(){return++A,!1},g,S).then(function(){return A})}).then(h)},et.prototype.sortBy=function(h,d){var g=h.split(".").reverse(),_=g[0],S=g.length-1;function A(F,q){return q?A(F[g[q]],q-1):F[_]}var x=this._ctx.dir==="next"?1:-1;function L(F,q){return F=A(F,S),q=A(q,S),F<q?-x:q<F?x:0}return this.toArray(function(F){return F.sort(L)}).then(d)},et.prototype.toArray=function(h){var d=this;return this._read(function(g){var _=d._ctx;if(_.dir==="next"&&yt(_,!0)&&0<_.limit){var S=_.valueMapper,A=Jr(_,_.table.core.schema);return _.table.core.query({trans:g,limit:_.limit,values:!0,query:{index:A,range:_.range}}).then(function(L){return L=L.result,S?L.map(S):L})}var x=[];return Di(_,function(L){return x.push(L)},g,_.table.core).then(function(){return x})},h)},et.prototype.offset=function(h){var d=this._ctx;return h<=0||(d.offset+=h,yt(d)?Cr(d,function(){var g=h;return function(_,S){return g===0||(g===1?--g:S(function(){_.advance(g),g=0}),!1)}}):Cr(d,function(){var g=h;return function(){return--g<0}})),this},et.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Cr(this._ctx,function(){var d=h;return function(g,_,S){return--d<=0&&_(S),0<=d}},!0),this},et.prototype.until=function(h,d){return xi(this._ctx,function(g,_,S){return!h(g.value)||(_(S),d)}),this},et.prototype.first=function(h){return this.limit(1).toArray(function(d){return d[0]}).then(h)},et.prototype.last=function(h){return this.reverse().first(h)},et.prototype.filter=function(h){var d;return xi(this._ctx,function(g){return h(g.value)}),(d=this._ctx).isMatch=gn(d.isMatch,h),this},et.prototype.and=function(h){return this.filter(h)},et.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},et.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},et.prototype.desc=function(){return this.reverse()},et.prototype.eachKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,_){h(_.key,_)})},et.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},et.prototype.eachPrimaryKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,_){h(_.primaryKey,_)})},et.prototype.keys=function(h){var d=this._ctx;d.keysOnly=!d.isMatch;var g=[];return this.each(function(_,S){g.push(S.key)}).then(function(){return g}).then(h)},et.prototype.primaryKeys=function(h){var d=this._ctx;if(d.dir==="next"&&yt(d,!0)&&0<d.limit)return this._read(function(_){var S=Jr(d,d.table.core.schema);return d.table.core.query({trans:_,values:!1,limit:d.limit,query:{index:S,range:d.range}})}).then(function(_){return _.result}).then(h);d.keysOnly=!d.isMatch;var g=[];return this.each(function(_,S){g.push(S.primaryKey)}).then(function(){return g}).then(h)},et.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},et.prototype.firstKey=function(h){return this.limit(1).keys(function(d){return d[0]}).then(h)},et.prototype.lastKey=function(h){return this.reverse().firstKey(h)},et.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var d={};return xi(this._ctx,function(S){var _=S.primaryKey.toString(),S=V(d,_);return d[_]=!0,!S}),this},et.prototype.modify=function(h){var d=this,g=this._ctx;return this._write(function(_){var S,A,x;x=typeof h=="function"?h:(S=m(h),A=S.length,function(Y){for(var ne=!1,oe=0;oe<A;++oe){var le=S[oe],ce=h[le],be=Re(Y,le);ce instanceof Ir?(P(Y,le,ce.execute(be)),ne=!0):be!==ce&&(P(Y,le,ce),ne=!0)}return ne});function L(Y,le){var oe=le.failures,le=le.numFailures;K+=Y-le;for(var ce=0,be=m(oe);ce<be.length;ce++){var Ce=be[ce];H.push(oe[Ce])}}var F=g.table.core,q=F.schema.primaryKey,W=q.outbound,B=q.extractKey,Z=d.db._options.modifyChunkSize||200,H=[],K=0,$=[];return d.clone().primaryKeys().then(function(Y){function ne(le){var ce=Math.min(Z,Y.length-le);return F.getMany({trans:_,keys:Y.slice(le,le+ce),cache:"immutable"}).then(function(be){for(var Ce=[],Te=[],Ae=W?[]:null,Ie=[],_e=0;_e<ce;++_e){var Fe=be[_e],Ke={value:k(Fe),primKey:Y[le+_e]};x.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?Ie.push(Y[le+_e]):W||mt(B(Fe),B(Ke.value))===0?(Te.push(Ke.value),W&&Ae.push(Y[le+_e])):(Ie.push(Y[le+_e]),Ce.push(Ke.value)))}return Promise.resolve(0<Ce.length&&F.mutate({trans:_,type:"add",values:Ce}).then(function(tt){for(var lt in tt.failures)Ie.splice(parseInt(lt),1);L(Ce.length,tt)})).then(function(){return(0<Te.length||oe&&typeof h=="object")&&F.mutate({trans:_,type:"put",keys:Ae,values:Te,criteria:oe,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<le}).then(function(tt){return L(Te.length,tt)})}).then(function(){return(0<Ie.length||oe&&h===aa)&&F.mutate({trans:_,type:"delete",keys:Ie,criteria:oe,isAdditionalChunk:0<le}).then(function(tt){return L(Ie.length,tt)})}).then(function(){return Y.length>le+ce&&ne(le+Z)})})}var oe=yt(g)&&g.limit===1/0&&(typeof h!="function"||h===aa)&&{index:g.index,range:g.range};return ne(0).then(function(){if(0<H.length)throw new ot("Error modifying one or more objects",H,K,$);return Y.length})})})},et.prototype.delete=function(){var h=this._ctx,d=h.range;return yt(h)&&(h.isPrimKey||d.type===3)?this._write(function(g){var _=h.table.core.schema.primaryKey,S=d;return h.table.core.count({trans:g,query:{index:_,range:S}}).then(function(A){return h.table.core.mutate({trans:g,type:"deleteRange",range:S}).then(function(x){var L=x.failures;if(x.lastResult,x.results,x=x.numFailures,x)throw new ot("Could not delete some values",Object.keys(L).map(function(F){return L[F]}),A-x);return A-x})})}):this.modify(aa)},et);function et(){}var aa=function(h,d){return d.value=null};function io(h,d){return h<d?-1:h===d?0:1}function so(h,d){return d<h?-1:h===d?0:1}function _n(h,d,g){return h=h instanceof la?new h.Collection(h):h,h._ctx.error=new(g||TypeError)(d),h}function Oi(h){return new h.Collection(h,function(){return oa("")}).limit(0)}function Br(h,d,g,_){var S,A,x,L,F,q,W,B=g.length;if(!g.every(function(K){return typeof K=="string"}))return _n(h,Gt);function Z(K){S=K==="next"?function(Y){return Y.toUpperCase()}:function(Y){return Y.toLowerCase()},A=K==="next"?function(Y){return Y.toLowerCase()}:function(Y){return Y.toUpperCase()},x=K==="next"?io:so;var $=g.map(function(Y){return{lower:A(Y),upper:S(Y)}}).sort(function(Y,ne){return x(Y.lower,ne.lower)});L=$.map(function(Y){return Y.upper}),F=$.map(function(Y){return Y.lower}),W=(q=K)==="next"?"":_}Z("next"),h=new h.Collection(h,function(){return yr(L[0],F[B-1]+_)}),h._ondirectionchange=function(K){Z(K)};var H=0;return h._addAlgorithm(function(K,$,Y){var ne=K.key;if(typeof ne!="string")return!1;var oe=A(ne);if(d(oe,F,H))return!0;for(var le=null,ce=H;ce<B;++ce){var be=(function(Ce,Te,Ae,Ie,_e,Fe){for(var Ke=Math.min(Ce.length,Ie.length),tt=-1,lt=0;lt<Ke;++lt){var ar=Te[lt];if(ar!==Ie[lt])return _e(Ce[lt],Ae[lt])<0?Ce.substr(0,lt)+Ae[lt]+Ae.substr(lt+1):_e(Ce[lt],Ie[lt])<0?Ce.substr(0,lt)+Ie[lt]+Ae.substr(lt+1):0<=tt?Ce.substr(0,tt)+Te[tt]+Ae.substr(tt+1):null;_e(Ce[lt],ar)<0&&(tt=lt)}return Ke<Ie.length&&Fe==="next"?Ce+Ae.substr(Ce.length):Ke<Ce.length&&Fe==="prev"?Ce.substr(0,Ae.length):tt<0?null:Ce.substr(0,tt)+Ie[tt]+Ae.substr(tt+1)})(ne,oe,L[ce],F[ce],x,q);be===null&&le===null?H=ce+1:(le===null||0<x(le,be))&&(le=be)}return $(le!==null?function(){K.continue(le+W)}:Y),!1}),h}function yr(h,d,g,_){return{type:2,lower:h,upper:d,lowerOpen:g,upperOpen:_}}function oa(h){return{type:1,lower:h,upper:h}}var la=(Object.defineProperty(St.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),St.prototype.between=function(h,d,g,_){g=g!==!1,_=_===!0;try{return 0<this._cmp(h,d)||this._cmp(h,d)===0&&(g||_)&&(!g||!_)?Oi(this):new this.Collection(this,function(){return yr(h,d,!g,!_)})}catch{return _n(this,nn)}},St.prototype.equals=function(h){return h==null?_n(this,nn):new this.Collection(this,function(){return oa(h)})},St.prototype.above=function(h){return h==null?_n(this,nn):new this.Collection(this,function(){return yr(h,void 0,!0)})},St.prototype.aboveOrEqual=function(h){return h==null?_n(this,nn):new this.Collection(this,function(){return yr(h,void 0,!1)})},St.prototype.below=function(h){return h==null?_n(this,nn):new this.Collection(this,function(){return yr(void 0,h,!1,!0)})},St.prototype.belowOrEqual=function(h){return h==null?_n(this,nn):new this.Collection(this,function(){return yr(void 0,h)})},St.prototype.startsWith=function(h){return typeof h!="string"?_n(this,Gt):this.between(h,h+Nn,!0,!0)},St.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):Br(this,function(d,g){return d.indexOf(g[0])===0},[h],Nn)},St.prototype.equalsIgnoreCase=function(h){return Br(this,function(d,g){return d===g[0]},[h],"")},St.prototype.anyOfIgnoreCase=function(){var h=z.apply(dt,arguments);return h.length===0?Oi(this):Br(this,function(d,g){return g.indexOf(d)!==-1},h,"")},St.prototype.startsWithAnyOfIgnoreCase=function(){var h=z.apply(dt,arguments);return h.length===0?Oi(this):Br(this,function(d,g){return g.some(function(_){return d.indexOf(_)===0})},h,Nn)},St.prototype.anyOf=function(){var h=this,d=z.apply(dt,arguments),g=this._cmp;try{d.sort(g)}catch{return _n(this,nn)}if(d.length===0)return Oi(this);var _=new this.Collection(this,function(){return yr(d[0],d[d.length-1])});_._ondirectionchange=function(A){g=A==="next"?h._ascending:h._descending,d.sort(g)};var S=0;return _._addAlgorithm(function(A,x,L){for(var F=A.key;0<g(F,d[S]);)if(++S===d.length)return x(L),!1;return g(F,d[S])===0||(x(function(){A.continue(d[S])}),!1)}),_},St.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},St.prototype.noneOf=function(){var h=z.apply(dt,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return _n(this,nn)}var d=h.reduce(function(g,_){return g?g.concat([[g[g.length-1][1],_]]):[[-1/0,_]]},null);return d.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},St.prototype.inAnyRange=function(ne,d){var g=this,_=this._cmp,S=this._ascending,A=this._descending,x=this._min,L=this._max;if(ne.length===0)return Oi(this);if(!ne.every(function(oe){return oe[0]!==void 0&&oe[1]!==void 0&&S(oe[0],oe[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",xe.InvalidArgument);var F=!d||d.includeLowers!==!1,q=d&&d.includeUppers===!0,W,B=S;function Z(oe,le){return B(oe[0],le[0])}try{(W=ne.reduce(function(oe,le){for(var ce=0,be=oe.length;ce<be;++ce){var Ce=oe[ce];if(_(le[0],Ce[1])<0&&0<_(le[1],Ce[0])){Ce[0]=x(Ce[0],le[0]),Ce[1]=L(Ce[1],le[1]);break}}return ce===be&&oe.push(le),oe},[])).sort(Z)}catch{return _n(this,nn)}var H=0,K=q?function(oe){return 0<S(oe,W[H][1])}:function(oe){return 0<=S(oe,W[H][1])},$=F?function(oe){return 0<A(oe,W[H][0])}:function(oe){return 0<=A(oe,W[H][0])},Y=K,ne=new this.Collection(this,function(){return yr(W[0][0],W[W.length-1][1],!F,!q)});return ne._ondirectionchange=function(oe){B=oe==="next"?(Y=K,S):(Y=$,A),W.sort(Z)},ne._addAlgorithm(function(oe,le,ce){for(var be,Ce=oe.key;Y(Ce);)if(++H===W.length)return le(ce),!1;return!K(be=Ce)&&!$(be)||(g._cmp(Ce,W[H][1])===0||g._cmp(Ce,W[H][0])===0||le(function(){B===S?oe.continue(W[H][0]):oe.continue(W[H][1])}),!1)}),ne},St.prototype.startsWithAnyOf=function(){var h=z.apply(dt,arguments);return h.every(function(d){return typeof d=="string"})?h.length===0?Oi(this):this.inAnyRange(h.map(function(d){return[d,d+Nn]})):_n(this,"startsWithAnyOf() only works with strings")},St);function St(){}function kn(h){return Ot(function(d){return ei(d),h(d.target.error),!1})}function ei(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var xr="storagemutated",ws="x-storagemutated-1",En=Rr(null,xr),Ni=(Vn.prototype._lock=function(){return ht(!Me.global),++this._reculock,this._reculock!==1||Me.global||(Me.lockOwnerFor=this),this},Vn.prototype._unlock=function(){if(ht(!Me.global),--this._reculock==0)for(Me.global||(Me.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{pr(h[1],h[0])}catch{}}return this},Vn.prototype._locked=function(){return this._reculock&&Me.lockOwnerFor!==this},Vn.prototype.create=function(h){var d=this;if(!this.mode)return this;var g=this.db.idbdb,_=this.db._state.dbOpenError;if(ht(!this.idbtrans),!h&&!g)switch(_&&_.name){case"DatabaseClosedError":throw new xe.DatabaseClosed(_);case"MissingAPIError":throw new xe.MissingAPI(_.message,_);default:throw new xe.OpenFailed(_)}if(!this.active)throw new xe.TransactionInactive;return ht(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ot(function(S){ei(S),d._reject(h.error)}),h.onabort=Ot(function(S){ei(S),d.active&&d._reject(new xe.Abort(h.error)),d.active=!1,d.on("abort").fire(S)}),h.oncomplete=Ot(function(){d.active=!1,d._resolve(),"mutatedParts"in h&&En.storagemutated.fire(h.mutatedParts)}),this},Vn.prototype._promise=function(h,d,g){var _=this;if(h==="readwrite"&&this.mode!=="readwrite")return It(new xe.ReadOnly("Transaction is readonly"));if(!this.active)return It(new xe.TransactionInactive);if(this._locked())return new De(function(A,x){_._blockedFuncs.push([function(){_._promise(h,d,g).then(A,x)},Me])});if(g)return Ut(function(){var A=new De(function(x,L){_._lock();var F=d(x,L,_);F&&F.then&&F.then(x,L)});return A.finally(function(){return _._unlock()}),A._lib=!0,A});var S=new De(function(A,x){var L=d(A,x,_);L&&L.then&&L.then(A,x)});return S._lib=!0,S},Vn.prototype._root=function(){return this.parent?this.parent._root():this},Vn.prototype.waitFor=function(h){var d,g=this._root(),_=De.resolve(h);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return _}):(g._waitingFor=_,g._waitingQueue=[],d=g.idbtrans.objectStore(g.storeNames[0]),(function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(d.get(-1/0).onsuccess=A)})());var S=g._waitingFor;return new De(function(A,x){_.then(function(L){return g._waitingQueue.push(Ot(A.bind(null,L)))},function(L){return g._waitingQueue.push(Ot(x.bind(null,L)))}).finally(function(){g._waitingFor===S&&(g._waitingFor=null)})})},Vn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new xe.Abort))},Vn.prototype.table=function(h){var d=this._memoizedTables||(this._memoizedTables={});if(V(d,h))return d[h];var g=this.schema[h];if(!g)throw new xe.NotFound("Table "+h+" not part of transaction");return g=new this.db.Table(h,g,this),g.core=this.db.core.table(h),d[h]=g},Vn);function Vn(){}function ir(h,d,g,_,S,A,x){return{name:h,keyPath:d,unique:g,multi:_,auto:S,compound:A,src:(g&&!x?"&":"")+(_?"*":"")+(S?"++":"")+Lt(d)}}function Lt(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function Xi(h,d,g){return{name:h,primKey:d,indexes:g,mappedClass:null,idxByName:(_=function(S){return[S.name,S]},g.reduce(function(S,A,x){return x=_(A,x),x&&(S[x[0]]=x[1]),S},{}))};var _}var Wi=function(h){try{return h.only([[]]),Wi=function(){return[[]]},[[]]}catch{return Wi=function(){return Nn},Nn}};function ki(h){return h==null?function(){}:typeof h=="string"?(d=h).split(".").length===1?function(g){return g[d]}:function(g){return Re(g,d)}:function(g){return Re(g,h)};var d}function $i(h){return[].slice.call(h)}var ao=0;function Yt(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Bn(h,d,F){function _(Y){if(Y.type===3)return null;if(Y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var H=Y.lower,K=Y.upper,$=Y.lowerOpen,Y=Y.upperOpen;return H===void 0?K===void 0?null:d.upperBound(K,!!Y):K===void 0?d.lowerBound(H,!!$):d.bound(H,K,!!$,!!Y)}function S(Z){var H,K=Z.name;return{name:K,schema:Z,mutate:function($){var Y=$.trans,ne=$.type,oe=$.keys,le=$.values,ce=$.range;return new Promise(function(be,Ce){be=Ot(be);var Te=Y.objectStore(K),Ae=Te.keyPath==null,Ie=ne==="put"||ne==="add";if(!Ie&&ne!=="delete"&&ne!=="deleteRange")throw new Error("Invalid operation type: "+ne);var _e,Fe=(oe||le||{length:1}).length;if(oe&&le&&oe.length!==le.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return be({numFailures:0,failures:{},results:[],lastResult:void 0});function Ke(wn){++ar,ei(wn)}var tt=[],lt=[],ar=0;if(ne==="deleteRange"){if(ce.type===4)return be({numFailures:ar,failures:lt,results:[],lastResult:void 0});ce.type===3?tt.push(_e=Te.clear()):tt.push(_e=Te.delete(_(ce)))}else{var Ae=Ie?Ae?[le,oe]:[le,null]:[oe,null],it=Ae[0],Tn=Ae[1];if(Ie)for(var Wt=0;Wt<Fe;++Wt)tt.push(_e=Tn&&Tn[Wt]!==void 0?Te[ne](it[Wt],Tn[Wt]):Te[ne](it[Wt])),_e.onerror=Ke;else for(Wt=0;Wt<Fe;++Wt)tt.push(_e=Te[ne](it[Wt])),_e.onerror=Ke}function mo(wn){wn=wn.target.result,tt.forEach(function(Nr,el){return Nr.error!=null&&(lt[el]=Nr.error)}),be({numFailures:ar,failures:lt,results:ne==="delete"?oe:tt.map(function(Nr){return Nr.result}),lastResult:wn})}_e.onerror=function(wn){Ke(wn),mo(wn)},_e.onsuccess=mo})},getMany:function($){var Y=$.trans,ne=$.keys;return new Promise(function(oe,le){oe=Ot(oe);for(var ce,be=Y.objectStore(K),Ce=ne.length,Te=new Array(Ce),Ae=0,Ie=0,_e=function(tt){tt=tt.target,Te[tt._pos]=tt.result,++Ie===Ae&&oe(Te)},Fe=kn(le),Ke=0;Ke<Ce;++Ke)ne[Ke]!=null&&((ce=be.get(ne[Ke]))._pos=Ke,ce.onsuccess=_e,ce.onerror=Fe,++Ae);Ae===0&&oe(Te)})},get:function($){var Y=$.trans,ne=$.key;return new Promise(function(oe,le){oe=Ot(oe);var ce=Y.objectStore(K).get(ne);ce.onsuccess=function(be){return oe(be.target.result)},ce.onerror=kn(le)})},query:(H=q,function($){return new Promise(function(Y,ne){Y=Ot(Y);var oe,le,ce,Ae=$.trans,be=$.values,Ce=$.limit,_e=$.query,Te=Ce===1/0?void 0:Ce,Ie=_e.index,_e=_e.range,Ae=Ae.objectStore(K),Ie=Ie.isPrimaryKey?Ae:Ae.index(Ie.name),_e=_(_e);if(Ce===0)return Y({result:[]});H?((Te=be?Ie.getAll(_e,Te):Ie.getAllKeys(_e,Te)).onsuccess=function(Fe){return Y({result:Fe.target.result})},Te.onerror=kn(ne)):(oe=0,le=!be&&"openKeyCursor"in Ie?Ie.openKeyCursor(_e):Ie.openCursor(_e),ce=[],le.onsuccess=function(Fe){var Ke=le.result;return Ke?(ce.push(be?Ke.value:Ke.primaryKey),++oe===Ce?Y({result:ce}):void Ke.continue()):Y({result:ce})},le.onerror=kn(ne))})}),openCursor:function($){var Y=$.trans,ne=$.values,oe=$.query,le=$.reverse,ce=$.unique;return new Promise(function(be,Ce){be=Ot(be);var Ie=oe.index,Te=oe.range,Ae=Y.objectStore(K),Ae=Ie.isPrimaryKey?Ae:Ae.index(Ie.name),Ie=le?ce?"prevunique":"prev":ce?"nextunique":"next",_e=!ne&&"openKeyCursor"in Ae?Ae.openKeyCursor(_(Te),Ie):Ae.openCursor(_(Te),Ie);_e.onerror=kn(Ce),_e.onsuccess=Ot(function(Fe){var Ke,tt,lt,ar,it=_e.result;it?(it.___id=++ao,it.done=!1,Ke=it.continue.bind(it),tt=(tt=it.continuePrimaryKey)&&tt.bind(it),lt=it.advance.bind(it),ar=function(){throw new Error("Cursor not stopped")},it.trans=Y,it.stop=it.continue=it.continuePrimaryKey=it.advance=function(){throw new Error("Cursor not started")},it.fail=Ot(Ce),it.next=function(){var Tn=this,Wt=1;return this.start(function(){return Wt--?Tn.continue():Tn.stop()}).then(function(){return Tn})},it.start=function(Tn){function Wt(){if(_e.result)try{Tn()}catch(wn){it.fail(wn)}else it.done=!0,it.start=function(){throw new Error("Cursor behind last entry")},it.stop()}var mo=new Promise(function(wn,Nr){wn=Ot(wn),_e.onerror=kn(Nr),it.fail=Nr,it.stop=function(el){it.stop=it.continue=it.continuePrimaryKey=it.advance=ar,wn(el)}});return _e.onsuccess=Ot(function(wn){_e.onsuccess=Wt,Wt()}),it.continue=Ke,it.continuePrimaryKey=tt,it.advance=lt,Wt(),mo},be(it)):be(null)},Ce)})},count:function($){var Y=$.query,ne=$.trans,oe=Y.index,le=Y.range;return new Promise(function(ce,be){var Ce=ne.objectStore(K),Te=oe.isPrimaryKey?Ce:Ce.index(oe.name),Ce=_(le),Te=Ce?Te.count(Ce):Te.count();Te.onsuccess=Ot(function(Ae){return ce(Ae.target.result)}),Te.onerror=kn(be)})}}}var A,x,L,W=(x=F,L=$i((A=h).objectStoreNames),{schema:{name:A.name,tables:L.map(function(Z){return x.objectStore(Z)}).map(function(Z){var H=Z.keyPath,Y=Z.autoIncrement,K=v(H),$={},Y={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:H==null,compound:K,keyPath:H,autoIncrement:Y,unique:!0,extractKey:ki(H)},indexes:$i(Z.indexNames).map(function(ne){return Z.index(ne)}).map(function(ce){var oe=ce.name,le=ce.unique,be=ce.multiEntry,ce=ce.keyPath,be={name:oe,compound:v(ce),keyPath:ce,unique:le,multiEntry:be,extractKey:ki(ce)};return $[Yt(ce)]=be}),getIndexByKeyPath:function(ne){return $[Yt(ne)]}};return $[":id"]=Y.primaryKey,H!=null&&($[Yt(H)]=Y.primaryKey),Y})},hasGetAll:0<L.length&&"getAll"in x.objectStore(L[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),F=W.schema,q=W.hasGetAll,W=F.tables.map(S),B={};return W.forEach(function(Z){return B[Z.name]=Z}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(Z){if(!B[Z])throw new Error("Table '".concat(Z,"' not found"));return B[Z]},MIN_KEY:-1/0,MAX_KEY:Wi(d),schema:F}}function Ss(h,d,g,_){var S=g.IDBKeyRange;return g.indexedDB,{dbcore:(_=Bn(d,S,_),h.dbcore.reduce(function(A,x){return x=x.create,i(i({},A),x(A))},_))}}function ti(h,_){var g=_.db,_=Ss(h._middlewares,g,h._deps,_);h.core=_.dbcore,h.tables.forEach(function(S){var A=S.name;h.core.schema.tables.some(function(x){return x.name===A})&&(S.core=h.core.table(A),h[A]instanceof h.Table&&(h[A].core=S.core))})}function ni(h,d,g,_){g.forEach(function(S){var A=_[S];d.forEach(function(x){var L=(function F(q,W){return Ee(q,W)||(q=b(q))&&F(q,W)})(x,S);(!L||"value"in L&&L.value===void 0)&&(x===h.Transaction.prototype||x instanceof h.Transaction?pe(x,S,{get:function(){return this.table(S)},set:function(F){se(this,S,{value:F,writable:!0,configurable:!0,enumerable:!0})}}):x[S]=new h.Table(S,A))})})}function Zi(h,d){d.forEach(function(g){for(var _ in g)g[_]instanceof h.Table&&delete g[_]})}function As(h,d){return h._cfg.version-d._cfg.version}function ri(h,d,g,_){var S=h._dbSchema;g.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Xi("$meta",ua("")[0],[]),h._storeNames.push("$meta"));var A=h._createTransaction("readwrite",h._storeNames,S);A.create(g),A._completion.catch(_);var x=A._reject.bind(A),L=Me.transless||Me;Ut(function(){return Me.trans=A,Me.transless=L,d!==0?(ti(h,g),q=d,((F=A).storeNames.includes("$meta")?F.table("$meta").get("version").then(function(W){return W??q}):De.resolve(q)).then(function(W){return Z=W,H=A,K=g,$=[],W=(B=h)._versions,Y=B._dbSchema=Mi(0,B.idbdb,K),(W=W.filter(function(ne){return ne._cfg.version>=Z})).length!==0?(W.forEach(function(ne){$.push(function(){var oe=Y,le=ne._cfg.dbschema;Cs(B,oe,K),Cs(B,le,K),Y=B._dbSchema=le;var ce=Vi(oe,le);ce.add.forEach(function(Ie){oo(K,Ie[0],Ie[1].primKey,Ie[1].indexes)}),ce.change.forEach(function(Ie){if(Ie.recreate)throw new xe.Upgrade("Not yet support for changing primary key");var _e=K.objectStore(Ie.name);Ie.add.forEach(function(Fe){return ii(_e,Fe)}),Ie.change.forEach(function(Fe){_e.deleteIndex(Fe.name),ii(_e,Fe)}),Ie.del.forEach(function(Fe){return _e.deleteIndex(Fe)})});var be=ne._cfg.contentUpgrade;if(be&&ne._cfg.version>Z){ti(B,K),H._memoizedTables={};var Ce=O(le);ce.del.forEach(function(Ie){Ce[Ie]=oe[Ie]}),Zi(B,[B.Transaction.prototype]),ni(B,[B.Transaction.prototype],m(Ce),Ce),H.schema=Ce;var Te,Ae=ve(be);return Ae&&tn(),ce=De.follow(function(){var Ie;(Te=be(H))&&Ae&&(Ie=On.bind(null,null),Te.then(Ie,Ie))}),Te&&typeof Te.then=="function"?De.resolve(Te):ce.then(function(){return Te})}}),$.push(function(oe){var le,ce,be=ne._cfg.dbschema;le=be,ce=oe,[].slice.call(ce.db.objectStoreNames).forEach(function(Ce){return le[Ce]==null&&ce.db.deleteObjectStore(Ce)}),Zi(B,[B.Transaction.prototype]),ni(B,[B.Transaction.prototype],B._storeNames,B._dbSchema),H.schema=B._dbSchema}),$.push(function(oe){B.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(B.idbdb.version/10)===ne._cfg.version?(B.idbdb.deleteObjectStore("$meta"),delete B._dbSchema.$meta,B._storeNames=B._storeNames.filter(function(le){return le!=="$meta"})):oe.objectStore("$meta").put(ne._cfg.version,"version"))})}),(function ne(){return $.length?De.resolve($.shift()(H.idbtrans)).then(ne):De.resolve()})().then(function(){lo(Y,K)})):De.resolve();var B,Z,H,K,$,Y}).catch(x)):(m(S).forEach(function(W){oo(g,W,S[W].primKey,S[W].indexes)}),ti(h,g),void De.follow(function(){return h.on.populate.fire(A)}).catch(x));var F,q})}function Rs(h,d){lo(h._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var g=Mi(0,h.idbdb,d);Cs(h,h._dbSchema,d);for(var _=0,S=Vi(g,h._dbSchema).change;_<S.length;_++){var A=(function(x){if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var L=d.objectStore(x.name);x.add.forEach(function(F){xn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(F.src)),ii(L,F)})})(S[_]);if(typeof A=="object")return A.value}}function Vi(h,d){var g,_={del:[],add:[],change:[]};for(g in h)d[g]||_.del.push(g);for(g in d){var S=h[g],A=d[g];if(S){var x={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||S.primKey.auto!==A.primKey.auto)x.recreate=!0,_.change.push(x);else{var L=S.idxByName,F=A.idxByName,q=void 0;for(q in L)F[q]||x.del.push(q);for(q in F){var W=L[q],B=F[q];W?W.src!==B.src&&x.change.push(B):x.add.push(B)}(0<x.del.length||0<x.add.length||0<x.change.length)&&_.change.push(x)}}else _.add.push([g,A])}return _}function oo(h,d,g,_){var S=h.db.createObjectStore(d,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return _.forEach(function(A){return ii(S,A)}),S}function lo(h,d){m(h).forEach(function(g){d.db.objectStoreNames.contains(g)||(xn&&console.debug("Dexie: Creating missing table",g),oo(d,g,h[g].primKey,h[g].indexes))})}function ii(h,d){h.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function Mi(h,d,g){var _={};return Ne(d.objectStoreNames,0).forEach(function(S){for(var A=g.objectStore(S),x=ir(Lt(q=A.keyPath),q||"",!0,!1,!!A.autoIncrement,q&&typeof q!="string",!0),L=[],F=0;F<A.indexNames.length;++F){var W=A.index(A.indexNames[F]),q=W.keyPath,W=ir(W.name,q,!!W.unique,!!W.multiEntry,!1,q&&typeof q!="string",!1);L.push(W)}_[S]=Xi(S,x,L)}),_}function Cs(h,d,g){for(var _=g.db.objectStoreNames,S=0;S<_.length;++S){var A=_[S],x=g.objectStore(A);h._hasGetAll="getAll"in x;for(var L=0;L<x.indexNames.length;++L){var F=x.indexNames[L],q=x.index(F).keyPath,W=typeof q=="string"?q:"["+Ne(q).join("+")+"]";!d[A]||(q=d[A].idxByName[W])&&(q.name=F,delete d[A].idxByName[W],d[A].idxByName[F]=q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function ua(h){return h.split(",").map(function(d,g){var _=(d=d.trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return ir(_,S||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),v(S),g===0)})}var uo=(Is.prototype._parseStoresSpec=function(h,d){m(h).forEach(function(g){if(h[g]!==null){var _=ua(h[g]),S=_.shift();if(S.unique=!0,S.multi)throw new xe.Schema("Primary key cannot be multi-valued");_.forEach(function(A){if(A.auto)throw new xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new xe.Schema("Index must have a name and cannot be an empty string")}),d[g]=Xi(g,S,_)}})},Is.prototype.stores=function(g){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,g):g;var g=d._versions,_={},S={};return g.forEach(function(A){E(_,A._cfg.storesSource),S=A._cfg.dbschema={},A._parseStoresSpec(_,S)}),d._dbSchema=S,Zi(d,[d._allTables,d,d.Transaction.prototype]),ni(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],m(S),S),d._storeNames=m(S),this},Is.prototype.upgrade=function(h){return this._cfg.contentUpgrade=sn(this._cfg.contentUpgrade||gt,h),this},Is);function Is(){}function Ji(h,d){var g=h._dbNamesDB;return g||(g=h._dbNamesDB=new li(Gi,{addons:[],indexedDB:h,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function xs(h){return h&&typeof h.databases=="function"}function ca(h){return Ut(function(){return Me.letThrough=!0,h()})}function zr(h){return!("from"in h)}var bn=function(h,d){if(!this){var g=new bn;return h&&"d"in h&&E(g,h),g}E(this,arguments.length?{d:1,from:h,to:1<arguments.length?d:h}:{d:0})};function es(h,d,g){var _=mt(d,g);if(!isNaN(_)){if(0<_)throw RangeError();if(zr(h))return E(h,{from:d,to:g,d:1});var S=h.l,_=h.r;if(mt(g,h.from)<0)return S?es(S,d,g):h.l={from:d,to:g,d:1,l:null,r:null},zn(h);if(0<mt(d,h.to))return _?es(_,d,g):h.r={from:d,to:g,d:1,l:null,r:null},zn(h);mt(d,h.from)<0&&(h.from=d,h.l=null,h.d=_?_.d+1:1),0<mt(g,h.to)&&(h.to=g,h.r=null,h.d=h.l?h.l.d+1:1),g=!h.r,S&&!h.l&&si(h,S),_&&g&&si(h,_)}}function si(h,d){zr(d)||(function g(_,F){var A=F.from,x=F.to,L=F.l,F=F.r;es(_,A,x),L&&g(_,L),F&&g(_,F)})(h,d)}function co(h,d){var g=Pi(d),_=g.next();if(_.done)return!1;for(var S=_.value,A=Pi(h),x=A.next(S.from),L=x.value;!_.done&&!x.done;){if(mt(L.from,S.to)<=0&&0<=mt(L.to,S.from))return!0;mt(S.from,L.from)<0?S=(_=g.next(L.from)).value:L=(x=A.next(S.from)).value}return!1}function Pi(h){var d=zr(h)?null:{s:0,n:h};return{next:function(g){for(var _=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,_)for(;d.n.l&&mt(g,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!_||mt(g,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function zn(h){var d,g,_=(((d=h.r)===null||d===void 0?void 0:d.d)||0)-(((g=h.l)===null||g===void 0?void 0:g.d)||0),S=1<_?"r":_<-1?"l":"";S&&(d=S=="r"?"l":"r",g=i({},h),_=h[S],h.from=_.from,h.to=_.to,h[S]=_[S],g[S]=_[d],(h[d]=g).d=ha(g)),h.d=ha(h)}function ha(g){var d=g.r,g=g.l;return(d?g?Math.max(d.d,g.d):d.d:g?g.d:0)+1}function Ds(h,d){return m(d).forEach(function(g){h[g]?si(h[g],d[g]):h[g]=(function _(S){var A,x,L={};for(A in S)V(S,A)&&(x=S[A],L[A]=!x||typeof x!="object"||j.has(x.constructor)?x:_(x));return L})(d[g])}),h}function ai(h,d){return h.all||d.all||Object.keys(h).some(function(g){return d[g]&&co(d[g],h[g])})}U(bn.prototype,((vr={add:function(h){return si(this,h),this},addKey:function(h){return es(this,h,h),this},addKeys:function(h){var d=this;return h.forEach(function(g){return es(d,g,g)}),this},hasKey:function(h){var d=Pi(this).next(h).value;return d&&mt(d.from,h)<=0&&0<=mt(d.to,h)}})[fe]=function(){return Pi(this)},vr));var u={},y={},T=!1;function C(h){Ds(y,h),T||(T=!0,setTimeout(function(){T=!1,te(y,!(y={}))},0))}function te(h,d){d===void 0&&(d=!1);var g=new Set;if(h.all)for(var _=0,S=Object.values(u);_<S.length;_++)ae(x=S[_],h,g,d);else for(var A in h){var x,L=/^idb\:\/\/(.*)\/(.*)\//.exec(A);L&&(A=L[1],L=L[2],(x=u["idb://".concat(A,"/").concat(L)])&&ae(x,h,g,d))}g.forEach(function(F){return F()})}function ae(h,d,g,_){for(var S=[],A=0,x=Object.entries(h.queries.query);A<x.length;A++){for(var L=x[A],F=L[0],q=[],W=0,B=L[1];W<B.length;W++){var Z=B[W];ai(d,Z.obsSet)?Z.subscribers.forEach(function(Y){return g.add(Y)}):_&&q.push(Z)}_&&S.push([F,q])}if(_)for(var H=0,K=S;H<K.length;H++){var $=K[H],F=$[0],q=$[1];h.queries.query[F]=q}}function we(h){var d=h._state,g=h._deps.indexedDB;if(d.isBeingOpened||h.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?It(d.dbOpenError):h});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var _=d.openCanceller,S=Math.round(10*h.verno),A=!1;function x(){if(d.openCanceller!==_)throw new xe.DatabaseClosed("db.open() was cancelled")}function L(){return new De(function(Z,H){if(x(),!g)throw new xe.MissingAPI;var K=h.name,$=d.autoSchema||!S?g.open(K):g.open(K,S);if(!$)throw new xe.MissingAPI;$.onerror=kn(H),$.onblocked=Ot(h._fireOnBlocked),$.onupgradeneeded=Ot(function(Y){var ne;W=$.transaction,d.autoSchema&&!h._options.allowEmptyDB?($.onerror=ei,W.abort(),$.result.close(),(ne=g.deleteDatabase(K)).onsuccess=ne.onerror=Ot(function(){H(new xe.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(W.onerror=kn(H),Y=Y.oldVersion>Math.pow(2,62)?0:Y.oldVersion,B=Y<1,h.idbdb=$.result,A&&Rs(h,W),ri(h,Y/10,W,H))},H),$.onsuccess=Ot(function(){W=null;var Y,ne,oe,le,ce,be=h.idbdb=$.result,Ce=Ne(be.objectStoreNames);if(0<Ce.length)try{var Te=be.transaction((le=Ce).length===1?le[0]:le,"readonly");if(d.autoSchema)ne=be,oe=Te,(Y=h).verno=ne.version/10,oe=Y._dbSchema=Mi(0,ne,oe),Y._storeNames=Ne(ne.objectStoreNames,0),ni(Y,[Y._allTables],m(oe),oe);else if(Cs(h,h._dbSchema,Te),((ce=Vi(Mi(0,(ce=h).idbdb,Te),ce._dbSchema)).add.length||ce.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),be.close(),S=be.version+1,A=!0,Z(L());ti(h,Te)}catch{}Ci.push(h),be.onversionchange=Ot(function(Ae){d.vcFired=!0,h.on("versionchange").fire(Ae)}),be.onclose=Ot(function(Ae){h.on("close").fire(Ae)}),B&&(ce=h._deps,Te=K,be=ce.indexedDB,ce=ce.IDBKeyRange,xs(be)||Te===Gi||Ji(be,ce).put({name:Te}).catch(gt)),Z()},H)}).catch(function(Z){switch(Z==null?void 0:Z.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),L();break;case"VersionError":if(0<S)return S=0,L()}return De.reject(Z)})}var F,q=d.dbReadyResolve,W=null,B=!1;return De.race([_,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function H(){return indexedDB.databases().finally(Z)}F=setInterval(H,100),H()}).finally(function(){return clearInterval(F)}):Promise.resolve()).then(L)]).then(function(){return x(),d.onReadyBeingFired=[],De.resolve(ca(function(){return h.on.ready.fire(h.vip)})).then(function Z(){if(0<d.onReadyBeingFired.length){var H=d.onReadyBeingFired.reduce(sn,gt);return d.onReadyBeingFired=[],De.resolve(ca(function(){return H(h.vip)})).then(Z)}})}).finally(function(){d.openCanceller===_&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(Z){d.dbOpenError=Z;try{W&&W.abort()}catch{}return _===d.openCanceller&&h._close(),It(Z)}).finally(function(){d.openComplete=!0,q()}).then(function(){var Z;return B&&(Z={},h.tables.forEach(function(H){H.schema.indexes.forEach(function(K){K.name&&(Z["idb://".concat(h.name,"/").concat(H.name,"/").concat(K.name)]=new bn(-1/0,[[[]]]))}),Z["idb://".concat(h.name,"/").concat(H.name,"/")]=Z["idb://".concat(h.name,"/").concat(H.name,"/:dels")]=new bn(-1/0,[[[]]])}),En(xr).fire(Z),te(Z,!0)),h})}function Je(h){function d(A){return h.next(A)}var g=S(d),_=S(function(A){return h.throw(A)});function S(A){return function(F){var L=A(F),F=L.value;return L.done?F:F&&typeof F.then=="function"?F.then(g,_):v(F)?Promise.all(F).then(g,_):g(F)}}return S(d)()}function Vt(h,d,g){for(var _=v(h)?h.slice():[h],S=0;S<g;++S)_.push(d);return _}var Nt={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return i(i({},h),{table:function(d){var g=h.table(d),_=g.schema,S={},A=[];function x(B,Z,H){var K=Yt(B),$=S[K]=S[K]||[],Y=B==null?0:typeof B=="string"?1:B.length,ne=0<Z,ne=i(i({},H),{name:ne?"".concat(K,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:ne,keyTail:Z,keyLength:Y,extractKey:ki(B),unique:!ne&&H.unique});return $.push(ne),ne.isPrimaryKey||A.push(ne),1<Y&&x(Y===2?B[0]:B.slice(0,Y-1),Z+1,H),$.sort(function(oe,le){return oe.keyTail-le.keyTail}),ne}d=x(_.primaryKey.keyPath,0,_.primaryKey),S[":id"]=[d];for(var L=0,F=_.indexes;L<F.length;L++){var q=F[L];x(q.keyPath,0,q)}function W(B){var Z,H=B.query.index;return H.isVirtual?i(i({},B),{query:{index:H.lowLevelIndex,range:(Z=B.query.range,H=H.keyTail,{type:Z.type===1?2:Z.type,lower:Vt(Z.lower,Z.lowerOpen?h.MAX_KEY:h.MIN_KEY,H),lowerOpen:!0,upper:Vt(Z.upper,Z.upperOpen?h.MIN_KEY:h.MAX_KEY,H),upperOpen:!0})}}):B}return i(i({},g),{schema:i(i({},_),{primaryKey:d,indexes:A,getIndexByKeyPath:function(B){return(B=S[Yt(B)])&&B[0]}}),count:function(B){return g.count(W(B))},query:function(B){return g.query(W(B))},openCursor:function(B){var Z=B.query.index,H=Z.keyTail,K=Z.isVirtual,$=Z.keyLength;return K?g.openCursor(W(B)).then(function(ne){return ne&&Y(ne)}):g.openCursor(B);function Y(ne){return Object.create(ne,{continue:{value:function(oe){oe!=null?ne.continue(Vt(oe,B.reverse?h.MAX_KEY:h.MIN_KEY,H)):B.unique?ne.continue(ne.key.slice(0,$).concat(B.reverse?h.MIN_KEY:h.MAX_KEY,H)):ne.continue()}},continuePrimaryKey:{value:function(oe,le){ne.continuePrimaryKey(Vt(oe,h.MAX_KEY,H),le)}},primaryKey:{get:function(){return ne.primaryKey}},key:{get:function(){var oe=ne.key;return $===1?oe[0]:oe.slice(0,$)}},value:{get:function(){return ne.value}}})}}})}})}};function Qt(h,d,g,_){return g=g||{},_=_||"",m(h).forEach(function(S){var A,x,L;V(d,S)?(A=h[S],x=d[S],typeof A=="object"&&typeof x=="object"&&A&&x?(L=kt(A))!==kt(x)?g[_+S]=d[S]:L==="Object"?Qt(A,x,g,_+S+"."):A!==x&&(g[_+S]=d[S]):A!==x&&(g[_+S]=d[S])):g[_+S]=void 0}),m(d).forEach(function(S){V(h,S)||(g[_+S]=d[S])}),g}function Xn(h,d){return d.type==="delete"?d.keys:d.keys||d.values.map(h.extractKey)}var oi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return i(i({},h),{table:function(d){var g=h.table(d),_=g.schema.primaryKey;return i(i({},g),{mutate:function(S){var A=Me.trans,x=A.table(d).hook,L=x.deleting,F=x.creating,q=x.updating;switch(S.type){case"add":if(F.fire===gt)break;return A._promise("readwrite",function(){return W(S)},!0);case"put":if(F.fire===gt&&q.fire===gt)break;return A._promise("readwrite",function(){return W(S)},!0);case"delete":if(L.fire===gt)break;return A._promise("readwrite",function(){return W(S)},!0);case"deleteRange":if(L.fire===gt)break;return A._promise("readwrite",function(){return(function B(Z,H,K){return g.query({trans:Z,values:!1,query:{index:_,range:H},limit:K}).then(function($){var Y=$.result;return W({type:"delete",keys:Y,trans:Z}).then(function(ne){return 0<ne.numFailures?Promise.reject(ne.failures[0]):Y.length<K?{failures:[],numFailures:0,lastResult:void 0}:B(Z,i(i({},H),{lower:Y[Y.length-1],lowerOpen:!0}),K)})})})(S.trans,S.range,1e4)},!0)}return g.mutate(S);function W(B){var Z,H,K,$=Me.trans,Y=B.keys||Xn(_,B);if(!Y)throw new Error("Keys missing");return(B=B.type==="add"||B.type==="put"?i(i({},B),{keys:Y}):i({},B)).type!=="delete"&&(B.values=l([],B.values)),B.keys&&(B.keys=l([],B.keys)),Z=g,K=Y,((H=B).type==="add"?Promise.resolve([]):Z.getMany({trans:H.trans,keys:K,cache:"immutable"})).then(function(ne){var oe=Y.map(function(le,ce){var be,Ce,Te,Ae=ne[ce],Ie={onerror:null,onsuccess:null};return B.type==="delete"?L.fire.call(Ie,le,Ae,$):B.type==="add"||Ae===void 0?(be=F.fire.call(Ie,le,B.values[ce],$),le==null&&be!=null&&(B.keys[ce]=le=be,_.outbound||P(B.values[ce],_.keyPath,le))):(be=Qt(Ae,B.values[ce]),(Ce=q.fire.call(Ie,be,le,Ae,$))&&(Te=B.values[ce],Object.keys(Ce).forEach(function(_e){V(Te,_e)?Te[_e]=Ce[_e]:P(Te,_e,Ce[_e])}))),Ie});return g.mutate(B).then(function(le){for(var ce=le.failures,be=le.results,Ce=le.numFailures,le=le.lastResult,Te=0;Te<Y.length;++Te){var Ae=(be||Y)[Te],Ie=oe[Te];Ae==null?Ie.onerror&&Ie.onerror(ce[Te]):Ie.onsuccess&&Ie.onsuccess(B.type==="put"&&ne[Te]?B.values[Te]:Ae)}return{failures:ce,results:be,numFailures:Ce,lastResult:le}}).catch(function(le){return oe.forEach(function(ce){return ce.onerror&&ce.onerror(le)}),Promise.reject(le)})})}}})}})}};function Dr(h,d,g){try{if(!d||d.keys.length<h.length)return null;for(var _=[],S=0,A=0;S<d.keys.length&&A<h.length;++S)mt(d.keys[S],h[A])===0&&(_.push(g?k(d.values[S]):d.values[S]),++A);return _.length===h.length?_:null}catch{return null}}var qr={stack:"dbcore",level:-1,create:function(h){return{table:function(d){var g=h.table(d);return i(i({},g),{getMany:function(_){if(!_.cache)return g.getMany(_);var S=Dr(_.keys,_.trans._cache,_.cache==="clone");return S?De.resolve(S):g.getMany(_).then(function(A){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?k(A):A},A})},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),g.mutate(_)}})}}}};function Or(h,d){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function fa(h,d){switch(h){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var yf={stack:"dbcore",level:0,name:"Observability",create:function(h){var d=h.schema.name,g=new bn(h.MIN_KEY,h.MAX_KEY);return i(i({},h),{transaction:function(_,S,A){if(Me.subscr&&S!=="readonly")throw new xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Me.querier));return h.transaction(_,S,A)},table:function(_){var S=h.table(_),A=S.schema,x=A.primaryKey,B=A.indexes,L=x.extractKey,F=x.outbound,q=x.autoIncrement&&B.filter(function(H){return H.compound&&H.keyPath.includes(x.keyPath)}),W=i(i({},S),{mutate:function(H){function K(_e){return _e="idb://".concat(d,"/").concat(_,"/").concat(_e),le[_e]||(le[_e]=new bn)}var $,Y,ne,oe=H.trans,le=H.mutatedParts||(H.mutatedParts={}),ce=K(""),be=K(":dels"),Ce=H.type,Ie=H.type==="deleteRange"?[H.range]:H.type==="delete"?[H.keys]:H.values.length<50?[Xn(x,H).filter(function(_e){return _e}),H.values]:[],Te=Ie[0],Ae=Ie[1],Ie=H.trans._cache;return v(Te)?(ce.addKeys(Te),(Ie=Ce==="delete"||Te.length===Ae.length?Dr(Te,Ie):null)||be.addKeys(Te),(Ie||Ae)&&($=K,Y=Ie,ne=Ae,A.indexes.forEach(function(_e){var Fe=$(_e.name||"");function Ke(lt){return lt!=null?_e.extractKey(lt):null}function tt(lt){return _e.multiEntry&&v(lt)?lt.forEach(function(ar){return Fe.addKey(ar)}):Fe.addKey(lt)}(Y||ne).forEach(function(lt,Tn){var it=Y&&Ke(Y[Tn]),Tn=ne&&Ke(ne[Tn]);mt(it,Tn)!==0&&(it!=null&&tt(it),Tn!=null&&tt(Tn))})}))):Te?(Ae={from:Te.lower,to:Te.upper},be.add(Ae),ce.add(Ae)):(ce.add(g),be.add(g),A.indexes.forEach(function(_e){return K(_e.name).add(g)})),S.mutate(H).then(function(_e){return!Te||H.type!=="add"&&H.type!=="put"||(ce.addKeys(_e.results),q&&q.forEach(function(Fe){var Ke=H.values.map(function(lt){return Fe.extractKey(lt)}),tt=Fe.keyPath.findIndex(function(lt){return lt===x.keyPath});_e.results.forEach(function(lt){return Ke[tt]=lt}),K(Fe.name).addKeys(Ke)})),oe.mutatedParts=Ds(oe.mutatedParts||{},le),_e})}}),B=function(K){var $=K.query,K=$.index,$=$.range;return[K,new bn((K=$.lower)!==null&&K!==void 0?K:h.MIN_KEY,($=$.upper)!==null&&$!==void 0?$:h.MAX_KEY)]},Z={get:function(H){return[x,new bn(H.key)]},getMany:function(H){return[x,new bn().addKeys(H.keys)]},count:B,query:B,openCursor:B};return m(Z).forEach(function(H){W[H]=function(K){var $=Me.subscr,Y=!!$,ne=Or(Me,S)&&fa(H,K)?K.obsSet={}:$;if(Y){var oe=function(Ae){return Ae="idb://".concat(d,"/").concat(_,"/").concat(Ae),ne[Ae]||(ne[Ae]=new bn)},le=oe(""),ce=oe(":dels"),$=Z[H](K),Y=$[0],$=$[1];if((H==="query"&&Y.isPrimaryKey&&!K.values?ce:oe(Y.name||"")).add($),!Y.isPrimaryKey){if(H!=="count"){var be=H==="query"&&F&&K.values&&S.query(i(i({},K),{values:!1}));return S[H].apply(this,arguments).then(function(Ae){if(H==="query"){if(F&&K.values)return be.then(function(Ke){return Ke=Ke.result,le.addKeys(Ke),Ae});var Ie=K.values?Ae.result.map(L):Ae.result;(K.values?le:ce).addKeys(Ie)}else if(H==="openCursor"){var _e=Ae,Fe=K.values;return _e&&Object.create(_e,{key:{get:function(){return ce.addKey(_e.primaryKey),_e.key}},primaryKey:{get:function(){var Ke=_e.primaryKey;return ce.addKey(Ke),Ke}},value:{get:function(){return Fe&&le.addKey(_e.primaryKey),_e.value}}})}return Ae})}ce.add(g)}}return S[H].apply(this,arguments)}}),W}})}};function _c(h,d,g){if(g.numFailures===0)return d;if(d.type==="deleteRange")return null;var _=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return g.numFailures===_?null:(d=i({},d),v(d.keys)&&(d.keys=d.keys.filter(function(S,A){return!(A in g.failures)})),"values"in d&&v(d.values)&&(d.values=d.values.filter(function(S,A){return!(A in g.failures)})),d)}function $o(h,d){return g=h,((_=d).lower===void 0||(_.lowerOpen?0<mt(g,_.lower):0<=mt(g,_.lower)))&&(h=h,(d=d).upper===void 0||(d.upperOpen?mt(h,d.upper)<0:mt(h,d.upper)<=0));var g,_}function Xl(h,d,Z,_,S,A){if(!Z||Z.length===0)return h;var x=d.query.index,L=x.multiEntry,F=d.query.range,q=_.schema.primaryKey.extractKey,W=x.extractKey,B=(x.lowLevelIndex||x).extractKey,Z=Z.reduce(function(H,K){var $=H,Y=[];if(K.type==="add"||K.type==="put")for(var ne=new bn,oe=K.values.length-1;0<=oe;--oe){var le,ce=K.values[oe],be=q(ce);ne.hasKey(be)||(le=W(ce),(L&&v(le)?le.some(function(Ie){return $o(Ie,F)}):$o(le,F))&&(ne.addKey(be),Y.push(ce)))}switch(K.type){case"add":$=H.concat(d.values?Y:Y.map(function(_e){return q(_e)}));break;case"put":var Ce=new bn().addKeys(K.values.map(function(_e){return q(_e)})),$=H.filter(function(_e){return!Ce.hasKey(d.values?q(_e):_e)}).concat(d.values?Y:Y.map(function(_e){return q(_e)}));break;case"delete":var Te=new bn().addKeys(K.keys);$=H.filter(function(_e){return!Te.hasKey(d.values?q(_e):_e)});break;case"deleteRange":var Ae=K.range;$=H.filter(function(_e){return!$o(q(_e),Ae)})}return $},h);return Z===h?h:(Z.sort(function(H,K){return mt(B(H),B(K))||mt(q(H),q(K))}),d.limit&&d.limit<1/0&&(Z.length>d.limit?Z.length=d.limit:h.length===d.limit&&Z.length<d.limit&&(S.dirty=!0)),A?Object.freeze(Z):Z)}function da(h,d){return mt(h.lower,d.lower)===0&&mt(h.upper,d.upper)===0&&!!h.lowerOpen==!!d.lowerOpen&&!!h.upperOpen==!!d.upperOpen}function ho(h,d){return(function(g,_,S,A){if(g===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((_=mt(g,_))===0){if(S&&A)return 0;if(S)return 1;if(A)return-1}return _})(h.lower,d.lower,h.lowerOpen,d.lowerOpen)<=0&&0<=(function(g,_,S,A){if(g===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((_=mt(g,_))===0){if(S&&A)return 0;if(S)return-1;if(A)return 1}return _})(h.upper,d.upper,h.upperOpen,d.upperOpen)}function vf(h,d,g,_){h.subscribers.add(g),_.addEventListener("abort",function(){var S,A;h.subscribers.delete(g),h.subscribers.size===0&&(S=h,A=d,setTimeout(function(){S.subscribers.size===0&&Ve(A,S)},3e3))})}var Zo={stack:"dbcore",level:0,name:"Cache",create:function(h){var d=h.schema.name;return i(i({},h),{transaction:function(g,_,S){var A,x,L=h.transaction(g,_,S);return _==="readwrite"&&(x=(A=new AbortController).signal,S=function(F){return function(){if(A.abort(),_==="readwrite"){for(var q=new Set,W=0,B=g;W<B.length;W++){var Z=B[W],H=u["idb://".concat(d,"/").concat(Z)];if(H){var K=h.table(Z),$=H.optimisticOps.filter(function(Fe){return Fe.trans===L});if(L._explicit&&F&&L.mutatedParts)for(var Y=0,ne=Object.values(H.queries.query);Y<ne.length;Y++)for(var oe=0,le=(Ce=ne[Y]).slice();oe<le.length;oe++)ai((Te=le[oe]).obsSet,L.mutatedParts)&&(Ve(Ce,Te),Te.subscribers.forEach(function(Fe){return q.add(Fe)}));else if(0<$.length){H.optimisticOps=H.optimisticOps.filter(function(Fe){return Fe.trans!==L});for(var ce=0,be=Object.values(H.queries.query);ce<be.length;ce++)for(var Ce,Te,Ae,Ie=0,_e=(Ce=be[ce]).slice();Ie<_e.length;Ie++)(Te=_e[Ie]).res!=null&&L.mutatedParts&&(F&&!Te.dirty?(Ae=Object.isFrozen(Te.res),Ae=Xl(Te.res,Te.req,$,K,Te,Ae),Te.dirty?(Ve(Ce,Te),Te.subscribers.forEach(function(Fe){return q.add(Fe)})):Ae!==Te.res&&(Te.res=Ae,Te.promise=De.resolve({result:Ae}))):(Te.dirty&&Ve(Ce,Te),Te.subscribers.forEach(function(Fe){return q.add(Fe)})))}}}q.forEach(function(Fe){return Fe()})}}},L.addEventListener("abort",S(!1),{signal:x}),L.addEventListener("error",S(!1),{signal:x}),L.addEventListener("complete",S(!0),{signal:x})),L},table:function(g){var _=h.table(g),S=_.schema.primaryKey;return i(i({},_),{mutate:function(A){var x=Me.trans;if(S.outbound||x.db._options.cache==="disabled"||x.explicit)return _.mutate(A);var L=u["idb://".concat(d,"/").concat(g)];return L?(x=_.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||Xn(S,A).some(function(F){return F==null}))?(L.optimisticOps.push(A),A.mutatedParts&&C(A.mutatedParts),x.then(function(F){0<F.numFailures&&(Ve(L.optimisticOps,A),(F=_c(0,A,F))&&L.optimisticOps.push(F),A.mutatedParts&&C(A.mutatedParts))}),x.catch(function(){Ve(L.optimisticOps,A),A.mutatedParts&&C(A.mutatedParts)})):x.then(function(F){var q=_c(0,i(i({},A),{values:A.values.map(function(H,B){var Z,H=(Z=S.keyPath)!==null&&Z!==void 0&&Z.includes(".")?k(H):i({},H);return P(H,S.keyPath,F.results[B]),H})}),F);L.optimisticOps.push(q),queueMicrotask(function(){return A.mutatedParts&&C(A.mutatedParts)})}),x):_.mutate(A)},query:function(A){if(!Or(Me,_)||!fa("query",A))return _.query(A);var x=((q=Me.trans)===null||q===void 0?void 0:q.db._options.cache)==="immutable",B=Me,L=B.requery,F=B.signal,q=(function(K,$,Y,ne){var oe=u["idb://".concat(K,"/").concat($)];if(!oe)return[];if(!($=oe.queries[Y]))return[null,!1,oe,null];var le=$[(ne.query?ne.query.index.name:null)||""];if(!le)return[null,!1,oe,null];switch(Y){case"query":var ce=le.find(function(be){return be.req.limit===ne.limit&&be.req.values===ne.values&&da(be.req.query.range,ne.query.range)});return ce?[ce,!0,oe,le]:[le.find(function(be){return("limit"in be.req?be.req.limit:1/0)>=ne.limit&&(!ne.values||be.req.values)&&ho(be.req.query.range,ne.query.range)}),!1,oe,le];case"count":return ce=le.find(function(be){return da(be.req.query.range,ne.query.range)}),[ce,!!ce,oe,le]}})(d,g,"query",A),W=q[0],B=q[1],Z=q[2],H=q[3];return W&&B?W.obsSet=A.obsSet:(B=_.query(A).then(function(K){var $=K.result;if(W&&(W.res=$),x){for(var Y=0,ne=$.length;Y<ne;++Y)Object.freeze($[Y]);Object.freeze($)}else K.result=k($);return K}).catch(function(K){return H&&W&&Ve(H,W),Promise.reject(K)}),W={obsSet:A.obsSet,promise:B,subscribers:new Set,type:"query",req:A,dirty:!1},H?H.push(W):(H=[W],(Z=Z||(u["idb://".concat(d,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=H)),vf(W,H,L,F),W.promise.then(function(K){return{result:Xl(K.result,A,Z==null?void 0:Z.optimisticOps,_,W,x)}})}})}})}};function fo(h,d){return new Proxy(h,{get:function(g,_,S){return _==="db"?d:Reflect.get(g,_,S)}})}var li=(Xt.prototype.version=function(h){if(isNaN(h)||h<.1)throw new xe.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var d=this._versions,g=d.filter(function(_){return _._cfg.version===h})[0];return g||(g=new this.Version(h),d.push(g),d.sort(As),g.stores({}),this._state.autoSchema=!1,g)},Xt.prototype._whenReady=function(h){var d=this;return this.idbdb&&(this._state.openComplete||Me.letThrough||this._vip)?h():new De(function(g,_){if(d._state.openComplete)return _(new xe.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void _(new xe.DatabaseClosed);d.open().catch(gt)}d._state.dbReadyPromise.then(g,_)}).then(h)},Xt.prototype.use=function(h){var d=h.stack,g=h.create,_=h.level,S=h.name;return S&&this.unuse({stack:d,name:S}),h=this._middlewares[d]||(this._middlewares[d]=[]),h.push({stack:d,create:g,level:_??10,name:S}),h.sort(function(A,x){return A.level-x.level}),this},Xt.prototype.unuse=function(h){var d=h.stack,g=h.name,_=h.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(S){return _?S.create!==_:!!g&&S.name!==g})),this},Xt.prototype.open=function(){var h=this;return pr(qt,function(){return we(h)})},Xt.prototype._close=function(){var h=this._state,d=Ci.indexOf(this);if(0<=d&&Ci.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new De(function(g){h.dbReadyResolve=g}),h.openCanceller=new De(function(g,_){h.cancelOpen=_}))},Xt.prototype.close=function(g){var d=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;d?(g.isBeingOpened&&g.cancelOpen(new xe.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new xe.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Xt.prototype.delete=function(h){var d=this;h===void 0&&(h={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",_=this._state;return new De(function(S,A){function x(){d.close(h);var L=d._deps.indexedDB.deleteDatabase(d.name);L.onsuccess=Ot(function(){var F,q,W;F=d._deps,q=d.name,W=F.indexedDB,F=F.IDBKeyRange,xs(W)||q===Gi||Ji(W,F).delete(q).catch(gt),S()}),L.onerror=kn(A),L.onblocked=d._fireOnBlocked}if(g)throw new xe.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(x):x()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var h=this;return m(this._allTables).map(function(d){return h._allTables[d]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var h=(function(d,g,_){var S=arguments.length;if(S<2)throw new xe.InvalidArgument("Too few arguments");for(var A=new Array(S-1);--S;)A[S-1]=arguments[S];return _=A.pop(),[d,M(A),_]}).apply(this,arguments);return this._transaction.apply(this,h)},Xt.prototype._transaction=function(h,d,g){var _=this,S=Me.trans;S&&S.db===this&&h.indexOf("!")===-1||(S=null);var A,x,L=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(x=d.map(function(q){if(q=q instanceof _.Table?q.name:q,typeof q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return q}),h=="r"||h===Ar)A=Ar;else{if(h!="rw"&&h!=jr)throw new xe.InvalidArgument("Invalid transaction mode: "+h);A=jr}if(S){if(S.mode===Ar&&A===jr){if(!L)throw new xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&x.forEach(function(q){if(S&&S.storeNames.indexOf(q)===-1){if(!L)throw new xe.SubTransaction("Table "+q+" not included in parent transaction.");S=null}}),L&&S&&!S.active&&(S=null)}}catch(q){return S?S._promise(null,function(W,B){B(q)}):It(q)}var F=(function q(W,B,Z,H,K){return De.resolve().then(function(){var $=Me.transless||Me,Y=W._createTransaction(B,Z,W._dbSchema,H);if(Y.explicit=!0,$={trans:Y,transless:$},H)Y.idbtrans=H.idbtrans;else try{Y.create(),Y.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(le){return le.name===rn.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return q(W,B,Z,null,K)})):It(le)}var ne,oe=ve(K);return oe&&tn(),$=De.follow(function(){var le;(ne=K.call(Y,Y))&&(oe?(le=On.bind(null,null),ne.then(le,le)):typeof ne.next=="function"&&typeof ne.throw=="function"&&(ne=Je(ne)))},$),(ne&&typeof ne.then=="function"?De.resolve(ne).then(function(le){return Y.active?le:It(new xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):$.then(function(){return ne})).then(function(le){return H&&Y._resolve(),Y._completion.then(function(){return le})}).catch(function(le){return Y._reject(le),It(le)})})}).bind(null,this,A,x,S,g);return S?S._promise(A,F,"lock"):Me.trans?pr(Me.transless,function(){return _._whenReady(F)}):this._whenReady(F)},Xt.prototype.table=function(h){if(!V(this._allTables,h))throw new xe.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},Xt);function Xt(h,d){var g=this;this._middlewares={},this.verno=0;var _=Xt.dependencies;this._options=d=i({addons:Xt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},_=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,A,x,L,F,q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:gt,dbReadyPromise:null,cancelOpen:gt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};q.dbReadyPromise=new De(function(B){q.dbReadyResolve=B}),q.openCanceller=new De(function(B,Z){q.cancelOpen=Z}),this._state=q,this.name=h,this.on=Rr(this,"populate","blocked","versionchange","close",{ready:[sn,gt]}),this.on.ready.subscribe=Ye(this.on.ready.subscribe,function(B){return function(Z,H){Xt.vip(function(){var K,$=g._state;$.openComplete?($.dbOpenError||De.resolve().then(Z),H&&B(Z)):$.onReadyBeingFired?($.onReadyBeingFired.push(Z),H&&B(Z)):(B(Z),K=g,H||B(function Y(){K.on.ready.unsubscribe(Z),K.on.ready.unsubscribe(Y)}))})}}),this.Collection=(S=this,Ii(Qi.prototype,function(ne,Y){this.db=S;var H=ia,K=null;if(Y)try{H=Y()}catch(oe){K=oe}var $=ne._ctx,Y=$.table,ne=Y.hook.reading.fire;this._ctx={table:Y,index:$.index,isPrimKey:!$.index||Y.schema.primKey.keyPath&&$.index===Y.schema.primKey.name,range:H,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:$.or,valueMapper:ne!==jn?ne:null}})),this.Table=(A=this,Ii(an.prototype,function(B,Z,H){this.db=A,this._tx=H,this.name=B,this.schema=Z,this.hook=A._allTables[B]?A._allTables[B].hook:Rr(null,{creating:[Qr,gt],reading:[ps,jn],updating:[ys,gt],deleting:[gs,gt]})})),this.Transaction=(x=this,Ii(Ni.prototype,function(B,Z,H,K,$){var Y=this;this.db=x,this.mode=B,this.storeNames=Z,this.schema=H,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=Rr(this,"complete","error","abort"),this.parent=$||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(ne,oe){Y._resolve=ne,Y._reject=oe}),this._completion.then(function(){Y.active=!1,Y.on.complete.fire()},function(ne){var oe=Y.active;return Y.active=!1,Y.on.error.fire(ne),Y.parent?Y.parent._reject(ne):oe&&Y.idbtrans&&Y.idbtrans.abort(),It(ne)})})),this.Version=(L=this,Ii(uo.prototype,function(B){this.db=L,this._cfg={version:B,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,Ii(la.prototype,function(B,Z,H){if(this.db=F,this._ctx={table:B,index:Z===":id"?null:Z,or:H},this._cmp=this._ascending=mt,this._descending=function(K,$){return mt($,K)},this._max=function(K,$){return 0<mt(K,$)?K:$},this._min=function(K,$){return mt(K,$)<0?K:$},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new xe.MissingAPI})),this.on("versionchange",function(B){0<B.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(B){!B.newVersion||B.newVersion<B.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(B.oldVersion/10))}),this._maxKey=Wi(d.IDBKeyRange),this._createTransaction=function(B,Z,H,K){return new g.Transaction(B,Z,H,g._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(B){g.on("blocked").fire(B),Ci.filter(function(Z){return Z.name===g.name&&Z!==g&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(B)})},this.use(qr),this.use(Zo),this.use(yf),this.use(Nt),this.use(oi);var W=new Proxy(this,{get:function(B,Z,H){if(Z==="_vip")return!0;if(Z==="table")return function($){return fo(g.table($),W)};var K=Reflect.get(B,Z,H);return K instanceof an?fo(K,W):Z==="tables"?K.map(function($){return fo($,W)}):Z==="_createTransaction"?function(){return fo(K.apply(this,arguments),W)}:K}});this.vip=W,_.forEach(function(B){return B(g)})}var ma,vr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ec=(Jo.prototype.subscribe=function(h,d,g){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:d,complete:g})},Jo.prototype[vr]=function(){return this},Jo);function Jo(h){this._subscribe=h}try{ma={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{ma={indexedDB:null,IDBKeyRange:null}}function bc(h){var d,g=!1,_=new Ec(function(S){var A=ve(h),x,L=!1,F={},q={},W={get closed(){return L},unsubscribe:function(){L||(L=!0,x&&x.abort(),B&&En.storagemutated.unsubscribe(H))}};S.start&&S.start(W);var B=!1,Z=function(){return Sr(K)},H=function($){Ds(F,$),ai(q,F)&&Z()},K=function(){var $,Y,ne;!L&&ma.indexedDB&&(F={},$={},x&&x.abort(),x=new AbortController,ne=(function(oe){var le=Si();try{A&&tn();var ce=Ut(h,oe);return ce=A?ce.finally(On):ce}finally{le&&nr()}})(Y={subscr:$,signal:x.signal,requery:Z,querier:h,trans:null}),Promise.resolve(ne).then(function(oe){g=!0,d=oe,L||Y.signal.aborted||(F={},(function(le){for(var ce in le)if(V(le,ce))return;return 1})(q=$)||B||(En(xr,H),B=!0),Sr(function(){return!L&&S.next&&S.next(oe)}))},function(oe){g=!1,["DatabaseClosedError","AbortError"].includes(oe==null?void 0:oe.name)||L||Sr(function(){L||S.error&&S.error(oe)})}))};return setTimeout(Z,0),W});return _.hasValue=function(){return g},_.getValue=function(){return d},_}var Os=li;function Wl(h){var d=ts;try{ts=!0,En.storagemutated.fire(h),te(h,!0)}finally{ts=d}}U(Os,i(i({},Yn),{delete:function(h){return new Os(h,{addons:[]}).delete()},exists:function(h){return new Os(h,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return d=Os.dependencies,g=d.indexedDB,d=d.IDBKeyRange,(xs(g)?Promise.resolve(g.databases()).then(function(_){return _.map(function(S){return S.name}).filter(function(S){return S!==Gi})}):Ji(g,d).toCollection().primaryKeys()).then(h)}catch{return It(new xe.MissingAPI)}var d,g},defineClass:function(){return function(h){E(this,h)}},ignoreTransaction:function(h){return Me.trans?pr(Me.transless,h):h()},vip:ca,async:function(h){return function(){try{var d=Je(h.apply(this,arguments));return d&&typeof d.then=="function"?d:De.resolve(d)}catch(g){return It(g)}}},spawn:function(h,d,g){try{var _=Je(h.apply(g,d||[]));return _&&typeof _.then=="function"?_:De.resolve(_)}catch(S){return It(S)}},currentTransaction:{get:function(){return Me.trans||null}},waitFor:function(h,d){return d=De.resolve(typeof h=="function"?Os.ignoreTransaction(h):h).timeout(d||6e4),Me.trans?Me.trans.waitFor(d):d},Promise:De,debug:{get:function(){return xn},set:function(h){Xo(h)}},derive:Se,extend:E,props:U,override:Ye,Events:Rr,on:En,liveQuery:bc,extendObservabilitySet:Ds,getByKeyPath:Re,setByKeyPath:P,delByKeyPath:function(h,d){typeof d=="string"?P(h,d,void 0):"length"in d&&[].map.call(d,function(g){P(h,g,void 0)})},shallowClone:O,deepClone:k,getObjectDiff:Qt,cmp:mt,asap:Ue,minKey:-1/0,addons:[],connections:Ci,errnames:rn,dependencies:ma,cache:u,semVer:"4.0.8",version:"4.0.8".split(".").map(function(h){return parseInt(h)}).reduce(function(h,d,g){return h+d/Math.pow(10,2*g)})})),Os.maxKey=Wi(Os.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(En(xr,function(h){ts||(h=new CustomEvent(ws,{detail:h}),ts=!0,dispatchEvent(h),ts=!1)}),addEventListener(ws,function(h){h=h.detail,ts||Wl(h)}));var pa,ts=!1,sr=function(){};return typeof BroadcastChannel<"u"&&((sr=function(){(pa=new BroadcastChannel(ws)).onmessage=function(h){return h.data&&Wl(h.data)}})(),typeof pa.unref=="function"&&pa.unref(),En(xr,function(h){ts||pa.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!li.disableBfCache&&h.persisted){xn&&console.debug("Dexie: handling persisted pagehide"),pa!=null&&pa.close();for(var d=0,g=Ci;d<g.length;d++)g[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!li.disableBfCache&&h.persisted&&(xn&&console.debug("Dexie: handling persisted pageshow"),sr(),Wl({all:new bn(-1/0,[[]])}))})),De.rejectionMapper=function(h,d){return!h||h instanceof je||h instanceof TypeError||h instanceof SyntaxError||!h.name||!Pt[h.name]?h:(d=new Pt[h.name](d||h.message,h),"stack"in h&&pe(d,"stack",{get:function(){return this.inner.stack}}),d)},Xo(xn),i(li,Object.freeze({__proto__:null,Dexie:li,liveQuery:bc,Entity:sa,cmp:mt,PropModSymbol:gr,PropModification:Ir,replacePrefix:function(h,d){return new Ir({replacePrefix:[h,d]})},add:function(h){return new Ir({add:h})},remove:function(h){return new Ir({remove:h})},default:li,RangeSet:bn,mergeRanges:si,rangesOverlap:co}),{default:li}),li})})(Nh)),Nh.exports}var j2=U2();const Gm=Ym(j2),a0=Symbol.for("Dexie"),Jh=globalThis[a0]||(globalThis[a0]=Gm);if(Gm.semVer!==Jh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Gm.semVer} and ${Jh.semVer}`);const{liveQuery:$2,mergeRanges:Z2,rangesOverlap:J2,RangeSet:ex,cmp:tx,Entity:nx,PropModSymbol:rx,PropModification:ix,replacePrefix:sx,add:ax,remove:ox}=Jh;class B2 extends Jh{constructor(){super("RDVault"),this.version(3).stores({passwords:"++id, title, updatedAt",settings:"key"})}}const Kt=new B2,Cb=ut.createContext(void 0),z2=({children:s})=>{const[e,n]=ut.useState({userId:"",masterKey:null,isUnlocked:!1}),[i,l]=ut.useState(null),[c,m]=ut.useState(null),[v,E]=ut.useState(!0),[b,I]=ut.useState(!1),[V,U]=ut.useState(!1),[se,pe]=ut.useState(!1);ut.useEffect(()=>{(async()=>{const P=await Kt.settings.get("verifier"),O=await Kt.settings.get("wrappedByBiometry");if(I(!!P),pe(!!O),window.PublicKeyCredential){const M=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();U(M)}const D=FA(Mo,M=>{m(M),M&&n(j=>({...j,userId:M.uid})),E(!1)});return()=>D()})()},[]);const Se=async Re=>{const P=window.crypto.getRandomValues(new Uint8Array(16)),O=window.crypto.getRandomValues(new Uint8Array(16)),D=window.crypto.getRandomValues(new Uint8Array(16)),M=await k2(),j=P2(),X=await Oo(Re,P),k=await Oo(j,D),Ct=await bh(M,X),kt=await bh(M,k),fe=await vm(Re,O);return await Kt.settings.bulkPut([{key:"verifier",value:fe},{key:"derivationSalt",value:P},{key:"verifierSalt",value:O},{key:"recoverySalt",value:D},{key:"wrappedByPassword",value:Ct},{key:"wrappedByRecovery",value:kt}]),I(!0),j},Ee=async Re=>{const P=await Kt.settings.get("derivationSalt"),O=await Kt.settings.get("verifierSalt"),D=await Kt.settings.get("verifier"),M=await Kt.settings.get("wrappedByPassword");if(!D||!P||!O||!M)throw new Error("Cofre corrompido ou incompleto.");if(await vm(Re,O.value)!==D.value)throw new Error("Senha Mestra Incorreta");const X=await Oo(Re,P.value),k=await _m(M.value,X);n(Ct=>({...Ct,masterKey:k,isUnlocked:!0}))},Le=async()=>{if(!e.masterKey)throw new Error("Desbloqueie o cofre primeiro.");const Re=window.crypto.getRandomValues(new Uint8Array(32)),P=window.crypto.getRandomValues(new Uint8Array(16));if(await navigator.credentials.create({publicKey:{challenge:Re,rp:{name:"RD Gestor de Senhas"},user:{id:P,name:(c==null?void 0:c.email)||"Local User",displayName:(c==null?void 0:c.email)||"Local User"},pubKeyCredParams:[{alg:-7,type:"public-key"}],authenticatorSelection:{userVerification:"required"},timeout:6e4}})){const D=window.crypto.getRandomValues(new Uint8Array(16)),M=Ho(window.crypto.getRandomValues(new Uint8Array(32))),j=await Oo(M,D),X=await bh(e.masterKey,j);await Kt.settings.bulkPut([{key:"biometrySecret",value:M},{key:"biometrySalt",value:D},{key:"wrappedByBiometry",value:X}]),pe(!0)}},Ne=async()=>{const Re=await Kt.settings.get("biometrySecret"),P=await Kt.settings.get("biometrySalt"),O=await Kt.settings.get("wrappedByBiometry");if(!Re||!P||!O)throw new Error("Biometria no cadastrada.");const D=window.crypto.getRandomValues(new Uint8Array(32));if(await navigator.credentials.get({publicKey:{challenge:D,timeout:6e4,userVerification:"required"}})){const j=await Oo(Re.value,P.value),X=await _m(O.value,j);n(k=>({...k,masterKey:X,isUnlocked:!0}))}},Ye=async Re=>{const P=await Kt.settings.get("recoverySalt"),O=await Kt.settings.get("wrappedByRecovery");if(!P||!O)throw new Error("Recuperao indisponvel.");const D=await Oo(Re,P.value),M=await _m(O.value,D);l(M)},ht=async Re=>{if(!i)throw new Error("Sesso expirada.");const P=window.crypto.getRandomValues(new Uint8Array(16)),O=window.crypto.getRandomValues(new Uint8Array(16)),D=await Oo(Re,P),M=await bh(i,D),j=await vm(Re,O);await Kt.settings.bulkPut([{key:"verifier",value:j},{key:"derivationSalt",value:P},{key:"verifierSalt",value:O},{key:"wrappedByPassword",value:M}]),n(X=>({...X,masterKey:i,isUnlocked:!0})),l(null)},Ue=()=>{Mo.signOut(),n({userId:e.userId,masterKey:null,isUnlocked:!1}),l(null)};return ee.jsx(Cb.Provider,{value:{session:e,supabaseUser:c,login:Ee,signup:Se,recover:Ye,resetPassword:ht,enableBiometry:Le,loginWithBiometry:Ne,logout:Ue,isLoading:v,isVaultConfigured:b,isBiometryAvailable:V,hasBiometryEnrolled:se},children:s})},vc=()=>{const s=ut.useContext(Cb);if(!s)throw new Error("useAuth must be used within AuthProvider");return s},Ib=()=>{const{session:s}=vc(),[e,n]=ut.useState({lastSynced:null,status:"idle"}),i=ut.useCallback(async()=>{const c=Mo.currentUser;if(!s.masterKey||!c)return console.warn("Sync: Chave mestra ou usurio ausente."),!1;try{n(pe=>({...pe,status:"syncing"}));const m=await Kt.passwords.toArray(),E=(await Kt.settings.toArray()).filter(pe=>!["biometrySecret"].includes(pe.key)),b={items:m,settings:E,version:"3.0-firebase",timestamp:Date.now()},I=JSON.stringify(b),{ciphertext:V,iv:U}=await V2(I,s.masterKey),se=Z_(i0,"backups",c.uid);return await x2(se,{encrypted_blob:JSON.stringify({ciphertext:V,iv:U}),salt:"RD-VAULT-V3-FIREBASE",updated_at:new Date().toISOString()},{merge:!0}),n({lastSynced:Date.now(),status:"success"}),!0}catch(m){throw console.error("Erro no Upload Firebase:",m),n({lastSynced:null,status:"error"}),m}},[s]),l=ut.useCallback(async()=>{const c=Mo.currentUser;if(!s.masterKey||!c)throw new Error("No autenticado.");try{n(se=>({...se,status:"syncing"}));const m=Z_(i0,"backups",c.uid),v=await I2(m);if(!v.exists())return!1;const E=v.data(),{ciphertext:b,iv:I}=JSON.parse(E.encrypted_blob),V=await M2(b,I,s.masterKey),U=JSON.parse(V);return await Kt.transaction("rw",[Kt.passwords,Kt.settings],async()=>{if(U.items&&(await Kt.passwords.clear(),await Kt.passwords.bulkAdd(U.items)),U.settings)for(const se of U.settings)await Kt.settings.put(se)}),n({lastSynced:Date.now(),status:"success"}),!0}catch(m){throw console.error("Erro no Download Firebase:",m),n({lastSynced:null,status:"error"}),m}},[s]);return{syncStatus:e,uploadBackup:i,downloadBackup:l}},q2=({onUse:s})=>{const[e,n]=ut.useState(16),[i,l]=ut.useState(""),c=()=>{const m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]:;?><,./-=";let v="";const E=new Uint8Array(e);window.crypto.getRandomValues(E);for(let b=0;b<e;++b)v+=m.charAt(E[b]%m.length);l(v)};return ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl space-y-3",children:[ee.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400",children:"Gerador de Senha"}),ee.jsxs("div",{className:"flex gap-2 items-center",children:[ee.jsx("input",{type:"range",min:"8",max:"64",value:e,onChange:m=>n(parseInt(m.target.value)),className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-orange-600"}),ee.jsx("span",{className:"mono text-orange-500",children:e})]}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsx("div",{className:"flex-1 bg-black p-2 rounded border border-slate-700 mono break-all min-h-[40px] flex items-center text-sm",children:i||"Cliquem em gerar..."}),ee.jsx("button",{onClick:c,className:"px-3 py-2 bg-orange-700 hover:bg-orange-600 rounded text-sm font-medium transition text-white",children:"Gerar"})]}),i&&ee.jsx("button",{onClick:()=>s(i),className:"w-full py-2 border border-orange-600 text-orange-500 hover:bg-orange-600 hover:text-white rounded text-sm font-medium transition",children:"Usar esta senha"})]})},H2=({onSave:s,onCancel:e,initialData:n})=>{const[i,l]=ut.useState(n||{title:"",username:"",password:"",url:"",notes:""}),c=m=>{m.preventDefault(),s({...i,updatedAt:Date.now()})};return ee.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 overflow-y-auto",children:ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 w-full max-w-2xl rounded-2xl p-6 shadow-2xl",children:[ee.jsx("h2",{className:"text-xl font-bold mb-6 text-white",children:n?"Editar Item":"Novo Item do Cofre"}),ee.jsxs("form",{onSubmit:c,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase mb-1",children:"Ttulo"}),ee.jsx("input",{required:!0,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-600 outline-none",value:i.title,onChange:m=>l({...i,title:m.target.value}),placeholder:"Ex: Google, Netflix..."})]}),ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase mb-1",children:"Usurio / Email"}),ee.jsx("input",{className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-600 outline-none",value:i.username,onChange:m=>l({...i,username:m.target.value})})]}),ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase mb-1",children:"Senha"}),ee.jsx("input",{type:"text",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-600 outline-none mono",value:i.password,onChange:m=>l({...i,password:m.target.value})})]}),ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase mb-1",children:"URL"}),ee.jsx("input",{className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-600 outline-none",value:i.url,onChange:m=>l({...i,url:m.target.value})})]})]}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsx(q2,{onUse:m=>l(v=>({...v,password:m}))}),ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-xs font-medium text-slate-400 uppercase mb-1",children:"Notas"}),ee.jsx("textarea",{rows:4,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-600 outline-none resize-none",value:i.notes,onChange:m=>l({...i,notes:m.target.value})})]})]}),ee.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3 pt-4 border-t border-slate-800",children:[ee.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-slate-400 hover:text-white transition",children:"Cancelar"}),ee.jsx("button",{type:"submit",className:"px-8 py-2 bg-orange-700 hover:bg-orange-600 rounded-lg font-semibold text-white shadow-lg transition",children:"Salvar no Cofre"})]})]})]})})},F2=({onClose:s,onSyncSuccess:e})=>{const{supabaseUser:n,session:i}=vc(),{uploadBackup:l,downloadBackup:c,syncStatus:m}=Ib(),[v,E]=ut.useState(""),[b,I]=ut.useState(""),[V,U]=ut.useState("login"),[se,pe]=ut.useState(null),[Se,Ee]=ut.useState(null),[Le,Ne]=ut.useState(!1);ut.useEffect(()=>{n&&i.isUnlocked&&m.status==="idle"&&ht("upload",!0)},[n,i.isUnlocked,m.status]);const Ye=async Ue=>{Ue.preventDefault(),Ne(!0),pe(null),Ee(null);try{V==="signup"?(await BA(Mo,v,b),Ee("Conta criada com sucesso no Firebase!")):(await zA(Mo,v,b),Ee("Logado no Firebase!"),setTimeout(()=>ht("download"),500))}catch(Re){console.error("Firebase Auth Error:",Re.code,Re.message),Re.code==="auth/operation-not-allowed"?pe("Erro: O cadastro por E-mail est desativado no Console do Firebase. Ative em Authentication > Sign-in Method."):Re.code==="auth/email-already-in-use"?pe("Este e-mail j est em uso. Tente fazer login."):Re.code==="auth/weak-password"?pe("A senha deve ter pelo menos 6 caracteres."):pe(Re.message||"Erro de autenticao no Firebase.")}finally{Ne(!1)}},ht=async(Ue,Re=!1)=>{Re||Ne(!0),pe(null);try{Ue==="upload"?(await l(),Re||Ee("Nuvem Firebase atualizada!")):await c()?(Re||Ee("Cofre restaurado do Firestore!"),e&&e()):Re||Ee("Nenhum backup encontrado no Firestore.")}catch(P){Re||pe(P.message||"Falha na sincronizao Cloud.")}finally{Re||Ne(!1)}};return ee.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-md",children:ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 w-full max-w-md rounded-3xl p-8 shadow-2xl relative",children:[ee.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-slate-500 hover:text-white transition p-2",children:ee.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),ee.jsxs("div",{className:"text-center mb-8",children:[ee.jsx("h2",{className:"text-2xl font-black tracking-tight uppercase",children:"Sincronizao Firebase"}),ee.jsx("p",{className:"text-slate-500 text-xs mt-2 uppercase tracking-widest font-bold",children:n?`ATIVO: ${n.email}`:"Backup Firestore (AES-256)"})]}),se&&ee.jsx("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 p-4 rounded-2xl text-xs mb-6 text-center whitespace-pre-wrap",children:se}),Se&&ee.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 p-4 rounded-2xl text-xs mb-6 text-center",children:Se}),n?ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[ee.jsx("button",{onClick:()=>ht("upload"),disabled:Le,className:"w-full bg-orange-700 hover:bg-orange-600 text-white py-4 rounded-2xl font-black transition uppercase tracking-tighter",children:"Backup Manual p/ Firestore"}),ee.jsx("button",{onClick:()=>ht("download"),disabled:Le,className:"w-full border border-slate-700 text-slate-300 py-4 rounded-2xl font-black transition uppercase tracking-tighter",children:"Restaurar do Firestore"})]}),ee.jsx("button",{onClick:()=>{KA(Mo),s()},className:"w-full text-slate-500 text-[10px] font-black hover:text-red-500 transition uppercase tracking-widest mt-4",children:"Desconectar Firebase"})]}):ee.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[ee.jsxs("div",{className:"flex bg-black/40 p-1 rounded-xl mb-4 border border-slate-800",children:[ee.jsx("button",{type:"button",onClick:()=>U("login"),className:`flex-1 py-2 text-xs font-black rounded-lg transition ${V==="login"?"bg-slate-800 text-white shadow":"text-slate-500"}`,children:"LOGIN"}),ee.jsx("button",{type:"button",onClick:()=>U("signup"),className:`flex-1 py-2 text-xs font-black rounded-lg transition ${V==="signup"?"bg-slate-800 text-white shadow":"text-slate-500"}`,children:"CADASTRAR"})]}),ee.jsx("input",{type:"email",placeholder:"E-mail",required:!0,className:"w-full bg-slate-800 border border-slate-700 rounded-2xl px-5 py-4 outline-none focus:ring-2 focus:ring-orange-600 transition text-white",value:v,onChange:Ue=>E(Ue.target.value)}),ee.jsx("input",{type:"password",placeholder:"Senha Firebase",required:!0,className:"w-full bg-slate-800 border border-slate-700 rounded-2xl px-5 py-4 outline-none focus:ring-2 focus:ring-orange-600 transition text-white",value:b,onChange:Ue=>I(Ue.target.value)}),ee.jsxs("button",{disabled:Le,className:"w-full bg-orange-700 hover:bg-orange-600 text-white py-4 rounded-2xl font-black transition flex justify-center items-center gap-2 shadow-xl shadow-orange-950/20",children:[Le&&ee.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),V==="login"?"CONECTAR FIRESTORE":"CRIAR CONTA FIREBASE"]})]})]})})},K2=()=>{const{session:s,supabaseUser:e,logout:n,isBiometryAvailable:i,hasBiometryEnrolled:l,enableBiometry:c}=vc(),{syncStatus:m,uploadBackup:v,downloadBackup:E}=Ib(),[b,I]=ut.useState([]),[V,U]=ut.useState(""),[se,pe]=ut.useState(!1),[Se,Ee]=ut.useState(!1),[Le,Ne]=ut.useState(),[Ye,ht]=ut.useState(null),[Ue,Re]=ut.useState(!1),[P,O]=ut.useState(!1),[D,M]=ut.useState(null),j=ut.useCallback(async()=>{try{const fe=await Kt.passwords.toArray();I(fe.sort((ze,Ve)=>Ve.updatedAt-ze.updatedAt))}catch(fe){console.error("Erro ao buscar senhas:",fe)}},[]);ut.useEffect(()=>{j()},[j]);const X=b.filter(fe=>fe.title.toLowerCase().includes(V.toLowerCase())||fe.username.toLowerCase().includes(V.toLowerCase())),k=async fe=>{try{Le!=null&&Le.id?await Kt.passwords.update(Le.id,fe):await Kt.passwords.add(fe),pe(!1),Ne(void 0),await j(),e&&v().catch(console.error)}catch{alert("Erro ao salvar senha localmente.")}},Ct=async()=>{if(D!==null)try{const fe=D;await Kt.passwords.delete(fe),I(ze=>ze.filter(Ve=>Ve.id!==fe)),e&&v().catch(console.error),M(null)}catch(fe){console.error("Erro ao excluir:",fe),j(),M(null)}},kt=async()=>{if(!e){Ee(!0);return}O(!0);try{await E()&&await j()}catch(fe){alert("Erro ao sincronizar: "+fe.message)}finally{O(!1)}};return ee.jsxs("div",{className:"min-h-screen bg-slate-950 p-6",children:[ee.jsxs("header",{className:"max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 mb-10",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx("div",{className:"bg-orange-700 p-2 rounded-xl shadow-lg shadow-orange-900/20",children:ee.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),ee.jsxs("h1",{className:"text-2xl font-bold tracking-tight italic uppercase",children:["RD ",ee.jsx("span",{className:"text-orange-600",children:"VAULT"})]})]}),ee.jsxs("div",{className:"flex items-center gap-4",children:[i&&!l&&ee.jsx("button",{onClick:async()=>{Re(!0);try{await c(),alert("Biometria ativa!")}catch(fe){alert("Erro biometria: "+fe.message)}Re(!1)},disabled:Ue,className:"bg-slate-900 border border-slate-800 px-4 py-1.5 rounded-full text-[10px] font-black text-slate-400 hover:text-orange-500 transition uppercase tracking-widest",children:Ue?"ATIVANDO...":"Ativar Digital"}),ee.jsxs("div",{className:"flex bg-slate-900 rounded-full border border-slate-800 p-1 items-center",children:[ee.jsx("button",{onClick:kt,disabled:P,className:`p-2 text-slate-400 hover:text-orange-500 transition ${P?"animate-spin":""}`,title:"Sincronizar Nuvem",children:ee.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),ee.jsx("div",{className:"w-[1px] h-4 bg-slate-800 mx-1"}),ee.jsx("button",{onClick:()=>Ee(!0),className:"px-4 py-1.5 text-[10px] font-black text-orange-500 hover:text-orange-400 transition tracking-widest uppercase",children:e?"Cloud ON":"Sync Cloud"})]}),ee.jsx("button",{onClick:n,className:"text-slate-500 hover:text-white transition p-2 hover:bg-slate-900 rounded-full",children:ee.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),ee.jsxs("main",{className:"max-w-6xl mx-auto",children:[ee.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[ee.jsxs("div",{className:"relative flex-1",children:[ee.jsx("input",{type:"text",placeholder:"Pesquisar no cofre...",className:"w-full bg-slate-900 border border-slate-800 rounded-2xl pl-12 pr-4 py-4 outline-none focus:border-orange-600 transition shadow-sm font-medium text-slate-100",value:V,onChange:fe=>U(fe.target.value)}),ee.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),ee.jsx("button",{onClick:()=>{Ne(void 0),pe(!0)},className:"bg-orange-700 hover:bg-orange-600 text-white px-8 py-4 rounded-2xl font-black transition flex items-center justify-center gap-2 shadow-xl shadow-orange-950/20",children:"Nova Senha"})]}),X.length===0?ee.jsx("div",{className:"text-center py-32 bg-slate-900/30 border border-dashed border-slate-800 rounded-3xl",children:ee.jsx("p",{className:"text-slate-500 font-medium tracking-tight",children:"O cofre est vazio."})}):ee.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(fe=>ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-3xl hover:border-orange-600/50 transition-all group shadow-sm relative overflow-hidden",children:[ee.jsxs("div",{className:"absolute top-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition flex gap-1 z-10",children:[ee.jsx("button",{onClick:ze=>{ze.stopPropagation(),Ne(fe),pe(!0)},className:"p-2 text-slate-500 hover:text-orange-500 bg-black/40 rounded-xl transition",children:ee.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),ee.jsx("button",{onClick:ze=>{ze.stopPropagation(),M(fe.id)},className:"p-2 text-slate-500 hover:text-red-400 bg-black/40 rounded-xl transition",children:ee.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),ee.jsx("div",{className:"mb-4",children:ee.jsx("div",{className:"bg-slate-800 w-10 h-10 rounded-xl flex items-center justify-center border border-slate-700",children:ee.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})})}),ee.jsx("h3",{className:"font-bold text-lg mb-1 truncate pr-16",children:fe.title}),ee.jsx("p",{className:"text-slate-500 text-xs mb-5 truncate font-medium uppercase tracking-wider",children:fe.username||"Sem usurio"}),ee.jsxs("div",{className:"bg-black/40 p-3.5 rounded-2xl border border-slate-800 flex items-center gap-2",children:[ee.jsx("div",{className:"flex-1 mono text-sm overflow-hidden text-ellipsis whitespace-nowrap text-slate-300",children:Ye===fe.id?fe.password:""}),ee.jsx("button",{onClick:ze=>{ze.stopPropagation(),ht(Ye===fe.id?null:fe.id)},className:"text-slate-600 hover:text-orange-500 transition",children:ee.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Ye===fe.id?ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l18 18"}):ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),!Ye&&ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268-2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),fe.url&&ee.jsx("a",{href:fe.url.startsWith("http")?fe.url:`https://${fe.url}`,target:"_blank",rel:"noopener noreferrer",className:"mt-5 inline-flex items-center text-[10px] font-black text-orange-600 hover:text-orange-500 transition gap-2 uppercase tracking-widest",children:"Acessar Site"})]},fe.id))})]}),D!==null&&ee.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-[150] backdrop-blur-sm animate-in fade-in duration-200",children:ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl max-w-sm w-full shadow-2xl text-center scale-in duration-200",children:[ee.jsx("div",{className:"bg-red-500/10 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:ee.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),ee.jsx("h2",{className:"text-xl font-bold mb-2",children:"Excluir Senha?"}),ee.jsx("p",{className:"text-slate-400 text-sm mb-8",children:"Esta ao remover o item permanentemente do seu cofre local e da nuvem."}),ee.jsxs("div",{className:"flex gap-3",children:[ee.jsx("button",{onClick:()=>M(null),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-2xl font-bold transition",children:"Cancelar"}),ee.jsx("button",{onClick:Ct,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white rounded-2xl font-bold transition shadow-lg shadow-red-950/20",children:"Excluir"})]})]})}),se&&ee.jsx(H2,{onSave:k,onCancel:()=>pe(!1),initialData:Le}),Se&&ee.jsx(F2,{onClose:()=>Ee(!1),onSyncSuccess:j}),m.status==="syncing"&&ee.jsxs("div",{className:"fixed bottom-6 right-6 bg-slate-900 border border-slate-800 px-6 py-4 rounded-3xl flex items-center gap-4 shadow-2xl z-[200]",children:[ee.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-600 animate-pulse"}),ee.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-slate-300",children:"Sync Nuvem..."})]})]})},G2=()=>{const{login:s,signup:e,recover:n,resetPassword:i,loginWithBiometry:l,isVaultConfigured:c,isBiometryAvailable:m,hasBiometryEnrolled:v}=vc(),[E,b]=ut.useState(""),[I,V]=ut.useState(""),[U,se]=ut.useState("login"),[pe,Se]=ut.useState(""),[Ee,Le]=ut.useState(null),[Ne,Ye]=ut.useState(!1);ut.useEffect(()=>{c?U==="signup"&&se("login"):se("signup")},[c]);const ht=async Re=>{Re.preventDefault(),Le(null),Ye(!0);try{if(U==="signup"){const P=await e(E);Se(P)}else U==="login"?await s(E):U==="forgot"?(await n(I),se("reset")):U==="reset"&&await i(E)}catch(P){Le(P.message||"Erro inesperado.")}finally{Ye(!1)}},Ue=async()=>{Le(null);try{await l()}catch(Re){Le("Falha na biometria: "+(Re.message||"Usurio cancelou."))}};return pe?ee.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 p-4",children:ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl max-w-lg w-full shadow-2xl text-center",children:[ee.jsxs("div",{className:"bg-orange-700/10 border border-orange-700/50 p-4 rounded-xl mb-6 text-left",children:[ee.jsxs("h2",{className:"text-orange-600 font-bold mb-2 flex items-center gap-2",children:[ee.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"SALVE SUA CHAVE AGORA"]}),ee.jsxs("p",{className:"text-orange-200/80 text-sm",children:["Se esquecer sua Senha Mestra, essa  a ",ee.jsx("strong",{children:"nica"})," salvao. Sem ela, seus dados sero perdidos para sempre."]})]}),ee.jsx("div",{className:"bg-black p-4 rounded-xl border border-slate-700 mono text-xl text-orange-500 break-all mb-8 select-all cursor-pointer",children:pe}),ee.jsx("button",{onClick:()=>s(E),className:"w-full bg-orange-700 hover:bg-orange-600 text-white py-4 rounded-2xl font-bold transition shadow-xl",children:"Chave Salva, Acessar Cofre"})]})}):ee.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 p-4",children:ee.jsxs("div",{className:"max-w-md w-full",children:[ee.jsxs("div",{className:"text-center mb-10",children:[ee.jsx("div",{className:"bg-orange-700 w-16 h-16 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-orange-700/20",children:ee.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),ee.jsxs("h1",{className:"text-4xl font-black mb-2 tracking-tighter",children:["RD ",ee.jsx("span",{className:"text-orange-600",children:"Gestor de Senhas"})]}),ee.jsx("p",{className:"text-slate-500 italic text-sm",children:"Criptografia AES-256 local."})]}),ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl shadow-2xl relative overflow-hidden",children:[m&&v&&U==="login"&&ee.jsx("div",{className:"absolute top-4 right-4",children:ee.jsx("button",{onClick:Ue,className:"p-3 bg-slate-800 hover:bg-orange-700/20 border border-slate-700 hover:border-orange-600 rounded-2xl text-orange-500 transition group",title:"Desbloqueio Biomtrico",children:ee.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A10.003 10.003 0 0012 3m0 18a10.003 10.003 0 01-8.12-4.064m12.783-7.574A9.123 9.123 0 0012 11a9.123 9.123 0 00-4.663 1.276m11.326 3.309A8.918 8.918 0 0021 12a8.917 8.917 0 00-7.347-8.76"})})})}),U!=="forgot"&&U!=="reset"&&ee.jsxs("div",{className:"flex bg-black/50 p-1 rounded-xl mb-8 mr-12",children:[ee.jsx("button",{onClick:()=>c&&se("login"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition ${U==="login"?"bg-slate-800 text-white shadow":"text-slate-500 opacity-50"}`,children:"LOGIN"}),ee.jsx("button",{onClick:()=>se("signup"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition ${U==="signup"?"bg-slate-800 text-white shadow":"text-slate-500"}`,children:"SETUP"})]}),ee.jsxs("form",{onSubmit:ht,className:"space-y-6",children:[ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-widest",children:U==="forgot"?"Chave de Recuperao":U==="reset"?"Nova Senha Mestra":"Senha Mestra"}),ee.jsx("input",{type:U==="forgot"?"text":"password",required:!0,className:"w-full bg-slate-800 border border-slate-700 rounded-2xl px-5 py-4 outline-none focus:ring-2 focus:ring-orange-600 transition font-medium",placeholder:U==="forgot"?"CHAVE-DE-24-BYTES...":"",value:U==="forgot"?I:E,onChange:Re=>U==="forgot"?V(Re.target.value):b(Re.target.value)})]}),Ee&&ee.jsx("div",{className:"text-red-400 text-xs bg-red-400/10 p-4 rounded-xl border border-red-400/20 text-center animate-pulse",children:Ee}),ee.jsxs("button",{type:"submit",disabled:Ne,className:"w-full bg-orange-700 hover:bg-orange-600 text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2 shadow-xl shadow-orange-950/20",children:[Ne&&ee.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),U==="login"?"Desbloquear Cofre":U==="signup"?"Configurar Cofre":U==="forgot"?"Validar Chave":"Salvar Nova Senha"]}),ee.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[U==="login"&&ee.jsx("button",{type:"button",onClick:()=>se("forgot"),className:"text-slate-500 text-xs hover:text-orange-500 transition",children:"Esqueci minha senha"}),(U==="forgot"||U==="reset")&&ee.jsx("button",{type:"button",onClick:()=>se("login"),className:"text-slate-500 text-xs hover:text-white transition underline",children:"Voltar"})]})]})]}),U==="login"&&m&&!v&&ee.jsx("p",{className:"mt-6 text-center text-slate-500 text-xs",children:"Dica: Aps entrar, voc poder ativar o desbloqueio por digital."})]})})},Y2=()=>{const{session:s,isLoading:e}=vc();return e?ee.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:ee.jsx("div",{className:"w-12 h-12 border-4 border-orange-700 border-t-transparent rounded-full animate-spin"})}):s.isUnlocked?ee.jsx(K2,{}):ee.jsx(G2,{})},Q2=()=>ee.jsx(z2,{children:ee.jsx(Y2,{})}),xb=document.getElementById("root");if(!xb)throw new Error("Could not find root element to mount to");const X2=nw.createRoot(xb);X2.render(ee.jsx(QT.StrictMode,{children:ee.jsx(Q2,{})}));
